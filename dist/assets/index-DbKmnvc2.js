function Vh(e,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Gh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uu={exports:{}},ul={},Bu={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr=Symbol.for("react.element"),Kh=Symbol.for("react.portal"),Yh=Symbol.for("react.fragment"),Qh=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),Jh=Symbol.for("react.provider"),Zh=Symbol.for("react.context"),e0=Symbol.for("react.forward_ref"),t0=Symbol.for("react.suspense"),s0=Symbol.for("react.memo"),n0=Symbol.for("react.lazy"),Bc=Symbol.iterator;function r0(e){return e===null||typeof e!="object"?null:(e=Bc&&e[Bc]||e["@@iterator"],typeof e=="function"?e:null)}var zu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qu=Object.assign,Hu={};function On(e,s,n){this.props=e,this.context=s,this.refs=Hu,this.updater=n||zu}On.prototype.isReactComponent={};On.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};On.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wu(){}Wu.prototype=On.prototype;function So(e,s,n){this.props=e,this.context=s,this.refs=Hu,this.updater=n||zu}var Do=So.prototype=new Wu;Do.constructor=So;qu(Do,On.prototype);Do.isPureReactComponent=!0;var zc=Array.isArray,Vu=Object.prototype.hasOwnProperty,To={current:null},Gu={key:!0,ref:!0,__self:!0,__source:!0};function Ku(e,s,n){var r,a={},l=null,i=null;if(s!=null)for(r in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Vu.call(s,r)&&!Gu.hasOwnProperty(r)&&(a[r]=s[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),m=0;m<o;m++)c[m]=arguments[m+2];a.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:zr,type:e,key:l,ref:i,props:a,_owner:To.current}}function a0(e,s){return{$$typeof:zr,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function Io(e){return typeof e=="object"&&e!==null&&e.$$typeof===zr}function l0(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return s[n]})}var qc=/\/+/g;function Ol(e,s){return typeof e=="object"&&e!==null&&e.key!=null?l0(""+e.key):s.toString(36)}function ja(e,s,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case zr:case Kh:i=!0}}if(i)return i=e,a=a(i),e=r===""?"."+Ol(i,0):r,zc(a)?(n="",e!=null&&(n=e.replace(qc,"$&/")+"/"),ja(a,s,n,"",function(m){return m})):a!=null&&(Io(a)&&(a=a0(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(qc,"$&/")+"/")+e)),s.push(a)),1;if(i=0,r=r===""?".":r+":",zc(e))for(var o=0;o<e.length;o++){l=e[o];var c=r+Ol(l,o);i+=ja(l,s,n,c,a)}else if(c=r0(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=r+Ol(l,o++),i+=ja(l,s,n,c,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Xr(e,s,n){if(e==null)return e;var r=[],a=0;return ja(e,r,"","",function(l){return s.call(n,l,a++)}),r}function i0(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var Ze={current:null},Na={transition:null},o0={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Na,ReactCurrentOwner:To};function Yu(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Xr,forEach:function(e,s,n){Xr(e,function(){s.apply(this,arguments)},n)},count:function(e){var s=0;return Xr(e,function(){s++}),s},toArray:function(e){return Xr(e,function(s){return s})||[]},only:function(e){if(!Io(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=On;Z.Fragment=Yh;Z.Profiler=Xh;Z.PureComponent=So;Z.StrictMode=Qh;Z.Suspense=t0;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o0;Z.act=Yu;Z.cloneElement=function(e,s,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qu({},e.props),a=e.key,l=e.ref,i=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=To.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in s)Vu.call(s,c)&&!Gu.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var m=0;m<c;m++)o[m]=arguments[m+2];r.children=o}return{$$typeof:zr,type:e.type,key:a,ref:l,props:r,_owner:i}};Z.createContext=function(e){return e={$$typeof:Zh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jh,_context:e},e.Consumer=e};Z.createElement=Ku;Z.createFactory=function(e){var s=Ku.bind(null,e);return s.type=e,s};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:e0,render:e}};Z.isValidElement=Io;Z.lazy=function(e){return{$$typeof:n0,_payload:{_status:-1,_result:e},_init:i0}};Z.memo=function(e,s){return{$$typeof:s0,type:e,compare:s===void 0?null:s}};Z.startTransition=function(e){var s=Na.transition;Na.transition={};try{e()}finally{Na.transition=s}};Z.unstable_act=Yu;Z.useCallback=function(e,s){return Ze.current.useCallback(e,s)};Z.useContext=function(e){return Ze.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return Ze.current.useDeferredValue(e)};Z.useEffect=function(e,s){return Ze.current.useEffect(e,s)};Z.useId=function(){return Ze.current.useId()};Z.useImperativeHandle=function(e,s,n){return Ze.current.useImperativeHandle(e,s,n)};Z.useInsertionEffect=function(e,s){return Ze.current.useInsertionEffect(e,s)};Z.useLayoutEffect=function(e,s){return Ze.current.useLayoutEffect(e,s)};Z.useMemo=function(e,s){return Ze.current.useMemo(e,s)};Z.useReducer=function(e,s,n){return Ze.current.useReducer(e,s,n)};Z.useRef=function(e){return Ze.current.useRef(e)};Z.useState=function(e){return Ze.current.useState(e)};Z.useSyncExternalStore=function(e,s,n){return Ze.current.useSyncExternalStore(e,s,n)};Z.useTransition=function(){return Ze.current.useTransition()};Z.version="18.3.1";Bu.exports=Z;var b=Bu.exports;const Qu=Gh(b),c0=Vh({__proto__:null,default:Qu},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0=b,u0=Symbol.for("react.element"),m0=Symbol.for("react.fragment"),p0=Object.prototype.hasOwnProperty,h0=d0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x0={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,s,n){var r,a={},l=null,i=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(r in s)p0.call(s,r)&&!x0.hasOwnProperty(r)&&(a[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:u0,type:e,key:l,ref:i,props:a,_owner:h0.current}}ul.Fragment=m0;ul.jsx=Xu;ul.jsxs=Xu;Uu.exports=ul;var t=Uu.exports,yi={},Ju={exports:{}},ft={},Zu={exports:{}},em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(P,B){var O=P.length;P.push(B);e:for(;0<O;){var X=O-1>>>1,ne=P[X];if(0<a(ne,B))P[X]=B,P[O]=ne,O=X;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],O=P.pop();if(O!==B){P[0]=O;e:for(var X=0,ne=P.length,tt=ne>>>1;X<tt;){var st=2*(X+1)-1,Kt=P[st],nt=st+1,It=P[nt];if(0>a(Kt,O))nt<ne&&0>a(It,Kt)?(P[X]=It,P[nt]=O,X=nt):(P[X]=Kt,P[st]=O,X=st);else if(nt<ne&&0>a(It,O))P[X]=It,P[nt]=O,X=nt;else break e}}return B}function a(P,B){var O=P.sortIndex-B.sortIndex;return O!==0?O:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],m=[],j=1,y=null,h=3,v=!1,g=!1,p=!1,f=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(P){for(var B=n(m);B!==null;){if(B.callback===null)r(m);else if(B.startTime<=P)r(m),B.sortIndex=B.expirationTime,s(c,B);else break;B=n(m)}}function w(P){if(p=!1,u(P),!g)if(n(c)!==null)g=!0,De(N);else{var B=n(m);B!==null&&J(w,B.startTime-P)}}function N(P,B){g=!1,p&&(p=!1,d(I),I=-1),v=!0;var O=h;try{for(u(B),y=n(c);y!==null&&(!(y.expirationTime>B)||P&&!D());){var X=y.callback;if(typeof X=="function"){y.callback=null,h=y.priorityLevel;var ne=X(y.expirationTime<=B);B=e.unstable_now(),typeof ne=="function"?y.callback=ne:y===n(c)&&r(c),u(B)}else r(c);y=n(c)}if(y!==null)var tt=!0;else{var st=n(m);st!==null&&J(w,st.startTime-B),tt=!1}return tt}finally{y=null,h=O,v=!1}}var C=!1,k=null,I=-1,z=5,_=-1;function D(){return!(e.unstable_now()-_<z)}function Q(){if(k!==null){var P=e.unstable_now();_=P;var B=!0;try{B=k(!0,P)}finally{B?F():(C=!1,k=null)}}else C=!1}var F;if(typeof x=="function")F=function(){x(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,pe=K.port2;K.port1.onmessage=Q,F=function(){pe.postMessage(null)}}else F=function(){f(Q,0)};function De(P){k=P,C||(C=!0,F())}function J(P,B){I=f(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){g||v||(g=!0,De(N))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var O=h;h=B;try{return P()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var O=h;h=P;try{return B()}finally{h=O}},e.unstable_scheduleCallback=function(P,B,O){var X=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?X+O:X):O=X,P){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=O+ne,P={id:j++,callback:B,priorityLevel:P,startTime:O,expirationTime:ne,sortIndex:-1},O>X?(P.sortIndex=O,s(m,P),n(c)===null&&P===n(m)&&(p?(d(I),I=-1):p=!0,J(w,O-X))):(P.sortIndex=ne,s(c,P),g||v||(g=!0,De(N))),P},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(P){var B=h;return function(){var O=h;h=B;try{return P.apply(this,arguments)}finally{h=O}}}})(em);Zu.exports=em;var g0=Zu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0=b,gt=g0;function $(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tm=new Set,fr={};function en(e,s){Sn(e,s),Sn(e+"Capture",s)}function Sn(e,s){for(fr[e]=s,e=0;e<s.length;e++)tm.add(s[e])}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vi=Object.prototype.hasOwnProperty,y0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hc={},Wc={};function v0(e){return vi.call(Wc,e)?!0:vi.call(Hc,e)?!1:y0.test(e)?Wc[e]=!0:(Hc[e]=!0,!1)}function j0(e,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N0(e,s,n,r){if(s===null||typeof s>"u"||j0(e,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function et(e,s,n,r,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];Ue[s]=new et(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new et(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ao=/[\-:]([a-z])/g;function Po(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(Ao,Po);Ue[s]=new et(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(Ao,Po);Ue[s]=new et(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(Ao,Po);Ue[s]=new et(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new et(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new et(e,1,!1,e.toLowerCase(),null,!0,!0)});function Eo(e,s,n,r){var a=Ue.hasOwnProperty(s)?Ue[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N0(s,n,a,r)&&(n=null),r||a===null?v0(s)&&(n===null?e.removeAttribute(s):e.setAttribute(s,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,s,n):e.setAttribute(s,n))))}var is=f0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jr=Symbol.for("react.element"),ln=Symbol.for("react.portal"),on=Symbol.for("react.fragment"),Ro=Symbol.for("react.strict_mode"),ji=Symbol.for("react.profiler"),sm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),Mo=Symbol.for("react.forward_ref"),Ni=Symbol.for("react.suspense"),wi=Symbol.for("react.suspense_list"),Oo=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),rm=Symbol.for("react.offscreen"),Vc=Symbol.iterator;function zn(e){return e===null||typeof e!="object"?null:(e=Vc&&e[Vc]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,$l;function er(e){if($l===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);$l=s&&s[1]||""}return`
`+$l+e}var Ll=!1;function _l(e,s){if(!e||Ll)return"";Ll=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var r=m}Reflect.construct(e,[],s)}else{try{s.call()}catch(m){r=m}e.call(s.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=r.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Ll=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?er(e):""}function w0(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=_l(e.type,!1),e;case 11:return e=_l(e.type.render,!1),e;case 1:return e=_l(e.type,!0),e;default:return""}}function bi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case on:return"Fragment";case ln:return"Portal";case ji:return"Profiler";case Ro:return"StrictMode";case Ni:return"Suspense";case wi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nm:return(e.displayName||"Context")+".Consumer";case sm:return(e._context.displayName||"Context")+".Provider";case Mo:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oo:return s=e.displayName||null,s!==null?s:bi(e.type)||"Memo";case cs:s=e._payload,e=e._init;try{return bi(e(s))}catch{}}return null}function b0(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bi(s);case 8:return s===Ro?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ss(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function am(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function k0(e){var s=am(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),r=""+e[s];if(!e.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Zr(e){e._valueTracker||(e._valueTracker=k0(e))}function lm(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return e&&(r=am(e)?e.checked?"true":"false":e.value),e=r,e!==n?(s.setValue(e),!0):!1}function Ra(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ki(e,s){var n=s.checked;return ye({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gc(e,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=Ss(s.value!=null?s.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function im(e,s){s=s.checked,s!=null&&Eo(e,"checked",s,!1)}function Ci(e,s){im(e,s);var n=Ss(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?Si(e,s.type,n):s.hasOwnProperty("defaultValue")&&Si(e,s.type,Ss(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function Kc(e,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,n||s===e.value||(e.value=s),e.defaultValue=s}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Si(e,s,n){(s!=="number"||Ra(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tr=Array.isArray;function vn(e,s,n,r){if(e=e.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=s.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ss(n),s=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function Di(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error($(91));return ye({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yc(e,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error($(92));if(tr(n)){if(1<n.length)throw Error($(93));n=n[0]}s=n}s==null&&(s=""),n=s}e._wrapperState={initialValue:Ss(n)}}function om(e,s){var n=Ss(s.value),r=Ss(s.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),s.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qc(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function cm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ti(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?cm(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ea,dm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(s,n,r,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ea.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function yr(e,s){if(s){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=s;return}}e.textContent=s}var ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C0=["Webkit","ms","Moz","O"];Object.keys(ar).forEach(function(e){C0.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),ar[s]=ar[e]})});function um(e,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||ar.hasOwnProperty(e)&&ar[e]?(""+s).trim():s+"px"}function mm(e,s){e=e.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=um(n,s[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var S0=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ii(e,s){if(s){if(S0[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error($(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error($(61))}if(s.style!=null&&typeof s.style!="object")throw Error($(62))}}function Ai(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pi=null;function $o(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ei=null,jn=null,Nn=null;function Xc(e){if(e=Wr(e)){if(typeof Ei!="function")throw Error($(280));var s=e.stateNode;s&&(s=gl(s),Ei(e.stateNode,e.type,s))}}function pm(e){jn?Nn?Nn.push(e):Nn=[e]:jn=e}function hm(){if(jn){var e=jn,s=Nn;if(Nn=jn=null,Xc(e),s)for(e=0;e<s.length;e++)Xc(s[e])}}function xm(e,s){return e(s)}function gm(){}var Fl=!1;function fm(e,s,n){if(Fl)return e(s,n);Fl=!0;try{return xm(e,s,n)}finally{Fl=!1,(jn!==null||Nn!==null)&&(gm(),hm())}}function vr(e,s){var n=e.stateNode;if(n===null)return null;var r=gl(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,s,typeof n));return n}var Ri=!1;if(ns)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Ri=!1}function D0(e,s,n,r,a,l,i,o,c){var m=Array.prototype.slice.call(arguments,3);try{s.apply(n,m)}catch(j){this.onError(j)}}var lr=!1,Ma=null,Oa=!1,Mi=null,T0={onError:function(e){lr=!0,Ma=e}};function I0(e,s,n,r,a,l,i,o,c){lr=!1,Ma=null,D0.apply(T0,arguments)}function A0(e,s,n,r,a,l,i,o,c){if(I0.apply(this,arguments),lr){if(lr){var m=Ma;lr=!1,Ma=null}else throw Error($(198));Oa||(Oa=!0,Mi=m)}}function tn(e){var s=e,n=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(n=s.return),e=s.return;while(e)}return s.tag===3?n:null}function ym(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Jc(e){if(tn(e)!==e)throw Error($(188))}function P0(e){var s=e.alternate;if(!s){if(s=tn(e),s===null)throw Error($(188));return s!==e?null:e}for(var n=e,r=s;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Jc(a),e;if(l===r)return Jc(a),s;l=l.sibling}throw Error($(188))}if(n.return!==r.return)n=a,r=l;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,r=l;break}if(o===r){i=!0,r=a,n=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===n){i=!0,n=l,r=a;break}if(o===r){i=!0,r=l,n=a;break}o=o.sibling}if(!i)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:s}function vm(e){return e=P0(e),e!==null?jm(e):null}function jm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=jm(e);if(s!==null)return s;e=e.sibling}return null}var Nm=gt.unstable_scheduleCallback,Zc=gt.unstable_cancelCallback,E0=gt.unstable_shouldYield,R0=gt.unstable_requestPaint,be=gt.unstable_now,M0=gt.unstable_getCurrentPriorityLevel,Lo=gt.unstable_ImmediatePriority,wm=gt.unstable_UserBlockingPriority,$a=gt.unstable_NormalPriority,O0=gt.unstable_LowPriority,bm=gt.unstable_IdlePriority,ml=null,Wt=null;function $0(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ml,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:F0,L0=Math.log,_0=Math.LN2;function F0(e){return e>>>=0,e===0?32:31-(L0(e)/_0|0)|0}var ta=64,sa=4194304;function sr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function La(e,s){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var o=i&~a;o!==0?r=sr(o):(l&=i,l!==0&&(r=sr(l)))}else i=n&~a,i!==0?r=sr(i):l!==0&&(r=sr(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(r&4&&(r|=n&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=r;0<s;)n=31-_t(s),a=1<<n,r|=e[n],s&=~a;return r}function U0(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B0(e,s){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-_t(l),o=1<<i,c=a[i];c===-1?(!(o&n)||o&r)&&(a[i]=U0(o,s)):c<=s&&(e.expiredLanes|=o),l&=~o}}function Oi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function km(){var e=ta;return ta<<=1,!(ta&4194240)&&(ta=64),e}function Ul(e){for(var s=[],n=0;31>n;n++)s.push(e);return s}function qr(e,s,n){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-_t(s),e[s]=n}function z0(e,s){var n=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-_t(n),l=1<<a;s[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function _o(e,s){var n=e.entangledLanes|=s;for(e=e.entanglements;n;){var r=31-_t(n),a=1<<r;a&s|e[r]&s&&(e[r]|=s),n&=~a}}var ae=0;function Cm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sm,Fo,Dm,Tm,Im,$i=!1,na=[],gs=null,fs=null,ys=null,jr=new Map,Nr=new Map,us=[],q0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(e,s){switch(e){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nr.delete(s.pointerId)}}function Hn(e,s,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Wr(s),s!==null&&Fo(s)),e):(e.eventSystemFlags|=r,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function H0(e,s,n,r,a){switch(s){case"focusin":return gs=Hn(gs,e,s,n,r,a),!0;case"dragenter":return fs=Hn(fs,e,s,n,r,a),!0;case"mouseover":return ys=Hn(ys,e,s,n,r,a),!0;case"pointerover":var l=a.pointerId;return jr.set(l,Hn(jr.get(l)||null,e,s,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Nr.set(l,Hn(Nr.get(l)||null,e,s,n,r,a)),!0}return!1}function Am(e){var s=zs(e.target);if(s!==null){var n=tn(s);if(n!==null){if(s=n.tag,s===13){if(s=ym(n),s!==null){e.blockedOn=s,Im(e.priority,function(){Dm(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wa(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var n=Li(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pi=r,n.target.dispatchEvent(r),Pi=null}else return s=Wr(n),s!==null&&Fo(s),e.blockedOn=n,!1;s.shift()}return!0}function td(e,s,n){wa(e)&&n.delete(s)}function W0(){$i=!1,gs!==null&&wa(gs)&&(gs=null),fs!==null&&wa(fs)&&(fs=null),ys!==null&&wa(ys)&&(ys=null),jr.forEach(td),Nr.forEach(td)}function Wn(e,s){e.blockedOn===s&&(e.blockedOn=null,$i||($i=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,W0)))}function wr(e){function s(a){return Wn(a,e)}if(0<na.length){Wn(na[0],e);for(var n=1;n<na.length;n++){var r=na[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gs!==null&&Wn(gs,e),fs!==null&&Wn(fs,e),ys!==null&&Wn(ys,e),jr.forEach(s),Nr.forEach(s),n=0;n<us.length;n++)r=us[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)Am(n),n.blockedOn===null&&us.shift()}var wn=is.ReactCurrentBatchConfig,_a=!0;function V0(e,s,n,r){var a=ae,l=wn.transition;wn.transition=null;try{ae=1,Uo(e,s,n,r)}finally{ae=a,wn.transition=l}}function G0(e,s,n,r){var a=ae,l=wn.transition;wn.transition=null;try{ae=4,Uo(e,s,n,r)}finally{ae=a,wn.transition=l}}function Uo(e,s,n,r){if(_a){var a=Li(e,s,n,r);if(a===null)Ql(e,s,r,Fa,n),ed(e,r);else if(H0(a,e,s,n,r))r.stopPropagation();else if(ed(e,r),s&4&&-1<q0.indexOf(e)){for(;a!==null;){var l=Wr(a);if(l!==null&&Sm(l),l=Li(e,s,n,r),l===null&&Ql(e,s,r,Fa,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else Ql(e,s,r,null,n)}}var Fa=null;function Li(e,s,n,r){if(Fa=null,e=$o(r),e=zs(e),e!==null)if(s=tn(e),s===null)e=null;else if(n=s.tag,n===13){if(e=ym(s),e!==null)return e;e=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Fa=e,null}function Pm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M0()){case Lo:return 1;case wm:return 4;case $a:case O0:return 16;case bm:return 536870912;default:return 16}default:return 16}}var ps=null,Bo=null,ba=null;function Em(){if(ba)return ba;var e,s=Bo,n=s.length,r,a="value"in ps?ps.value:ps.textContent,l=a.length;for(e=0;e<n&&s[e]===a[e];e++);var i=n-e;for(r=1;r<=i&&s[n-r]===a[l-r];r++);return ba=a.slice(e,1<r?1-r:void 0)}function ka(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function sd(){return!1}function yt(e){function s(n,r,a,l,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ra:sd,this.isPropagationStopped=sd,this}return ye(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),s}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=yt($n),Hr=ye({},$n,{view:0,detail:0}),K0=yt(Hr),Bl,zl,Vn,pl=ye({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vn&&(Vn&&e.type==="mousemove"?(Bl=e.screenX-Vn.screenX,zl=e.screenY-Vn.screenY):zl=Bl=0,Vn=e),Bl)},movementY:function(e){return"movementY"in e?e.movementY:zl}}),nd=yt(pl),Y0=ye({},pl,{dataTransfer:0}),Q0=yt(Y0),X0=ye({},Hr,{relatedTarget:0}),ql=yt(X0),J0=ye({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),Z0=yt(J0),ex=ye({},$n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tx=yt(ex),sx=ye({},$n,{data:0}),rd=yt(sx),nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lx(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=ax[e])?!!s[e]:!1}function qo(){return lx}var ix=ye({},Hr,{key:function(e){if(e.key){var s=nx[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ox=yt(ix),cx=ye({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=yt(cx),dx=ye({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),ux=yt(dx),mx=ye({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),px=yt(mx),hx=ye({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xx=yt(hx),gx=[9,13,27,32],Ho=ns&&"CompositionEvent"in window,ir=null;ns&&"documentMode"in document&&(ir=document.documentMode);var fx=ns&&"TextEvent"in window&&!ir,Rm=ns&&(!Ho||ir&&8<ir&&11>=ir),ld=" ",id=!1;function Mm(e,s){switch(e){case"keyup":return gx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Om(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cn=!1;function yx(e,s){switch(e){case"compositionend":return Om(s);case"keypress":return s.which!==32?null:(id=!0,ld);case"textInput":return e=s.data,e===ld&&id?null:e;default:return null}}function vx(e,s){if(cn)return e==="compositionend"||!Ho&&Mm(e,s)?(e=Em(),ba=Bo=ps=null,cn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Rm&&s.locale!=="ko"?null:s.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!jx[e.type]:s==="textarea"}function $m(e,s,n,r){pm(r),s=Ua(s,"onChange"),0<s.length&&(n=new zo("onChange","change",null,n,r),e.push({event:n,listeners:s}))}var or=null,br=null;function Nx(e){Gm(e,0)}function hl(e){var s=mn(e);if(lm(s))return e}function wx(e,s){if(e==="change")return s}var Lm=!1;if(ns){var Hl;if(ns){var Wl="oninput"in document;if(!Wl){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),Wl=typeof cd.oninput=="function"}Hl=Wl}else Hl=!1;Lm=Hl&&(!document.documentMode||9<document.documentMode)}function dd(){or&&(or.detachEvent("onpropertychange",_m),br=or=null)}function _m(e){if(e.propertyName==="value"&&hl(br)){var s=[];$m(s,br,e,$o(e)),fm(Nx,s)}}function bx(e,s,n){e==="focusin"?(dd(),or=s,br=n,or.attachEvent("onpropertychange",_m)):e==="focusout"&&dd()}function kx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(br)}function Cx(e,s){if(e==="click")return hl(s)}function Sx(e,s){if(e==="input"||e==="change")return hl(s)}function Dx(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ut=typeof Object.is=="function"?Object.is:Dx;function kr(e,s){if(Ut(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var n=Object.keys(e),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!vi.call(s,a)||!Ut(e[a],s[a]))return!1}return!0}function ud(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function md(e,s){var n=ud(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=s&&r>=s)return{node:n,offset:s-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ud(n)}}function Fm(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Fm(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Um(){for(var e=window,s=Ra();s instanceof e.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)e=s.contentWindow;else break;s=Ra(e.document)}return s}function Wo(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Tx(e){var s=Um(),n=e.focusedElem,r=e.selectionRange;if(s!==n&&n&&n.ownerDocument&&Fm(n.ownerDocument.documentElement,n)){if(r!==null&&Wo(n)){if(s=r.start,e=r.end,e===void 0&&(e=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(e,n.value.length);else if(e=(s=n.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=md(n,l);var i=md(n,r);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(s),e.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),e.addRange(s)))}}for(s=[],e=n;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)e=s[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ix=ns&&"documentMode"in document&&11>=document.documentMode,dn=null,_i=null,cr=null,Fi=!1;function pd(e,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fi||dn==null||dn!==Ra(r)||(r=dn,"selectionStart"in r&&Wo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cr&&kr(cr,r)||(cr=r,r=Ua(_i,"onSelect"),0<r.length&&(s=new zo("onSelect","select",null,s,n),e.push({event:s,listeners:r}),s.target=dn)))}function aa(e,s){var n={};return n[e.toLowerCase()]=s.toLowerCase(),n["Webkit"+e]="webkit"+s,n["Moz"+e]="moz"+s,n}var un={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionend:aa("Transition","TransitionEnd")},Vl={},Bm={};ns&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);function xl(e){if(Vl[e])return Vl[e];if(!un[e])return e;var s=un[e],n;for(n in s)if(s.hasOwnProperty(n)&&n in Bm)return Vl[e]=s[n];return e}var zm=xl("animationend"),qm=xl("animationiteration"),Hm=xl("animationstart"),Wm=xl("transitionend"),Vm=new Map,hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(e,s){Vm.set(e,s),en(s,[e])}for(var Gl=0;Gl<hd.length;Gl++){var Kl=hd[Gl],Ax=Kl.toLowerCase(),Px=Kl[0].toUpperCase()+Kl.slice(1);Ps(Ax,"on"+Px)}Ps(zm,"onAnimationEnd");Ps(qm,"onAnimationIteration");Ps(Hm,"onAnimationStart");Ps("dblclick","onDoubleClick");Ps("focusin","onFocus");Ps("focusout","onBlur");Ps(Wm,"onTransitionEnd");Sn("onMouseEnter",["mouseout","mouseover"]);Sn("onMouseLeave",["mouseout","mouseover"]);Sn("onPointerEnter",["pointerout","pointerover"]);Sn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ex=new Set("cancel close invalid load scroll toggle".split(" ").concat(nr));function xd(e,s,n){var r=e.type||"unknown-event";e.currentTarget=n,A0(r,s,void 0,e),e.currentTarget=null}function Gm(e,s){s=(s&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var i=r.length-1;0<=i;i--){var o=r[i],c=o.instance,m=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;xd(a,o,m),l=c}else for(i=0;i<r.length;i++){if(o=r[i],c=o.instance,m=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;xd(a,o,m),l=c}}}if(Oa)throw e=Mi,Oa=!1,Mi=null,e}function de(e,s){var n=s[Hi];n===void 0&&(n=s[Hi]=new Set);var r=e+"__bubble";n.has(r)||(Km(s,e,2,!1),n.add(r))}function Yl(e,s,n){var r=0;s&&(r|=4),Km(n,e,r,s)}var la="_reactListening"+Math.random().toString(36).slice(2);function Cr(e){if(!e[la]){e[la]=!0,tm.forEach(function(n){n!=="selectionchange"&&(Ex.has(n)||Yl(n,!1,e),Yl(n,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[la]||(s[la]=!0,Yl("selectionchange",!1,s))}}function Km(e,s,n,r){switch(Pm(s)){case 1:var a=V0;break;case 4:a=G0;break;default:a=Uo}n=a.bind(null,s,n,e),a=void 0,!Ri||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(s,n,{capture:!0,passive:a}):e.addEventListener(s,n,!0):a!==void 0?e.addEventListener(s,n,{passive:a}):e.addEventListener(s,n,!1)}function Ql(e,s,n,r,a){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=zs(o),i===null)return;if(c=i.tag,c===5||c===6){r=l=i;continue e}o=o.parentNode}}r=r.return}fm(function(){var m=l,j=$o(n),y=[];e:{var h=Vm.get(e);if(h!==void 0){var v=zo,g=e;switch(e){case"keypress":if(ka(n)===0)break e;case"keydown":case"keyup":v=ox;break;case"focusin":g="focus",v=ql;break;case"focusout":g="blur",v=ql;break;case"beforeblur":case"afterblur":v=ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ux;break;case zm:case qm:case Hm:v=Z0;break;case Wm:v=px;break;case"scroll":v=K0;break;case"wheel":v=xx;break;case"copy":case"cut":case"paste":v=tx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ad}var p=(s&4)!==0,f=!p&&e==="scroll",d=p?h!==null?h+"Capture":null:h;p=[];for(var x=m,u;x!==null;){u=x;var w=u.stateNode;if(u.tag===5&&w!==null&&(u=w,d!==null&&(w=vr(x,d),w!=null&&p.push(Sr(x,w,u)))),f)break;x=x.return}0<p.length&&(h=new v(h,g,null,n,j),y.push({event:h,listeners:p}))}}if(!(s&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&n!==Pi&&(g=n.relatedTarget||n.fromElement)&&(zs(g)||g[rs]))break e;if((v||h)&&(h=j.window===j?j:(h=j.ownerDocument)?h.defaultView||h.parentWindow:window,v?(g=n.relatedTarget||n.toElement,v=m,g=g?zs(g):null,g!==null&&(f=tn(g),g!==f||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=m),v!==g)){if(p=nd,w="onMouseLeave",d="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(p=ad,w="onPointerLeave",d="onPointerEnter",x="pointer"),f=v==null?h:mn(v),u=g==null?h:mn(g),h=new p(w,x+"leave",v,n,j),h.target=f,h.relatedTarget=u,w=null,zs(j)===m&&(p=new p(d,x+"enter",g,n,j),p.target=u,p.relatedTarget=f,w=p),f=w,v&&g)t:{for(p=v,d=g,x=0,u=p;u;u=sn(u))x++;for(u=0,w=d;w;w=sn(w))u++;for(;0<x-u;)p=sn(p),x--;for(;0<u-x;)d=sn(d),u--;for(;x--;){if(p===d||d!==null&&p===d.alternate)break t;p=sn(p),d=sn(d)}p=null}else p=null;v!==null&&gd(y,h,v,p,!1),g!==null&&f!==null&&gd(y,f,g,p,!0)}}e:{if(h=m?mn(m):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var N=wx;else if(od(h))if(Lm)N=Sx;else{N=kx;var C=bx}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Cx);if(N&&(N=N(e,m))){$m(y,N,n,j);break e}C&&C(e,h,m),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Si(h,"number",h.value)}switch(C=m?mn(m):window,e){case"focusin":(od(C)||C.contentEditable==="true")&&(dn=C,_i=m,cr=null);break;case"focusout":cr=_i=dn=null;break;case"mousedown":Fi=!0;break;case"contextmenu":case"mouseup":case"dragend":Fi=!1,pd(y,n,j);break;case"selectionchange":if(Ix)break;case"keydown":case"keyup":pd(y,n,j)}var k;if(Ho)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else cn?Mm(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Rm&&n.locale!=="ko"&&(cn||I!=="onCompositionStart"?I==="onCompositionEnd"&&cn&&(k=Em()):(ps=j,Bo="value"in ps?ps.value:ps.textContent,cn=!0)),C=Ua(m,I),0<C.length&&(I=new rd(I,e,null,n,j),y.push({event:I,listeners:C}),k?I.data=k:(k=Om(n),k!==null&&(I.data=k)))),(k=fx?yx(e,n):vx(e,n))&&(m=Ua(m,"onBeforeInput"),0<m.length&&(j=new rd("onBeforeInput","beforeinput",null,n,j),y.push({event:j,listeners:m}),j.data=k))}Gm(y,s)})}function Sr(e,s,n){return{instance:e,listener:s,currentTarget:n}}function Ua(e,s){for(var n=s+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=vr(e,n),l!=null&&r.unshift(Sr(e,l,a)),l=vr(e,s),l!=null&&r.push(Sr(e,l,a))),e=e.return}return r}function sn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gd(e,s,n,r,a){for(var l=s._reactName,i=[];n!==null&&n!==r;){var o=n,c=o.alternate,m=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&m!==null&&(o=m,a?(c=vr(n,l),c!=null&&i.unshift(Sr(n,c,o))):a||(c=vr(n,l),c!=null&&i.push(Sr(n,c,o)))),n=n.return}i.length!==0&&e.push({event:s,listeners:i})}var Rx=/\r\n?/g,Mx=/\u0000|\uFFFD/g;function fd(e){return(typeof e=="string"?e:""+e).replace(Rx,`
`).replace(Mx,"")}function ia(e,s,n){if(s=fd(s),fd(e)!==s&&n)throw Error($(425))}function Ba(){}var Ui=null,Bi=null;function zi(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qi=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,$x=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(e){return yd.resolve(null).then(e).catch(Lx)}:qi;function Lx(e){setTimeout(function(){throw e})}function Xl(e,s){var n=s,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),wr(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);wr(s)}function vs(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function vd(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return e;s--}else n==="/$"&&s++}e=e.previousSibling}return null}var Ln=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ln,Dr="__reactProps$"+Ln,rs="__reactContainer$"+Ln,Hi="__reactEvents$"+Ln,_x="__reactListeners$"+Ln,Fx="__reactHandles$"+Ln;function zs(e){var s=e[qt];if(s)return s;for(var n=e.parentNode;n;){if(s=n[rs]||n[qt]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(e=vd(e);e!==null;){if(n=e[qt])return n;e=vd(e)}return s}e=n,n=e.parentNode}return null}function Wr(e){return e=e[qt]||e[rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function gl(e){return e[Dr]||null}var Wi=[],pn=-1;function Es(e){return{current:e}}function ue(e){0>pn||(e.current=Wi[pn],Wi[pn]=null,pn--)}function ie(e,s){pn++,Wi[pn]=e.current,e.current=s}var Ds={},We=Es(Ds),ot=Es(!1),Gs=Ds;function Dn(e,s){var n=e.type.contextTypes;if(!n)return Ds;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=s[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function ct(e){return e=e.childContextTypes,e!=null}function za(){ue(ot),ue(We)}function jd(e,s,n){if(We.current!==Ds)throw Error($(168));ie(We,s),ie(ot,n)}function Ym(e,s,n){var r=e.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error($(108,b0(e)||"Unknown",a));return ye({},n,r)}function qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ds,Gs=We.current,ie(We,e),ie(ot,ot.current),!0}function Nd(e,s,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Ym(e,s,Gs),r.__reactInternalMemoizedMergedChildContext=e,ue(ot),ue(We),ie(We,e)):ue(ot),ie(ot,n)}var Jt=null,fl=!1,Jl=!1;function Qm(e){Jt===null?Jt=[e]:Jt.push(e)}function Ux(e){fl=!0,Qm(e)}function Rs(){if(!Jl&&Jt!==null){Jl=!0;var e=0,s=ae;try{var n=Jt;for(ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Jt=null,fl=!1}catch(a){throw Jt!==null&&(Jt=Jt.slice(e+1)),Nm(Lo,Rs),a}finally{ae=s,Jl=!1}}return null}var hn=[],xn=0,Ha=null,Wa=0,jt=[],Nt=0,Ks=null,Zt=1,es="";function _s(e,s){hn[xn++]=Wa,hn[xn++]=Ha,Ha=e,Wa=s}function Xm(e,s,n){jt[Nt++]=Zt,jt[Nt++]=es,jt[Nt++]=Ks,Ks=e;var r=Zt;e=es;var a=32-_t(r)-1;r&=~(1<<a),n+=1;var l=32-_t(s)+a;if(30<l){var i=a-a%5;l=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Zt=1<<32-_t(s)+a|n<<a|r,es=l+e}else Zt=1<<l|n<<a|r,es=e}function Vo(e){e.return!==null&&(_s(e,1),Xm(e,1,0))}function Go(e){for(;e===Ha;)Ha=hn[--xn],hn[xn]=null,Wa=hn[--xn],hn[xn]=null;for(;e===Ks;)Ks=jt[--Nt],jt[Nt]=null,es=jt[--Nt],jt[Nt]=null,Zt=jt[--Nt],jt[Nt]=null}var xt=null,ht=null,he=!1,$t=null;function Jm(e,s){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=e,s=e.deletions,s===null?(e.deletions=[n],e.flags|=16):s.push(n)}function wd(e,s){switch(e.tag){case 5:var n=e.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xt=e,ht=vs(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xt=e,ht=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=Ks!==null?{id:Zt,overflow:es}:null,e.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=s,n.return=e,e.child=n,xt=e,ht=null,!0):!1;default:return!1}}function Vi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gi(e){if(he){var s=ht;if(s){var n=s;if(!wd(e,s)){if(Vi(e))throw Error($(418));s=vs(n.nextSibling);var r=xt;s&&wd(e,s)?Jm(r,n):(e.flags=e.flags&-4097|2,he=!1,xt=e)}}else{if(Vi(e))throw Error($(418));e.flags=e.flags&-4097|2,he=!1,xt=e}}}function bd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function oa(e){if(e!==xt)return!1;if(!he)return bd(e),he=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!zi(e.type,e.memoizedProps)),s&&(s=ht)){if(Vi(e))throw Zm(),Error($(418));for(;s;)Jm(e,s),s=vs(s.nextSibling)}if(bd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(s===0){ht=vs(e.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}e=e.nextSibling}ht=null}}else ht=xt?vs(e.stateNode.nextSibling):null;return!0}function Zm(){for(var e=ht;e;)e=vs(e.nextSibling)}function Tn(){ht=xt=null,he=!1}function Ko(e){$t===null?$t=[e]:$t.push(e)}var Bx=is.ReactCurrentBatchConfig;function Gn(e,s,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var a=r,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function ca(e,s){throw e=Object.prototype.toString.call(s),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function kd(e){var s=e._init;return s(e._payload)}function ep(e){function s(d,x){if(e){var u=d.deletions;u===null?(d.deletions=[x],d.flags|=16):u.push(x)}}function n(d,x){if(!e)return null;for(;x!==null;)s(d,x),x=x.sibling;return null}function r(d,x){for(d=new Map;x!==null;)x.key!==null?d.set(x.key,x):d.set(x.index,x),x=x.sibling;return d}function a(d,x){return d=bs(d,x),d.index=0,d.sibling=null,d}function l(d,x,u){return d.index=u,e?(u=d.alternate,u!==null?(u=u.index,u<x?(d.flags|=2,x):u):(d.flags|=2,x)):(d.flags|=1048576,x)}function i(d){return e&&d.alternate===null&&(d.flags|=2),d}function o(d,x,u,w){return x===null||x.tag!==6?(x=ai(u,d.mode,w),x.return=d,x):(x=a(x,u),x.return=d,x)}function c(d,x,u,w){var N=u.type;return N===on?j(d,x,u.props.children,w,u.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===cs&&kd(N)===x.type)?(w=a(x,u.props),w.ref=Gn(d,x,u),w.return=d,w):(w=Pa(u.type,u.key,u.props,null,d.mode,w),w.ref=Gn(d,x,u),w.return=d,w)}function m(d,x,u,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==u.containerInfo||x.stateNode.implementation!==u.implementation?(x=li(u,d.mode,w),x.return=d,x):(x=a(x,u.children||[]),x.return=d,x)}function j(d,x,u,w,N){return x===null||x.tag!==7?(x=Vs(u,d.mode,w,N),x.return=d,x):(x=a(x,u),x.return=d,x)}function y(d,x,u){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ai(""+x,d.mode,u),x.return=d,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jr:return u=Pa(x.type,x.key,x.props,null,d.mode,u),u.ref=Gn(d,null,x),u.return=d,u;case ln:return x=li(x,d.mode,u),x.return=d,x;case cs:var w=x._init;return y(d,w(x._payload),u)}if(tr(x)||zn(x))return x=Vs(x,d.mode,u,null),x.return=d,x;ca(d,x)}return null}function h(d,x,u,w){var N=x!==null?x.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return N!==null?null:o(d,x,""+u,w);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Jr:return u.key===N?c(d,x,u,w):null;case ln:return u.key===N?m(d,x,u,w):null;case cs:return N=u._init,h(d,x,N(u._payload),w)}if(tr(u)||zn(u))return N!==null?null:j(d,x,u,w,null);ca(d,u)}return null}function v(d,x,u,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return d=d.get(u)||null,o(x,d,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jr:return d=d.get(w.key===null?u:w.key)||null,c(x,d,w,N);case ln:return d=d.get(w.key===null?u:w.key)||null,m(x,d,w,N);case cs:var C=w._init;return v(d,x,u,C(w._payload),N)}if(tr(w)||zn(w))return d=d.get(u)||null,j(x,d,w,N,null);ca(x,w)}return null}function g(d,x,u,w){for(var N=null,C=null,k=x,I=x=0,z=null;k!==null&&I<u.length;I++){k.index>I?(z=k,k=null):z=k.sibling;var _=h(d,k,u[I],w);if(_===null){k===null&&(k=z);break}e&&k&&_.alternate===null&&s(d,k),x=l(_,x,I),C===null?N=_:C.sibling=_,C=_,k=z}if(I===u.length)return n(d,k),he&&_s(d,I),N;if(k===null){for(;I<u.length;I++)k=y(d,u[I],w),k!==null&&(x=l(k,x,I),C===null?N=k:C.sibling=k,C=k);return he&&_s(d,I),N}for(k=r(d,k);I<u.length;I++)z=v(k,d,I,u[I],w),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?I:z.key),x=l(z,x,I),C===null?N=z:C.sibling=z,C=z);return e&&k.forEach(function(D){return s(d,D)}),he&&_s(d,I),N}function p(d,x,u,w){var N=zn(u);if(typeof N!="function")throw Error($(150));if(u=N.call(u),u==null)throw Error($(151));for(var C=N=null,k=x,I=x=0,z=null,_=u.next();k!==null&&!_.done;I++,_=u.next()){k.index>I?(z=k,k=null):z=k.sibling;var D=h(d,k,_.value,w);if(D===null){k===null&&(k=z);break}e&&k&&D.alternate===null&&s(d,k),x=l(D,x,I),C===null?N=D:C.sibling=D,C=D,k=z}if(_.done)return n(d,k),he&&_s(d,I),N;if(k===null){for(;!_.done;I++,_=u.next())_=y(d,_.value,w),_!==null&&(x=l(_,x,I),C===null?N=_:C.sibling=_,C=_);return he&&_s(d,I),N}for(k=r(d,k);!_.done;I++,_=u.next())_=v(k,d,I,_.value,w),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?I:_.key),x=l(_,x,I),C===null?N=_:C.sibling=_,C=_);return e&&k.forEach(function(Q){return s(d,Q)}),he&&_s(d,I),N}function f(d,x,u,w){if(typeof u=="object"&&u!==null&&u.type===on&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case Jr:e:{for(var N=u.key,C=x;C!==null;){if(C.key===N){if(N=u.type,N===on){if(C.tag===7){n(d,C.sibling),x=a(C,u.props.children),x.return=d,d=x;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===cs&&kd(N)===C.type){n(d,C.sibling),x=a(C,u.props),x.ref=Gn(d,C,u),x.return=d,d=x;break e}n(d,C);break}else s(d,C);C=C.sibling}u.type===on?(x=Vs(u.props.children,d.mode,w,u.key),x.return=d,d=x):(w=Pa(u.type,u.key,u.props,null,d.mode,w),w.ref=Gn(d,x,u),w.return=d,d=w)}return i(d);case ln:e:{for(C=u.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===u.containerInfo&&x.stateNode.implementation===u.implementation){n(d,x.sibling),x=a(x,u.children||[]),x.return=d,d=x;break e}else{n(d,x);break}else s(d,x);x=x.sibling}x=li(u,d.mode,w),x.return=d,d=x}return i(d);case cs:return C=u._init,f(d,x,C(u._payload),w)}if(tr(u))return g(d,x,u,w);if(zn(u))return p(d,x,u,w);ca(d,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,x!==null&&x.tag===6?(n(d,x.sibling),x=a(x,u),x.return=d,d=x):(n(d,x),x=ai(u,d.mode,w),x.return=d,d=x),i(d)):n(d,x)}return f}var In=ep(!0),tp=ep(!1),Va=Es(null),Ga=null,gn=null,Yo=null;function Qo(){Yo=gn=Ga=null}function Xo(e){var s=Va.current;ue(Va),e._currentValue=s}function Ki(e,s,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),e===n)break;e=e.return}}function bn(e,s){Ga=e,Yo=gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(it=!0),e.firstContext=null)}function St(e){var s=e._currentValue;if(Yo!==e)if(e={context:e,memoizedValue:s,next:null},gn===null){if(Ga===null)throw Error($(308));gn=e,Ga.dependencies={lanes:0,firstContext:e}}else gn=gn.next=e;return s}var qs=null;function Jo(e){qs===null?qs=[e]:qs.push(e)}function sp(e,s,n,r){var a=s.interleaved;return a===null?(n.next=n,Jo(s)):(n.next=a.next,a.next=n),s.interleaved=n,as(e,r)}function as(e,s){e.lanes|=s;var n=e.alternate;for(n!==null&&(n.lanes|=s),n=e,e=e.return;e!==null;)e.childLanes|=s,n=e.alternate,n!==null&&(n.childLanes|=s),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ds=!1;function Zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function np(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ss(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function js(e,s,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,as(e,n)}return a=r.interleaved,a===null?(s.next=s,Jo(r)):(s.next=a.next,a.next=s),r.interleaved=s,as(e,n)}function Ca(e,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=e.pendingLanes,n|=r,s.lanes=n,_o(e,n)}}function Cd(e,s){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=s:l=l.next=s}else a=l=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=s:e.next=s,n.lastBaseUpdate=s}function Ka(e,s,n,r){var a=e.updateQueue;ds=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,m=c.next;c.next=null,i===null?l=m:i.next=m,i=c;var j=e.alternate;j!==null&&(j=j.updateQueue,o=j.lastBaseUpdate,o!==i&&(o===null?j.firstBaseUpdate=m:o.next=m,j.lastBaseUpdate=c))}if(l!==null){var y=a.baseState;i=0,j=m=c=null,o=l;do{var h=o.lane,v=o.eventTime;if((r&h)===h){j!==null&&(j=j.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=s,v=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){y=g.call(v,y,h);break e}y=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(v,y,h):g,h==null)break e;y=ye({},y,h);break e;case 2:ds=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else v={eventTime:v,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},j===null?(m=j=v,c=y):j=j.next=v,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(j===null&&(c=y),a.baseState=c,a.firstBaseUpdate=m,a.lastBaseUpdate=j,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);Qs|=i,e.lanes=i,e.memoizedState=y}}function Sd(e,s,n){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var r=e[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error($(191,a));a.call(r)}}}var Vr={},Vt=Es(Vr),Tr=Es(Vr),Ir=Es(Vr);function Hs(e){if(e===Vr)throw Error($(174));return e}function ec(e,s){switch(ie(Ir,s),ie(Tr,e),ie(Vt,Vr),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ti(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=Ti(s,e)}ue(Vt),ie(Vt,s)}function An(){ue(Vt),ue(Tr),ue(Ir)}function rp(e){Hs(Ir.current);var s=Hs(Vt.current),n=Ti(s,e.type);s!==n&&(ie(Tr,e),ie(Vt,n))}function tc(e){Tr.current===e&&(ue(Vt),ue(Tr))}var ge=Es(0);function Ya(e){for(var s=e;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zl=[];function sc(){for(var e=0;e<Zl.length;e++)Zl[e]._workInProgressVersionPrimary=null;Zl.length=0}var Sa=is.ReactCurrentDispatcher,ei=is.ReactCurrentBatchConfig,Ys=0,fe=null,Ie=null,Me=null,Qa=!1,dr=!1,Ar=0,zx=0;function Be(){throw Error($(321))}function nc(e,s){if(s===null)return!1;for(var n=0;n<s.length&&n<e.length;n++)if(!Ut(e[n],s[n]))return!1;return!0}function rc(e,s,n,r,a,l){if(Ys=l,fe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Sa.current=e===null||e.memoizedState===null?Vx:Gx,e=n(r,a),dr){l=0;do{if(dr=!1,Ar=0,25<=l)throw Error($(301));l+=1,Me=Ie=null,s.updateQueue=null,Sa.current=Kx,e=n(r,a)}while(dr)}if(Sa.current=Xa,s=Ie!==null&&Ie.next!==null,Ys=0,Me=Ie=fe=null,Qa=!1,s)throw Error($(300));return e}function ac(){var e=Ar!==0;return Ar=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?fe.memoizedState=Me=e:Me=Me.next=e,Me}function Dt(){if(Ie===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var s=Me===null?fe.memoizedState:Me.next;if(s!==null)Me=s,Ie=e;else{if(e===null)throw Error($(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Me===null?fe.memoizedState=Me=e:Me=Me.next=e}return Me}function Pr(e,s){return typeof s=="function"?s(e):s}function ti(e){var s=Dt(),n=s.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ie,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var o=i=null,c=null,m=l;do{var j=m.lane;if((Ys&j)===j)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var y={lane:j,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(o=c=y,i=r):c=c.next=y,fe.lanes|=j,Qs|=j}m=m.next}while(m!==null&&m!==l);c===null?i=r:c.next=o,Ut(r,s.memoizedState)||(it=!0),s.memoizedState=r,s.baseState=i,s.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,fe.lanes|=l,Qs|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function si(e){var s=Dt(),n=s.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=s.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Ut(l,s.memoizedState)||(it=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),n.lastRenderedState=l}return[l,r]}function ap(){}function lp(e,s){var n=fe,r=Dt(),a=s(),l=!Ut(r.memoizedState,a);if(l&&(r.memoizedState=a,it=!0),r=r.queue,lc(cp.bind(null,n,r,e),[e]),r.getSnapshot!==s||l||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,Er(9,op.bind(null,n,r,a,s),void 0,null),$e===null)throw Error($(349));Ys&30||ip(n,s,a)}return a}function ip(e,s,n){e.flags|=16384,e={getSnapshot:s,value:n},s=fe.updateQueue,s===null?(s={lastEffect:null,stores:null},fe.updateQueue=s,s.stores=[e]):(n=s.stores,n===null?s.stores=[e]:n.push(e))}function op(e,s,n,r){s.value=n,s.getSnapshot=r,dp(s)&&up(e)}function cp(e,s,n){return n(function(){dp(s)&&up(e)})}function dp(e){var s=e.getSnapshot;e=e.value;try{var n=s();return!Ut(e,n)}catch{return!0}}function up(e){var s=as(e,1);s!==null&&Ft(s,e,1,-1)}function Dd(e){var s=zt();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:e},s.queue=e,e=e.dispatch=Wx.bind(null,fe,e),[s.memoizedState,e]}function Er(e,s,n,r){return e={tag:e,create:s,destroy:n,deps:r,next:null},s=fe.updateQueue,s===null?(s={lastEffect:null,stores:null},fe.updateQueue=s,s.lastEffect=e.next=e):(n=s.lastEffect,n===null?s.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,s.lastEffect=e)),e}function mp(){return Dt().memoizedState}function Da(e,s,n,r){var a=zt();fe.flags|=e,a.memoizedState=Er(1|s,n,void 0,r===void 0?null:r)}function yl(e,s,n,r){var a=Dt();r=r===void 0?null:r;var l=void 0;if(Ie!==null){var i=Ie.memoizedState;if(l=i.destroy,r!==null&&nc(r,i.deps)){a.memoizedState=Er(s,n,l,r);return}}fe.flags|=e,a.memoizedState=Er(1|s,n,l,r)}function Td(e,s){return Da(8390656,8,e,s)}function lc(e,s){return yl(2048,8,e,s)}function pp(e,s){return yl(4,2,e,s)}function hp(e,s){return yl(4,4,e,s)}function xp(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function gp(e,s,n){return n=n!=null?n.concat([e]):null,yl(4,4,xp.bind(null,s,e),n)}function ic(){}function fp(e,s){var n=Dt();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&nc(s,r[1])?r[0]:(n.memoizedState=[e,s],e)}function yp(e,s){var n=Dt();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&nc(s,r[1])?r[0]:(e=e(),n.memoizedState=[e,s],e)}function vp(e,s,n){return Ys&21?(Ut(n,s)||(n=km(),fe.lanes|=n,Qs|=n,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=n)}function qx(e,s){var n=ae;ae=n!==0&&4>n?n:4,e(!0);var r=ei.transition;ei.transition={};try{e(!1),s()}finally{ae=n,ei.transition=r}}function jp(){return Dt().memoizedState}function Hx(e,s,n){var r=ws(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Np(e))wp(s,n);else if(n=sp(e,s,n,r),n!==null){var a=Ye();Ft(n,e,r,a),bp(n,s,r)}}function Wx(e,s,n){var r=ws(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Np(e))wp(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,n);if(a.hasEagerState=!0,a.eagerState=o,Ut(o,i)){var c=s.interleaved;c===null?(a.next=a,Jo(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}n=sp(e,s,a,r),n!==null&&(a=Ye(),Ft(n,e,r,a),bp(n,s,r))}}function Np(e){var s=e.alternate;return e===fe||s!==null&&s===fe}function wp(e,s){dr=Qa=!0;var n=e.pending;n===null?s.next=s:(s.next=n.next,n.next=s),e.pending=s}function bp(e,s,n){if(n&4194240){var r=s.lanes;r&=e.pendingLanes,n|=r,s.lanes=n,_o(e,n)}}var Xa={readContext:St,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Vx={readContext:St,useCallback:function(e,s){return zt().memoizedState=[e,s===void 0?null:s],e},useContext:St,useEffect:Td,useImperativeHandle:function(e,s,n){return n=n!=null?n.concat([e]):null,Da(4194308,4,xp.bind(null,s,e),n)},useLayoutEffect:function(e,s){return Da(4194308,4,e,s)},useInsertionEffect:function(e,s){return Da(4,2,e,s)},useMemo:function(e,s){var n=zt();return s=s===void 0?null:s,e=e(),n.memoizedState=[e,s],e},useReducer:function(e,s,n){var r=zt();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Hx.bind(null,fe,e),[r.memoizedState,e]},useRef:function(e){var s=zt();return e={current:e},s.memoizedState=e},useState:Dd,useDebugValue:ic,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=Dd(!1),s=e[0];return e=qx.bind(null,e[1]),zt().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,n){var r=fe,a=zt();if(he){if(n===void 0)throw Error($(407));n=n()}else{if(n=s(),$e===null)throw Error($(349));Ys&30||ip(r,s,n)}a.memoizedState=n;var l={value:n,getSnapshot:s};return a.queue=l,Td(cp.bind(null,r,l,e),[e]),r.flags|=2048,Er(9,op.bind(null,r,l,n,s),void 0,null),n},useId:function(){var e=zt(),s=$e.identifierPrefix;if(he){var n=es,r=Zt;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=Ar++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=zx++,s=":"+s+"r"+n.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Gx={readContext:St,useCallback:fp,useContext:St,useEffect:lc,useImperativeHandle:gp,useInsertionEffect:pp,useLayoutEffect:hp,useMemo:yp,useReducer:ti,useRef:mp,useState:function(){return ti(Pr)},useDebugValue:ic,useDeferredValue:function(e){var s=Dt();return vp(s,Ie.memoizedState,e)},useTransition:function(){var e=ti(Pr)[0],s=Dt().memoizedState;return[e,s]},useMutableSource:ap,useSyncExternalStore:lp,useId:jp,unstable_isNewReconciler:!1},Kx={readContext:St,useCallback:fp,useContext:St,useEffect:lc,useImperativeHandle:gp,useInsertionEffect:pp,useLayoutEffect:hp,useMemo:yp,useReducer:si,useRef:mp,useState:function(){return si(Pr)},useDebugValue:ic,useDeferredValue:function(e){var s=Dt();return Ie===null?s.memoizedState=e:vp(s,Ie.memoizedState,e)},useTransition:function(){var e=si(Pr)[0],s=Dt().memoizedState;return[e,s]},useMutableSource:ap,useSyncExternalStore:lp,useId:jp,unstable_isNewReconciler:!1};function Mt(e,s){if(e&&e.defaultProps){s=ye({},s),e=e.defaultProps;for(var n in e)s[n]===void 0&&(s[n]=e[n]);return s}return s}function Yi(e,s,n,r){s=e.memoizedState,n=n(r,s),n=n==null?s:ye({},s,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vl={isMounted:function(e){return(e=e._reactInternals)?tn(e)===e:!1},enqueueSetState:function(e,s,n){e=e._reactInternals;var r=Ye(),a=ws(e),l=ss(r,a);l.payload=s,n!=null&&(l.callback=n),s=js(e,l,a),s!==null&&(Ft(s,e,a,r),Ca(s,e,a))},enqueueReplaceState:function(e,s,n){e=e._reactInternals;var r=Ye(),a=ws(e),l=ss(r,a);l.tag=1,l.payload=s,n!=null&&(l.callback=n),s=js(e,l,a),s!==null&&(Ft(s,e,a,r),Ca(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var n=Ye(),r=ws(e),a=ss(n,r);a.tag=2,s!=null&&(a.callback=s),s=js(e,a,r),s!==null&&(Ft(s,e,r,n),Ca(s,e,r))}};function Id(e,s,n,r,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):s.prototype&&s.prototype.isPureReactComponent?!kr(n,r)||!kr(a,l):!0}function kp(e,s,n){var r=!1,a=Ds,l=s.contextType;return typeof l=="object"&&l!==null?l=St(l):(a=ct(s)?Gs:We.current,r=s.contextTypes,l=(r=r!=null)?Dn(e,a):Ds),s=new s(n,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=vl,e.stateNode=s,s._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function Ad(e,s,n,r){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==e&&vl.enqueueReplaceState(s,s.state,null)}function Qi(e,s,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Zo(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=St(l):(l=ct(s)?Gs:We.current,a.context=Dn(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Yi(e,s,l,n),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&vl.enqueueReplaceState(a,a.state,null),Ka(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Pn(e,s){try{var n="",r=s;do n+=w0(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function ni(e,s,n){return{value:e,source:null,stack:n??null,digest:s??null}}function Xi(e,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var Yx=typeof WeakMap=="function"?WeakMap:Map;function Cp(e,s,n){n=ss(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){Za||(Za=!0,io=r),Xi(e,s)},n}function Sp(e,s,n){n=ss(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){Xi(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Xi(e,s),typeof r!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),n}function Pd(e,s,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Yx;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),e=cg.bind(null,e,s,n),s.then(e,e))}function Ed(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Rd(e,s,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=ss(-1,1),s.tag=2,js(n,s,1))),n.lanes|=1),e)}var Qx=is.ReactCurrentOwner,it=!1;function Ge(e,s,n,r){s.child=e===null?tp(s,null,n,r):In(s,e.child,n,r)}function Md(e,s,n,r,a){n=n.render;var l=s.ref;return bn(s,a),r=rc(e,s,n,r,l,a),n=ac(),e!==null&&!it?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,ls(e,s,a)):(he&&n&&Vo(s),s.flags|=1,Ge(e,s,r,a),s.child)}function Od(e,s,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!xc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=l,Dp(e,s,l,r,a)):(e=Pa(n.type,null,r,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:kr,n(i,r)&&e.ref===s.ref)return ls(e,s,a)}return s.flags|=1,e=bs(l,r),e.ref=s.ref,e.return=s,s.child=e}function Dp(e,s,n,r,a){if(e!==null){var l=e.memoizedProps;if(kr(l,r)&&e.ref===s.ref)if(it=!1,s.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(it=!0);else return s.lanes=e.lanes,ls(e,s,a)}return Ji(e,s,n,r,a)}function Tp(e,s,n){var r=s.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(yn,pt),pt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,ie(yn,pt),pt|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ie(yn,pt),pt|=r}else l!==null?(r=l.baseLanes|n,s.memoizedState=null):r=n,ie(yn,pt),pt|=r;return Ge(e,s,a,n),s.child}function Ip(e,s){var n=s.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function Ji(e,s,n,r,a){var l=ct(n)?Gs:We.current;return l=Dn(s,l),bn(s,a),n=rc(e,s,n,r,l,a),r=ac(),e!==null&&!it?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,ls(e,s,a)):(he&&r&&Vo(s),s.flags|=1,Ge(e,s,n,a),s.child)}function $d(e,s,n,r,a){if(ct(n)){var l=!0;qa(s)}else l=!1;if(bn(s,a),s.stateNode===null)Ta(e,s),kp(s,n,r),Qi(s,n,r,a),r=!0;else if(e===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,m=n.contextType;typeof m=="object"&&m!==null?m=St(m):(m=ct(n)?Gs:We.current,m=Dn(s,m));var j=n.getDerivedStateFromProps,y=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||c!==m)&&Ad(s,i,r,m),ds=!1;var h=s.memoizedState;i.state=h,Ka(s,r,i,a),c=s.memoizedState,o!==r||h!==c||ot.current||ds?(typeof j=="function"&&(Yi(s,n,j,r),c=s.memoizedState),(o=ds||Id(s,n,o,r,h,c,m))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),i.props=r,i.state=c,i.context=m,r=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{i=s.stateNode,np(e,s),o=s.memoizedProps,m=s.type===s.elementType?o:Mt(s.type,o),i.props=m,y=s.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=St(c):(c=ct(n)?Gs:We.current,c=Dn(s,c));var v=n.getDerivedStateFromProps;(j=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==y||h!==c)&&Ad(s,i,r,c),ds=!1,h=s.memoizedState,i.state=h,Ka(s,r,i,a);var g=s.memoizedState;o!==y||h!==g||ot.current||ds?(typeof v=="function"&&(Yi(s,n,v,r),g=s.memoizedState),(m=ds||Id(s,n,m,r,h,g,c)||!1)?(j||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=g),i.props=r,i.state=g,i.context=c,r=m):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(s.flags|=1024),r=!1)}return Zi(e,s,n,r,l,a)}function Zi(e,s,n,r,a,l){Ip(e,s);var i=(s.flags&128)!==0;if(!r&&!i)return a&&Nd(s,n,!1),ls(e,s,l);r=s.stateNode,Qx.current=s;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,e!==null&&i?(s.child=In(s,e.child,null,l),s.child=In(s,null,o,l)):Ge(e,s,o,l),s.memoizedState=r.state,a&&Nd(s,n,!0),s.child}function Ap(e){var s=e.stateNode;s.pendingContext?jd(e,s.pendingContext,s.pendingContext!==s.context):s.context&&jd(e,s.context,!1),ec(e,s.containerInfo)}function Ld(e,s,n,r,a){return Tn(),Ko(a),s.flags|=256,Ge(e,s,n,r),s.child}var eo={dehydrated:null,treeContext:null,retryLane:0};function to(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pp(e,s,n){var r=s.pendingProps,a=ge.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ie(ge,a&1),e===null)return Gi(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=r.children,e=r.fallback,l?(r=s.mode,l=s.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=wl(i,r,0,null),e=Vs(e,r,n,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=to(n),s.memoizedState=eo,e):oc(s,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Xx(e,s,i,r,o,a,n);if(l){l=r.fallback,i=s.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=bs(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=bs(o,l):(l=Vs(l,i,n,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,i=e.child.memoizedState,i=i===null?to(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,s.memoizedState=eo,r}return l=e.child,e=l.sibling,r=bs(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,e!==null&&(n=s.deletions,n===null?(s.deletions=[e],s.flags|=16):n.push(e)),s.child=r,s.memoizedState=null,r}function oc(e,s){return s=wl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function da(e,s,n,r){return r!==null&&Ko(r),In(s,e.child,null,n),e=oc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Xx(e,s,n,r,a,l,i){if(n)return s.flags&256?(s.flags&=-257,r=ni(Error($(422))),da(e,s,i,r)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=r.fallback,a=s.mode,r=wl({mode:"visible",children:r.children},a,0,null),l=Vs(l,a,i,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&In(s,e.child,null,i),s.child.memoizedState=to(i),s.memoizedState=eo,l);if(!(s.mode&1))return da(e,s,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error($(419)),r=ni(l,r,void 0),da(e,s,i,r)}if(o=(i&e.childLanes)!==0,it||o){if(r=$e,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,as(e,a),Ft(r,e,a,-1))}return hc(),r=ni(Error($(421))),da(e,s,i,r)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=dg.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,ht=vs(a.nextSibling),xt=s,he=!0,$t=null,e!==null&&(jt[Nt++]=Zt,jt[Nt++]=es,jt[Nt++]=Ks,Zt=e.id,es=e.overflow,Ks=s),s=oc(s,r.children),s.flags|=4096,s)}function _d(e,s,n){e.lanes|=s;var r=e.alternate;r!==null&&(r.lanes|=s),Ki(e.return,s,n)}function ri(e,s,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Ep(e,s,n){var r=s.pendingProps,a=r.revealOrder,l=r.tail;if(Ge(e,s,r.children,n),r=ge.current,r&2)r=r&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_d(e,n,s);else if(e.tag===19)_d(e,n,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ie(ge,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)e=n.alternate,e!==null&&Ya(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),ri(s,!1,a,n,l);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Ya(e)===null){s.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ri(s,!0,n,null,l);break;case"together":ri(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ta(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function ls(e,s,n){if(e!==null&&(s.dependencies=e.dependencies),Qs|=s.lanes,!(n&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error($(153));if(s.child!==null){for(e=s.child,n=bs(e,e.pendingProps),s.child=n,n.return=s;e.sibling!==null;)e=e.sibling,n=n.sibling=bs(e,e.pendingProps),n.return=s;n.sibling=null}return s.child}function Jx(e,s,n){switch(s.tag){case 3:Ap(s),Tn();break;case 5:rp(s);break;case 1:ct(s.type)&&qa(s);break;case 4:ec(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;ie(Va,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(ie(ge,ge.current&1),s.flags|=128,null):n&s.child.childLanes?Pp(e,s,n):(ie(ge,ge.current&1),e=ls(e,s,n),e!==null?e.sibling:null);ie(ge,ge.current&1);break;case 19:if(r=(n&s.childLanes)!==0,e.flags&128){if(r)return Ep(e,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ie(ge,ge.current),r)break;return null;case 22:case 23:return s.lanes=0,Tp(e,s,n)}return ls(e,s,n)}var Rp,so,Mp,Op;Rp=function(e,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};so=function(){};Mp=function(e,s,n,r){var a=e.memoizedProps;if(a!==r){e=s.stateNode,Hs(Vt.current);var l=null;switch(n){case"input":a=ki(e,a),r=ki(e,r),l=[];break;case"select":a=ye({},a,{value:void 0}),r=ye({},r,{value:void 0}),l=[];break;case"textarea":a=Di(e,a),r=Di(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ba)}Ii(n,r);var i;n=null;for(m in a)if(!r.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var o=a[m];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(fr.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in r){var c=r[m];if(o=a!=null?a[m]:void 0,r.hasOwnProperty(m)&&c!==o&&(c!=null||o!=null))if(m==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(m,n)),n=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(fr.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&de("scroll",e),l||o===c||(l=[])):(l=l||[]).push(m,c))}n&&(l=l||[]).push("style",n);var m=l;(s.updateQueue=m)&&(s.flags|=4)}};Op=function(e,s,n,r){n!==r&&(s.flags|=4)};function Kn(e,s){if(!he)switch(e.tailMode){case"hidden":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ze(e){var s=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(s)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,s}function Zx(e,s,n){var r=s.pendingProps;switch(Go(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(s),null;case 1:return ct(s.type)&&za(),ze(s),null;case 3:return r=s.stateNode,An(),ue(ot),ue(We),sc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(oa(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,$t!==null&&(uo($t),$t=null))),so(e,s),ze(s),null;case 5:tc(s);var a=Hs(Ir.current);if(n=s.type,e!==null&&s.stateNode!=null)Mp(e,s,n,r,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error($(166));return ze(s),null}if(e=Hs(Vt.current),oa(s)){r=s.stateNode,n=s.type;var l=s.memoizedProps;switch(r[qt]=s,r[Dr]=l,e=(s.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(a=0;a<nr.length;a++)de(nr[a],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":Gc(r,l),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},de("invalid",r);break;case"textarea":Yc(r,l),de("invalid",r)}Ii(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&ia(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&ia(r.textContent,o,e),a=["children",""+o]):fr.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&de("scroll",r)}switch(n){case"input":Zr(r),Kc(r,l,!0);break;case"textarea":Zr(r),Qc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ba)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[qt]=s,e[Dr]=r,Rp(e,s,!1,!1),s.stateNode=e;e:{switch(i=Ai(n,r),n){case"dialog":de("cancel",e),de("close",e),a=r;break;case"iframe":case"object":case"embed":de("load",e),a=r;break;case"video":case"audio":for(a=0;a<nr.length;a++)de(nr[a],e);a=r;break;case"source":de("error",e),a=r;break;case"img":case"image":case"link":de("error",e),de("load",e),a=r;break;case"details":de("toggle",e),a=r;break;case"input":Gc(e,r),a=ki(e,r),de("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ye({},r,{value:void 0}),de("invalid",e);break;case"textarea":Yc(e,r),a=Di(e,r),de("invalid",e);break;default:a=r}Ii(n,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?mm(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dm(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yr(e,c):typeof c=="number"&&yr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&de("scroll",e):c!=null&&Eo(e,l,c,i))}switch(n){case"input":Zr(e),Kc(e,r,!1);break;case"textarea":Zr(e),Qc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ss(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?vn(e,!!r.multiple,l,!1):r.defaultValue!=null&&vn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ba)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ze(s),null;case 6:if(e&&s.stateNode!=null)Op(e,s,e.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error($(166));if(n=Hs(Ir.current),Hs(Vt.current),oa(s)){if(r=s.stateNode,n=s.memoizedProps,r[qt]=s,(l=r.nodeValue!==n)&&(e=xt,e!==null))switch(e.tag){case 3:ia(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ia(r.nodeValue,n,(e.mode&1)!==0)}l&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=s,s.stateNode=r}return ze(s),null;case 13:if(ue(ge),r=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&ht!==null&&s.mode&1&&!(s.flags&128))Zm(),Tn(),s.flags|=98560,l=!1;else if(l=oa(s),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error($(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[qt]=s}else Tn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ze(s),l=!1}else $t!==null&&(uo($t),$t=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(e===null||ge.current&1?Ae===0&&(Ae=3):hc())),s.updateQueue!==null&&(s.flags|=4),ze(s),null);case 4:return An(),so(e,s),e===null&&Cr(s.stateNode.containerInfo),ze(s),null;case 10:return Xo(s.type._context),ze(s),null;case 17:return ct(s.type)&&za(),ze(s),null;case 19:if(ue(ge),l=s.memoizedState,l===null)return ze(s),null;if(r=(s.flags&128)!==0,i=l.rendering,i===null)if(r)Kn(l,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(i=Ya(e),i!==null){for(s.flags|=128,Kn(l,!1),r=i.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ie(ge,ge.current&1|2),s.child}e=e.sibling}l.tail!==null&&be()>En&&(s.flags|=128,r=!0,Kn(l,!1),s.lanes=4194304)}else{if(!r)if(e=Ya(i),e!==null){if(s.flags|=128,r=!0,n=e.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),Kn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!he)return ze(s),null}else 2*be()-l.renderingStartTime>En&&n!==1073741824&&(s.flags|=128,r=!0,Kn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(n=l.last,n!==null?n.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=be(),s.sibling=null,n=ge.current,ie(ge,r?n&1|2:n&1),s):(ze(s),null);case 22:case 23:return pc(),r=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?pt&1073741824&&(ze(s),s.subtreeFlags&6&&(s.flags|=8192)):ze(s),null;case 24:return null;case 25:return null}throw Error($(156,s.tag))}function eg(e,s){switch(Go(s),s.tag){case 1:return ct(s.type)&&za(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return An(),ue(ot),ue(We),sc(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return tc(s),null;case 13:if(ue(ge),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error($(340));Tn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return ue(ge),null;case 4:return An(),null;case 10:return Xo(s.type._context),null;case 22:case 23:return pc(),null;case 24:return null;default:return null}}var ua=!1,qe=!1,tg=typeof WeakSet=="function"?WeakSet:Set,q=null;function fn(e,s){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,s,r)}else n.current=null}function no(e,s,n){try{n()}catch(r){ve(e,s,r)}}var Fd=!1;function sg(e,s){if(Ui=_a,e=Um(),Wo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,o=-1,c=-1,m=0,j=0,y=e,h=null;t:for(;;){for(var v;y!==n||a!==0&&y.nodeType!==3||(o=i+a),y!==l||r!==0&&y.nodeType!==3||(c=i+r),y.nodeType===3&&(i+=y.nodeValue.length),(v=y.firstChild)!==null;)h=y,y=v;for(;;){if(y===e)break t;if(h===n&&++m===a&&(o=i),h===l&&++j===r&&(c=i),(v=y.nextSibling)!==null)break;y=h,h=y.parentNode}y=v}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bi={focusedElem:e,selectionRange:n},_a=!1,q=s;q!==null;)if(s=q,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,q=e;else for(;q!==null;){s=q;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,f=g.memoizedState,d=s.stateNode,x=d.getSnapshotBeforeUpdate(s.elementType===s.type?p:Mt(s.type,p),f);d.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var u=s.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(w){ve(s,s.return,w)}if(e=s.sibling,e!==null){e.return=s.return,q=e;break}q=s.return}return g=Fd,Fd=!1,g}function ur(e,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&no(s,n,l)}a=a.next}while(a!==r)}}function jl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function ro(e){var s=e.ref;if(s!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof s=="function"?s(e):s.current=e}}function $p(e){var s=e.alternate;s!==null&&(e.alternate=null,$p(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[qt],delete s[Dr],delete s[Hi],delete s[_x],delete s[Fx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lp(e){return e.tag===5||e.tag===3||e.tag===4}function Ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ao(e,s,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(e,s):n.insertBefore(e,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(e,n)):(s=n,s.appendChild(e)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Ba));else if(r!==4&&(e=e.child,e!==null))for(ao(e,s,n),e=e.sibling;e!==null;)ao(e,s,n),e=e.sibling}function lo(e,s,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,s?n.insertBefore(e,s):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(lo(e,s,n),e=e.sibling;e!==null;)lo(e,s,n),e=e.sibling}var _e=null,Ot=!1;function os(e,s,n){for(n=n.child;n!==null;)_p(e,s,n),n=n.sibling}function _p(e,s,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 5:qe||fn(n,s);case 6:var r=_e,a=Ot;_e=null,os(e,s,n),_e=r,Ot=a,_e!==null&&(Ot?(e=_e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(Ot?(e=_e,n=n.stateNode,e.nodeType===8?Xl(e.parentNode,n):e.nodeType===1&&Xl(e,n),wr(e)):Xl(_e,n.stateNode));break;case 4:r=_e,a=Ot,_e=n.stateNode.containerInfo,Ot=!0,os(e,s,n),_e=r,Ot=a;break;case 0:case 11:case 14:case 15:if(!qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&no(n,s,i),a=a.next}while(a!==r)}os(e,s,n);break;case 1:if(!qe&&(fn(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ve(n,s,o)}os(e,s,n);break;case 21:os(e,s,n);break;case 22:n.mode&1?(qe=(r=qe)||n.memoizedState!==null,os(e,s,n),qe=r):os(e,s,n);break;default:os(e,s,n)}}function Bd(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tg),s.forEach(function(r){var a=ug.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Pt(e,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:_e=o.stateNode,Ot=!1;break e;case 3:_e=o.stateNode.containerInfo,Ot=!0;break e;case 4:_e=o.stateNode.containerInfo,Ot=!0;break e}o=o.return}if(_e===null)throw Error($(160));_p(l,i,a),_e=null,Ot=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(m){ve(a,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Fp(s,e),s=s.sibling}function Fp(e,s){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(s,e),Bt(e),r&4){try{ur(3,e,e.return),jl(3,e)}catch(p){ve(e,e.return,p)}try{ur(5,e,e.return)}catch(p){ve(e,e.return,p)}}break;case 1:Pt(s,e),Bt(e),r&512&&n!==null&&fn(n,n.return);break;case 5:if(Pt(s,e),Bt(e),r&512&&n!==null&&fn(n,n.return),e.flags&32){var a=e.stateNode;try{yr(a,"")}catch(p){ve(e,e.return,p)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&im(a,l),Ai(o,i);var m=Ai(o,l);for(i=0;i<c.length;i+=2){var j=c[i],y=c[i+1];j==="style"?mm(a,y):j==="dangerouslySetInnerHTML"?dm(a,y):j==="children"?yr(a,y):Eo(a,j,y,m)}switch(o){case"input":Ci(a,l);break;case"textarea":om(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?vn(a,!!l.multiple,v,!1):h!==!!l.multiple&&(l.defaultValue!=null?vn(a,!!l.multiple,l.defaultValue,!0):vn(a,!!l.multiple,l.multiple?[]:"",!1))}a[Dr]=l}catch(p){ve(e,e.return,p)}}break;case 6:if(Pt(s,e),Bt(e),r&4){if(e.stateNode===null)throw Error($(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(p){ve(e,e.return,p)}}break;case 3:if(Pt(s,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wr(s.containerInfo)}catch(p){ve(e,e.return,p)}break;case 4:Pt(s,e),Bt(e);break;case 13:Pt(s,e),Bt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(uc=be())),r&4&&Bd(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(qe=(m=qe)||j,Pt(s,e),qe=m):Pt(s,e),Bt(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!j&&e.mode&1)for(q=e,j=e.child;j!==null;){for(y=q=j;q!==null;){switch(h=q,v=h.child,h.tag){case 0:case 11:case 14:case 15:ur(4,h,h.return);break;case 1:fn(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{s=r,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(p){ve(r,n,p)}}break;case 5:fn(h,h.return);break;case 22:if(h.memoizedState!==null){qd(y);continue}}v!==null?(v.return=h,q=v):qd(y)}j=j.sibling}e:for(j=null,y=e;;){if(y.tag===5){if(j===null){j=y;try{a=y.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=y.stateNode,c=y.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=um("display",i))}catch(p){ve(e,e.return,p)}}}else if(y.tag===6){if(j===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(p){ve(e,e.return,p)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;j===y&&(j=null),y=y.return}j===y&&(j=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Pt(s,e),Bt(e),r&4&&Bd(e);break;case 21:break;default:Pt(s,e),Bt(e)}}function Bt(e){var s=e.flags;if(s&2){try{e:{for(var n=e.return;n!==null;){if(Lp(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(yr(a,""),r.flags&=-33);var l=Ud(e);lo(e,l,a);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Ud(e);ao(e,o,i);break;default:throw Error($(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function ng(e,s,n){q=e,Up(e)}function Up(e,s,n){for(var r=(e.mode&1)!==0;q!==null;){var a=q,l=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||ua;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||qe;o=ua;var m=qe;if(ua=i,(qe=c)&&!m)for(q=a;q!==null;)i=q,c=i.child,i.tag===22&&i.memoizedState!==null?Hd(a):c!==null?(c.return=i,q=c):Hd(a);for(;l!==null;)q=l,Up(l),l=l.sibling;q=a,ua=o,qe=m}zd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,q=l):zd(e)}}function zd(e){for(;q!==null;){var s=q;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:qe||jl(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!qe)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Mt(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Sd(s,l,r);break;case 3:var i=s.updateQueue;if(i!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}Sd(s,i,n)}break;case 5:var o=s.stateNode;if(n===null&&s.flags&4){n=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var j=m.memoizedState;if(j!==null){var y=j.dehydrated;y!==null&&wr(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}qe||s.flags&512&&ro(s)}catch(h){ve(s,s.return,h)}}if(s===e){q=null;break}if(n=s.sibling,n!==null){n.return=s.return,q=n;break}q=s.return}}function qd(e){for(;q!==null;){var s=q;if(s===e){q=null;break}var n=s.sibling;if(n!==null){n.return=s.return,q=n;break}q=s.return}}function Hd(e){for(;q!==null;){var s=q;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{jl(4,s)}catch(c){ve(s,n,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(c){ve(s,a,c)}}var l=s.return;try{ro(s)}catch(c){ve(s,l,c)}break;case 5:var i=s.return;try{ro(s)}catch(c){ve(s,i,c)}}}catch(c){ve(s,s.return,c)}if(s===e){q=null;break}var o=s.sibling;if(o!==null){o.return=s.return,q=o;break}q=s.return}}var rg=Math.ceil,Ja=is.ReactCurrentDispatcher,cc=is.ReactCurrentOwner,kt=is.ReactCurrentBatchConfig,ee=0,$e=null,Ce=null,Fe=0,pt=0,yn=Es(0),Ae=0,Rr=null,Qs=0,Nl=0,dc=0,mr=null,lt=null,uc=0,En=1/0,Xt=null,Za=!1,io=null,Ns=null,ma=!1,hs=null,el=0,pr=0,oo=null,Ia=-1,Aa=0;function Ye(){return ee&6?be():Ia!==-1?Ia:Ia=be()}function ws(e){return e.mode&1?ee&2&&Fe!==0?Fe&-Fe:Bx.transition!==null?(Aa===0&&(Aa=km()),Aa):(e=ae,e!==0||(e=window.event,e=e===void 0?16:Pm(e.type)),e):1}function Ft(e,s,n,r){if(50<pr)throw pr=0,oo=null,Error($(185));qr(e,n,r),(!(ee&2)||e!==$e)&&(e===$e&&(!(ee&2)&&(Nl|=n),Ae===4&&ms(e,Fe)),dt(e,r),n===1&&ee===0&&!(s.mode&1)&&(En=be()+500,fl&&Rs()))}function dt(e,s){var n=e.callbackNode;B0(e,s);var r=La(e,e===$e?Fe:0);if(r===0)n!==null&&Zc(n),e.callbackNode=null,e.callbackPriority=0;else if(s=r&-r,e.callbackPriority!==s){if(n!=null&&Zc(n),s===1)e.tag===0?Ux(Wd.bind(null,e)):Qm(Wd.bind(null,e)),$x(function(){!(ee&6)&&Rs()}),n=null;else{switch(Cm(r)){case 1:n=Lo;break;case 4:n=wm;break;case 16:n=$a;break;case 536870912:n=bm;break;default:n=$a}n=Kp(n,Bp.bind(null,e))}e.callbackPriority=s,e.callbackNode=n}}function Bp(e,s){if(Ia=-1,Aa=0,ee&6)throw Error($(327));var n=e.callbackNode;if(kn()&&e.callbackNode!==n)return null;var r=La(e,e===$e?Fe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||s)s=tl(e,r);else{s=r;var a=ee;ee|=2;var l=qp();($e!==e||Fe!==s)&&(Xt=null,En=be()+500,Ws(e,s));do try{ig();break}catch(o){zp(e,o)}while(!0);Qo(),Ja.current=l,ee=a,Ce!==null?s=0:($e=null,Fe=0,s=Ae)}if(s!==0){if(s===2&&(a=Oi(e),a!==0&&(r=a,s=co(e,a))),s===1)throw n=Rr,Ws(e,0),ms(e,r),dt(e,be()),n;if(s===6)ms(e,r);else{if(a=e.current.alternate,!(r&30)&&!ag(a)&&(s=tl(e,r),s===2&&(l=Oi(e),l!==0&&(r=l,s=co(e,l))),s===1))throw n=Rr,Ws(e,0),ms(e,r),dt(e,be()),n;switch(e.finishedWork=a,e.finishedLanes=r,s){case 0:case 1:throw Error($(345));case 2:Fs(e,lt,Xt);break;case 3:if(ms(e,r),(r&130023424)===r&&(s=uc+500-be(),10<s)){if(La(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Ye(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=qi(Fs.bind(null,e,lt,Xt),s);break}Fs(e,lt,Xt);break;case 4:if(ms(e,r),(r&4194240)===r)break;for(s=e.eventTimes,a=-1;0<r;){var i=31-_t(r);l=1<<i,i=s[i],i>a&&(a=i),r&=~l}if(r=a,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rg(r/1960))-r,10<r){e.timeoutHandle=qi(Fs.bind(null,e,lt,Xt),r);break}Fs(e,lt,Xt);break;case 5:Fs(e,lt,Xt);break;default:throw Error($(329))}}}return dt(e,be()),e.callbackNode===n?Bp.bind(null,e):null}function co(e,s){var n=mr;return e.current.memoizedState.isDehydrated&&(Ws(e,s).flags|=256),e=tl(e,s),e!==2&&(s=lt,lt=n,s!==null&&uo(s)),e}function uo(e){lt===null?lt=e:lt.push.apply(lt,e)}function ag(e){for(var s=e;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Ut(l(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ms(e,s){for(s&=~dc,s&=~Nl,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var n=31-_t(s),r=1<<n;e[n]=-1,s&=~r}}function Wd(e){if(ee&6)throw Error($(327));kn();var s=La(e,0);if(!(s&1))return dt(e,be()),null;var n=tl(e,s);if(e.tag!==0&&n===2){var r=Oi(e);r!==0&&(s=r,n=co(e,r))}if(n===1)throw n=Rr,Ws(e,0),ms(e,s),dt(e,be()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Fs(e,lt,Xt),dt(e,be()),null}function mc(e,s){var n=ee;ee|=1;try{return e(s)}finally{ee=n,ee===0&&(En=be()+500,fl&&Rs())}}function Xs(e){hs!==null&&hs.tag===0&&!(ee&6)&&kn();var s=ee;ee|=1;var n=kt.transition,r=ae;try{if(kt.transition=null,ae=1,e)return e()}finally{ae=r,kt.transition=n,ee=s,!(ee&6)&&Rs()}}function pc(){pt=yn.current,ue(yn)}function Ws(e,s){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ox(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(Go(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&za();break;case 3:An(),ue(ot),ue(We),sc();break;case 5:tc(r);break;case 4:An();break;case 13:ue(ge);break;case 19:ue(ge);break;case 10:Xo(r.type._context);break;case 22:case 23:pc()}n=n.return}if($e=e,Ce=e=bs(e.current,null),Fe=pt=s,Ae=0,Rr=null,dc=Nl=Qs=0,lt=mr=null,qs!==null){for(s=0;s<qs.length;s++)if(n=qs[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,r.next=i}n.pending=r}qs=null}return e}function zp(e,s){do{var n=Ce;try{if(Qo(),Sa.current=Xa,Qa){for(var r=fe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Qa=!1}if(Ys=0,Me=Ie=fe=null,dr=!1,Ar=0,cc.current=null,n===null||n.return===null){Ae=1,Rr=s,Ce=null;break}e:{var l=e,i=n.return,o=n,c=s;if(s=Fe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,j=o,y=j.tag;if(!(j.mode&1)&&(y===0||y===11||y===15)){var h=j.alternate;h?(j.updateQueue=h.updateQueue,j.memoizedState=h.memoizedState,j.lanes=h.lanes):(j.updateQueue=null,j.memoizedState=null)}var v=Ed(i);if(v!==null){v.flags&=-257,Rd(v,i,o,l,s),v.mode&1&&Pd(l,m,s),s=v,c=m;var g=s.updateQueue;if(g===null){var p=new Set;p.add(c),s.updateQueue=p}else g.add(c);break e}else{if(!(s&1)){Pd(l,m,s),hc();break e}c=Error($(426))}}else if(he&&o.mode&1){var f=Ed(i);if(f!==null){!(f.flags&65536)&&(f.flags|=256),Rd(f,i,o,l,s),Ko(Pn(c,o));break e}}l=c=Pn(c,o),Ae!==4&&(Ae=2),mr===null?mr=[l]:mr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var d=Cp(l,c,s);Cd(l,d);break e;case 1:o=c;var x=l.type,u=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ns===null||!Ns.has(u)))){l.flags|=65536,s&=-s,l.lanes|=s;var w=Sp(l,o,s);Cd(l,w);break e}}l=l.return}while(l!==null)}Wp(n)}catch(N){s=N,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function qp(){var e=Ja.current;return Ja.current=Xa,e===null?Xa:e}function hc(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),$e===null||!(Qs&268435455)&&!(Nl&268435455)||ms($e,Fe)}function tl(e,s){var n=ee;ee|=2;var r=qp();($e!==e||Fe!==s)&&(Xt=null,Ws(e,s));do try{lg();break}catch(a){zp(e,a)}while(!0);if(Qo(),ee=n,Ja.current=r,Ce!==null)throw Error($(261));return $e=null,Fe=0,Ae}function lg(){for(;Ce!==null;)Hp(Ce)}function ig(){for(;Ce!==null&&!E0();)Hp(Ce)}function Hp(e){var s=Gp(e.alternate,e,pt);e.memoizedProps=e.pendingProps,s===null?Wp(e):Ce=s,cc.current=null}function Wp(e){var s=e;do{var n=s.alternate;if(e=s.return,s.flags&32768){if(n=eg(n,s),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Ce=null;return}}else if(n=Zx(n,s,pt),n!==null){Ce=n;return}if(s=s.sibling,s!==null){Ce=s;return}Ce=s=e}while(s!==null);Ae===0&&(Ae=5)}function Fs(e,s,n){var r=ae,a=kt.transition;try{kt.transition=null,ae=1,og(e,s,n,r)}finally{kt.transition=a,ae=r}return null}function og(e,s,n,r){do kn();while(hs!==null);if(ee&6)throw Error($(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(z0(e,l),e===$e&&(Ce=$e=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ma||(ma=!0,Kp($a,function(){return kn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=kt.transition,kt.transition=null;var i=ae;ae=1;var o=ee;ee|=4,cc.current=null,sg(e,n),Fp(n,e),Tx(Bi),_a=!!Ui,Bi=Ui=null,e.current=n,ng(n),R0(),ee=o,ae=i,kt.transition=l}else e.current=n;if(ma&&(ma=!1,hs=e,el=a),l=e.pendingLanes,l===0&&(Ns=null),$0(n.stateNode),dt(e,be()),s!==null)for(r=e.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Za)throw Za=!1,e=io,io=null,e;return el&1&&e.tag!==0&&kn(),l=e.pendingLanes,l&1?e===oo?pr++:(pr=0,oo=e):pr=0,Rs(),null}function kn(){if(hs!==null){var e=Cm(el),s=kt.transition,n=ae;try{if(kt.transition=null,ae=16>e?16:e,hs===null)var r=!1;else{if(e=hs,hs=null,el=0,ee&6)throw Error($(331));var a=ee;for(ee|=4,q=e.current;q!==null;){var l=q,i=l.child;if(q.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var m=o[c];for(q=m;q!==null;){var j=q;switch(j.tag){case 0:case 11:case 15:ur(8,j,l)}var y=j.child;if(y!==null)y.return=j,q=y;else for(;q!==null;){j=q;var h=j.sibling,v=j.return;if($p(j),j===m){q=null;break}if(h!==null){h.return=v,q=h;break}q=v}}}var g=l.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var f=p.sibling;p.sibling=null,p=f}while(p!==null)}}q=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,q=i;else e:for(;q!==null;){if(l=q,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ur(9,l,l.return)}var d=l.sibling;if(d!==null){d.return=l.return,q=d;break e}q=l.return}}var x=e.current;for(q=x;q!==null;){i=q;var u=i.child;if(i.subtreeFlags&2064&&u!==null)u.return=i,q=u;else e:for(i=x;q!==null;){if(o=q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:jl(9,o)}}catch(N){ve(o,o.return,N)}if(o===i){q=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,q=w;break e}q=o.return}}if(ee=a,Rs(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ml,e)}catch{}r=!0}return r}finally{ae=n,kt.transition=s}}return!1}function Vd(e,s,n){s=Pn(n,s),s=Cp(e,s,1),e=js(e,s,1),s=Ye(),e!==null&&(qr(e,1,s),dt(e,s))}function ve(e,s,n){if(e.tag===3)Vd(e,e,n);else for(;s!==null;){if(s.tag===3){Vd(s,e,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ns===null||!Ns.has(r))){e=Pn(n,e),e=Sp(s,e,1),s=js(s,e,1),e=Ye(),s!==null&&(qr(s,1,e),dt(s,e));break}}s=s.return}}function cg(e,s,n){var r=e.pingCache;r!==null&&r.delete(s),s=Ye(),e.pingedLanes|=e.suspendedLanes&n,$e===e&&(Fe&n)===n&&(Ae===4||Ae===3&&(Fe&130023424)===Fe&&500>be()-uc?Ws(e,0):dc|=n),dt(e,s)}function Vp(e,s){s===0&&(e.mode&1?(s=sa,sa<<=1,!(sa&130023424)&&(sa=4194304)):s=1);var n=Ye();e=as(e,s),e!==null&&(qr(e,s,n),dt(e,n))}function dg(e){var s=e.memoizedState,n=0;s!==null&&(n=s.retryLane),Vp(e,n)}function ug(e,s){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(s),Vp(e,n)}var Gp;Gp=function(e,s,n){if(e!==null)if(e.memoizedProps!==s.pendingProps||ot.current)it=!0;else{if(!(e.lanes&n)&&!(s.flags&128))return it=!1,Jx(e,s,n);it=!!(e.flags&131072)}else it=!1,he&&s.flags&1048576&&Xm(s,Wa,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;Ta(e,s),e=s.pendingProps;var a=Dn(s,We.current);bn(s,n),a=rc(null,s,r,e,a,n);var l=ac();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ct(r)?(l=!0,qa(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Zo(s),a.updater=vl,s.stateNode=a,a._reactInternals=s,Qi(s,r,e,n),s=Zi(null,s,r,!0,l,n)):(s.tag=0,he&&l&&Vo(s),Ge(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(Ta(e,s),e=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=pg(r),e=Mt(r,e),a){case 0:s=Ji(null,s,r,e,n);break e;case 1:s=$d(null,s,r,e,n);break e;case 11:s=Md(null,s,r,e,n);break e;case 14:s=Od(null,s,r,Mt(r.type,e),n);break e}throw Error($(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Mt(r,a),Ji(e,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Mt(r,a),$d(e,s,r,a,n);case 3:e:{if(Ap(s),e===null)throw Error($(387));r=s.pendingProps,l=s.memoizedState,a=l.element,np(e,s),Ka(s,r,null,n);var i=s.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=Pn(Error($(423)),s),s=Ld(e,s,r,n,a);break e}else if(r!==a){a=Pn(Error($(424)),s),s=Ld(e,s,r,n,a);break e}else for(ht=vs(s.stateNode.containerInfo.firstChild),xt=s,he=!0,$t=null,n=tp(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tn(),r===a){s=ls(e,s,n);break e}Ge(e,s,r,n)}s=s.child}return s;case 5:return rp(s),e===null&&Gi(s),r=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,zi(r,a)?i=null:l!==null&&zi(r,l)&&(s.flags|=32),Ip(e,s),Ge(e,s,i,n),s.child;case 6:return e===null&&Gi(s),null;case 13:return Pp(e,s,n);case 4:return ec(s,s.stateNode.containerInfo),r=s.pendingProps,e===null?s.child=In(s,null,r,n):Ge(e,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Mt(r,a),Md(e,s,r,a,n);case 7:return Ge(e,s,s.pendingProps,n),s.child;case 8:return Ge(e,s,s.pendingProps.children,n),s.child;case 12:return Ge(e,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,ie(Va,r._currentValue),r._currentValue=i,l!==null)if(Ut(l.value,i)){if(l.children===a.children&&!ot.current){s=ls(e,s,n);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=ss(-1,n&-n),c.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var j=m.pending;j===null?c.next=c:(c.next=j.next,j.next=c),m.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Ki(l.return,n,s),o.lanes|=n;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error($(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Ki(i,n,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Ge(e,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,bn(s,n),a=St(a),r=r(a),s.flags|=1,Ge(e,s,r,n),s.child;case 14:return r=s.type,a=Mt(r,s.pendingProps),a=Mt(r.type,a),Od(e,s,r,a,n);case 15:return Dp(e,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Mt(r,a),Ta(e,s),s.tag=1,ct(r)?(e=!0,qa(s)):e=!1,bn(s,n),kp(s,r,a),Qi(s,r,a,n),Zi(null,s,r,!0,e,n);case 19:return Ep(e,s,n);case 22:return Tp(e,s,n)}throw Error($(156,s.tag))};function Kp(e,s){return Nm(e,s)}function mg(e,s,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,s,n,r){return new mg(e,s,n,r)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pg(e){if(typeof e=="function")return xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mo)return 11;if(e===Oo)return 14}return 2}function bs(e,s){var n=e.alternate;return n===null?(n=wt(e.tag,s,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=s,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,s=e.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pa(e,s,n,r,a,l){var i=2;if(r=e,typeof e=="function")xc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case on:return Vs(n.children,a,l,s);case Ro:i=8,a|=8;break;case ji:return e=wt(12,n,s,a|2),e.elementType=ji,e.lanes=l,e;case Ni:return e=wt(13,n,s,a),e.elementType=Ni,e.lanes=l,e;case wi:return e=wt(19,n,s,a),e.elementType=wi,e.lanes=l,e;case rm:return wl(n,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sm:i=10;break e;case nm:i=9;break e;case Mo:i=11;break e;case Oo:i=14;break e;case cs:i=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return s=wt(i,n,s,a),s.elementType=e,s.type=r,s.lanes=l,s}function Vs(e,s,n,r){return e=wt(7,e,r,s),e.lanes=n,e}function wl(e,s,n,r){return e=wt(22,e,r,s),e.elementType=rm,e.lanes=n,e.stateNode={isHidden:!1},e}function ai(e,s,n){return e=wt(6,e,null,s),e.lanes=n,e}function li(e,s,n){return s=wt(4,e.children!==null?e.children:[],e.key,s),s.lanes=n,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function hg(e,s,n,r,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function gc(e,s,n,r,a,l,i,o,c){return e=new hg(e,s,n,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=wt(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zo(l),e}function xg(e,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ln,key:r==null?null:""+r,children:e,containerInfo:s,implementation:n}}function Yp(e){if(!e)return Ds;e=e._reactInternals;e:{if(tn(e)!==e||e.tag!==1)throw Error($(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ct(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(ct(n))return Ym(e,n,s)}return s}function Qp(e,s,n,r,a,l,i,o,c){return e=gc(n,r,!0,e,a,l,i,o,c),e.context=Yp(null),n=e.current,r=Ye(),a=ws(n),l=ss(r,a),l.callback=s??null,js(n,l,a),e.current.lanes=a,qr(e,a,r),dt(e,r),e}function bl(e,s,n,r){var a=s.current,l=Ye(),i=ws(a);return n=Yp(n),s.context===null?s.context=n:s.pendingContext=n,s=ss(l,i),s.payload={element:e},r=r===void 0?null:r,r!==null&&(s.callback=r),e=js(a,s,i),e!==null&&(Ft(e,a,i,l),Ca(e,a,i)),i}function sl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gd(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<s?n:s}}function fc(e,s){Gd(e,s),(e=e.alternate)&&Gd(e,s)}function gg(){return null}var Xp=typeof reportError=="function"?reportError:function(e){console.error(e)};function yc(e){this._internalRoot=e}kl.prototype.render=yc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error($(409));bl(e,s,null,null)};kl.prototype.unmount=yc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Xs(function(){bl(null,e,null,null)}),s[rs]=null}};function kl(e){this._internalRoot=e}kl.prototype.unstable_scheduleHydration=function(e){if(e){var s=Tm();e={blockedOn:null,target:e,priority:s};for(var n=0;n<us.length&&s!==0&&s<us[n].priority;n++);us.splice(n,0,e),n===0&&Am(e)}};function vc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kd(){}function fg(e,s,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var m=sl(i);l.call(m)}}var i=Qp(s,r,e,0,null,!1,!1,"",Kd);return e._reactRootContainer=i,e[rs]=i.current,Cr(e.nodeType===8?e.parentNode:e),Xs(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var m=sl(c);o.call(m)}}var c=gc(e,0,!1,null,null,!1,!1,"",Kd);return e._reactRootContainer=c,e[rs]=c.current,Cr(e.nodeType===8?e.parentNode:e),Xs(function(){bl(s,c,n,r)}),c}function Sl(e,s,n,r,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=sl(i);o.call(c)}}bl(s,i,e,a)}else i=fg(n,s,e,a,r);return sl(i)}Sm=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var n=sr(s.pendingLanes);n!==0&&(_o(s,n|1),dt(s,be()),!(ee&6)&&(En=be()+500,Rs()))}break;case 13:Xs(function(){var r=as(e,1);if(r!==null){var a=Ye();Ft(r,e,1,a)}}),fc(e,1)}};Fo=function(e){if(e.tag===13){var s=as(e,134217728);if(s!==null){var n=Ye();Ft(s,e,134217728,n)}fc(e,134217728)}};Dm=function(e){if(e.tag===13){var s=ws(e),n=as(e,s);if(n!==null){var r=Ye();Ft(n,e,s,r)}fc(e,s)}};Tm=function(){return ae};Im=function(e,s){var n=ae;try{return ae=e,s()}finally{ae=n}};Ei=function(e,s,n){switch(s){case"input":if(Ci(e,n),s=n.name,n.type==="radio"&&s!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==e&&r.form===e.form){var a=gl(r);if(!a)throw Error($(90));lm(r),Ci(r,a)}}}break;case"textarea":om(e,n);break;case"select":s=n.value,s!=null&&vn(e,!!n.multiple,s,!1)}};xm=mc;gm=Xs;var yg={usingClientEntryPoint:!1,Events:[Wr,mn,gl,pm,hm,mc]},Yn={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vg={bundleType:Yn.bundleType,version:Yn.version,rendererPackageName:Yn.rendererPackageName,rendererConfig:Yn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:is.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vm(e),e===null?null:e.stateNode},findFiberByHostInstance:Yn.findFiberByHostInstance||gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pa.isDisabled&&pa.supportsFiber)try{ml=pa.inject(vg),Wt=pa}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yg;ft.createPortal=function(e,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vc(s))throw Error($(200));return xg(e,s,null,n)};ft.createRoot=function(e,s){if(!vc(e))throw Error($(299));var n=!1,r="",a=Xp;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=gc(e,1,!1,null,null,n,!1,r,a),e[rs]=s.current,Cr(e.nodeType===8?e.parentNode:e),new yc(s)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=vm(s),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return Xs(e)};ft.hydrate=function(e,s,n){if(!Cl(s))throw Error($(200));return Sl(null,e,s,!0,n)};ft.hydrateRoot=function(e,s,n){if(!vc(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",i=Xp;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),s=Qp(s,null,e,1,n??null,a,!1,l,i),e[rs]=s.current,Cr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new kl(s)};ft.render=function(e,s,n){if(!Cl(s))throw Error($(200));return Sl(null,e,s,!1,n)};ft.unmountComponentAtNode=function(e){if(!Cl(e))throw Error($(40));return e._reactRootContainer?(Xs(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[rs]=null})}),!0):!1};ft.unstable_batchedUpdates=mc;ft.unstable_renderSubtreeIntoContainer=function(e,s,n,r){if(!Cl(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Sl(e,s,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function Jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jp)}catch(e){console.error(e)}}Jp(),Ju.exports=ft;var jg=Ju.exports,Yd=jg;yi.createRoot=Yd.createRoot,yi.hydrateRoot=Yd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mr.apply(this,arguments)}var xs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xs||(xs={}));const Qd="popstate";function Ng(e){e===void 0&&(e={});function s(r,a){let{pathname:l,search:i,hash:o}=r.location;return mo("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:nl(a)}return bg(s,n,null,e)}function je(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function jc(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function wg(){return Math.random().toString(36).substr(2,8)}function Xd(e,s){return{usr:e.state,key:e.key,idx:s}}function mo(e,s,n,r){return n===void 0&&(n=null),Mr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?_n(s):s,{state:n,key:s&&s.key||r||wg()})}function nl(e){let{pathname:s="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function _n(e){let s={};if(e){let n=e.indexOf("#");n>=0&&(s.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(s.search=e.substr(r),e=e.substr(0,r)),e&&(s.pathname=e)}return s}function bg(e,s,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,i=a.history,o=xs.Pop,c=null,m=j();m==null&&(m=0,i.replaceState(Mr({},i.state,{idx:m}),""));function j(){return(i.state||{idx:null}).idx}function y(){o=xs.Pop;let f=j(),d=f==null?null:f-m;m=f,c&&c({action:o,location:p.location,delta:d})}function h(f,d){o=xs.Push;let x=mo(p.location,f,d);m=j()+1;let u=Xd(x,m),w=p.createHref(x);try{i.pushState(u,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(w)}l&&c&&c({action:o,location:p.location,delta:1})}function v(f,d){o=xs.Replace;let x=mo(p.location,f,d);m=j();let u=Xd(x,m),w=p.createHref(x);i.replaceState(u,"",w),l&&c&&c({action:o,location:p.location,delta:0})}function g(f){let d=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof f=="string"?f:nl(f);return x=x.replace(/ $/,"%20"),je(d,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,d)}let p={get action(){return o},get location(){return e(a,i)},listen(f){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Qd,y),c=f,()=>{a.removeEventListener(Qd,y),c=null}},createHref(f){return s(a,f)},createURL:g,encodeLocation(f){let d=g(f);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:h,replace:v,go(f){return i.go(f)}};return p}var Jd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Jd||(Jd={}));function kg(e,s,n){return n===void 0&&(n="/"),Cg(e,s,n)}function Cg(e,s,n,r){let a=typeof s=="string"?_n(s):s,l=Rn(a.pathname||"/",n);if(l==null)return null;let i=Zp(e);Sg(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let m=Lg(l);o=Og(i[c],m)}return o}function Zp(e,s,n,r){s===void 0&&(s=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let m=ks([r,c.relativePath]),j=n.concat(c);l.children&&l.children.length>0&&(je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Zp(l.children,s,j,m)),!(l.path==null&&!l.index)&&s.push({path:m,score:Rg(m,l.index),routesMeta:j})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of eh(l.path))a(l,i,c)}),s}function eh(e){let s=e.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let i=eh(r.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Sg(e){e.sort((s,n)=>s.score!==n.score?n.score-s.score:Mg(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Dg=/^:[\w-]+$/,Tg=3,Ig=2,Ag=1,Pg=10,Eg=-2,Zd=e=>e==="*";function Rg(e,s){let n=e.split("/"),r=n.length;return n.some(Zd)&&(r+=Eg),s&&(r+=Ig),n.filter(a=>!Zd(a)).reduce((a,l)=>a+(Dg.test(l)?Tg:l===""?Ag:Pg),r)}function Mg(e,s){return e.length===s.length&&e.slice(0,-1).every((r,a)=>r===s[a])?e[e.length-1]-s[s.length-1]:0}function Og(e,s,n){let{routesMeta:r}=e,a={},l="/",i=[];for(let o=0;o<r.length;++o){let c=r[o],m=o===r.length-1,j=l==="/"?s:s.slice(l.length)||"/",y=po({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},j),h=c.route;if(!y)return null;Object.assign(a,y.params),i.push({params:a,pathname:ks([l,y.pathname]),pathnameBase:zg(ks([l,y.pathnameBase])),route:h}),y.pathnameBase!=="/"&&(l=ks([l,y.pathnameBase]))}return i}function po(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$g(e.path,e.caseSensitive,e.end),a=s.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((m,j,y)=>{let{paramName:h,isOptional:v}=j;if(h==="*"){let p=o[y]||"";i=l.slice(0,l.length-p.length).replace(/(.)\/+$/,"$1")}const g=o[y];return v&&!g?m[h]=void 0:m[h]=(g||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:i,pattern:e}}function $g(e,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),jc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function Lg(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return jc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function Rn(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const _g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fg=e=>_g.test(e);function Ug(e,s){s===void 0&&(s="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?_n(e):e,l;if(n)if(Fg(n))l=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),jc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?l=eu(n.substring(1),"/"):l=eu(n,s)}else l=s;return{pathname:l,search:qg(r),hash:Hg(a)}}function eu(e,s){let n=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ii(e,s,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bg(e){return e.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function th(e,s){let n=Bg(e);return s?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sh(e,s,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=_n(e):(a=Mr({},e),je(!a.pathname||!a.pathname.includes("?"),ii("?","pathname","search",a)),je(!a.pathname||!a.pathname.includes("#"),ii("#","pathname","hash",a)),je(!a.search||!a.search.includes("#"),ii("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=n;else{let y=s.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),y-=1;a.pathname=h.join("/")}o=y>=0?s[y]:"/"}let c=Ug(a,o),m=i&&i!=="/"&&i.endsWith("/"),j=(l||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(m||j)&&(c.pathname+="/"),c}const ks=e=>e.join("/").replace(/\/\/+/g,"/"),zg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Hg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Wg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nh=["post","put","patch","delete"];new Set(nh);const Vg=["get",...nh];new Set(Vg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Or.apply(this,arguments)}const Dl=b.createContext(null),rh=b.createContext(null),Ms=b.createContext(null),Tl=b.createContext(null),Os=b.createContext({outlet:null,matches:[],isDataRoute:!1}),ah=b.createContext(null);function Gg(e,s){let{relative:n}=s===void 0?{}:s;Gr()||je(!1);let{basename:r,navigator:a}=b.useContext(Ms),{hash:l,pathname:i,search:o}=Il(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:ks([r,i])),a.createHref({pathname:c,search:o,hash:l})}function Gr(){return b.useContext(Tl)!=null}function $s(){return Gr()||je(!1),b.useContext(Tl).location}function lh(e){b.useContext(Ms).static||b.useLayoutEffect(e)}function Ve(){let{isDataRoute:e}=b.useContext(Os);return e?lf():Kg()}function Kg(){Gr()||je(!1);let e=b.useContext(Dl),{basename:s,future:n,navigator:r}=b.useContext(Ms),{matches:a}=b.useContext(Os),{pathname:l}=$s(),i=JSON.stringify(th(a,n.v7_relativeSplatPath)),o=b.useRef(!1);return lh(()=>{o.current=!0}),b.useCallback(function(m,j){if(j===void 0&&(j={}),!o.current)return;if(typeof m=="number"){r.go(m);return}let y=sh(m,JSON.parse(i),l,j.relative==="path");e==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:ks([s,y.pathname])),(j.replace?r.replace:r.push)(y,j.state,j)},[s,r,i,l,e])}function Nc(){let{matches:e}=b.useContext(Os),s=e[e.length-1];return s?s.params:{}}function Il(e,s){let{relative:n}=s===void 0?{}:s,{future:r}=b.useContext(Ms),{matches:a}=b.useContext(Os),{pathname:l}=$s(),i=JSON.stringify(th(a,r.v7_relativeSplatPath));return b.useMemo(()=>sh(e,JSON.parse(i),l,n==="path"),[e,i,l,n])}function Yg(e,s){return Qg(e,s)}function Qg(e,s,n,r){Gr()||je(!1);let{navigator:a}=b.useContext(Ms),{matches:l}=b.useContext(Os),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let m=$s(),j;if(s){var y;let f=typeof s=="string"?_n(s):s;c==="/"||(y=f.pathname)!=null&&y.startsWith(c)||je(!1),j=f}else j=m;let h=j.pathname||"/",v=h;if(c!=="/"){let f=c.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(f.length).join("/")}let g=kg(e,{pathname:v}),p=tf(g&&g.map(f=>Object.assign({},f,{params:Object.assign({},o,f.params),pathname:ks([c,a.encodeLocation?a.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?c:ks([c,a.encodeLocation?a.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),l,n,r);return s&&p?b.createElement(Tl.Provider,{value:{location:Or({pathname:"/",search:"",hash:"",state:null,key:"default"},j),navigationType:xs.Pop}},p):p}function Xg(){let e=af(),s=Wg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),n?b.createElement("pre",{style:a},n):null,null)}const Jg=b.createElement(Xg,null);class Zg extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?b.createElement(Os.Provider,{value:this.props.routeContext},b.createElement(ah.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ef(e){let{routeContext:s,match:n,children:r}=e,a=b.useContext(Dl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Os.Provider,{value:s},r)}function tf(e,s,n,r){var a;if(s===void 0&&(s=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=(a=n)==null?void 0:a.errors;if(o!=null){let j=i.findIndex(y=>y.route.id&&(o==null?void 0:o[y.route.id])!==void 0);j>=0||je(!1),i=i.slice(0,Math.min(i.length,j+1))}let c=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let j=0;j<i.length;j++){let y=i[j];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=j),y.route.id){let{loaderData:h,errors:v}=n,g=y.route.loader&&h[y.route.id]===void 0&&(!v||v[y.route.id]===void 0);if(y.route.lazy||g){c=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((j,y,h)=>{let v,g=!1,p=null,f=null;n&&(v=o&&y.route.id?o[y.route.id]:void 0,p=y.route.errorElement||Jg,c&&(m<0&&h===0?(of("route-fallback"),g=!0,f=null):m===h&&(g=!0,f=y.route.hydrateFallbackElement||null)));let d=s.concat(i.slice(0,h+1)),x=()=>{let u;return v?u=p:g?u=f:y.route.Component?u=b.createElement(y.route.Component,null):y.route.element?u=y.route.element:u=j,b.createElement(ef,{match:y,routeContext:{outlet:j,matches:d,isDataRoute:n!=null},children:u})};return n&&(y.route.ErrorBoundary||y.route.errorElement||h===0)?b.createElement(Zg,{location:n.location,revalidation:n.revalidation,component:p,error:v,children:x(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):x()},null)}var ih=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ih||{}),oh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oh||{});function sf(e){let s=b.useContext(Dl);return s||je(!1),s}function nf(e){let s=b.useContext(rh);return s||je(!1),s}function rf(e){let s=b.useContext(Os);return s||je(!1),s}function ch(e){let s=rf(),n=s.matches[s.matches.length-1];return n.route.id||je(!1),n.route.id}function af(){var e;let s=b.useContext(ah),n=nf(),r=ch();return s!==void 0?s:(e=n.errors)==null?void 0:e[r]}function lf(){let{router:e}=sf(ih.UseNavigateStable),s=ch(oh.UseNavigateStable),n=b.useRef(!1);return lh(()=>{n.current=!0}),b.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Or({fromRouteId:s},l)))},[e,s])}const tu={};function of(e,s,n){tu[e]||(tu[e]=!0)}function cf(e,s){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function at(e){je(!1)}function df(e){let{basename:s="/",children:n=null,location:r,navigationType:a=xs.Pop,navigator:l,static:i=!1,future:o}=e;Gr()&&je(!1);let c=s.replace(/^\/*/,"/"),m=b.useMemo(()=>({basename:c,navigator:l,static:i,future:Or({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof r=="string"&&(r=_n(r));let{pathname:j="/",search:y="",hash:h="",state:v=null,key:g="default"}=r,p=b.useMemo(()=>{let f=Rn(j,c);return f==null?null:{location:{pathname:f,search:y,hash:h,state:v,key:g},navigationType:a}},[c,j,y,h,v,g,a]);return p==null?null:b.createElement(Ms.Provider,{value:m},b.createElement(Tl.Provider,{children:n,value:p}))}function uf(e){let{children:s,location:n}=e;return Yg(ho(s),n)}new Promise(()=>{});function ho(e,s){s===void 0&&(s=[]);let n=[];return b.Children.forEach(e,(r,a)=>{if(!b.isValidElement(r))return;let l=[...s,a];if(r.type===b.Fragment){n.push.apply(n,ho(r.props.children,l));return}r.type!==at&&je(!1),!r.props.index||!r.props.children||je(!1);let i={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=ho(r.props.children,l)),n.push(i)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rl.apply(this,arguments)}function dh(e,s){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(s.indexOf(a)>=0)&&(n[a]=e[a]);return n}function mf(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pf(e,s){return e.button===0&&(!s||s==="_self")&&!mf(e)}function xo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,n)=>{let r=e[n];return s.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function hf(e,s){let n=xo(e);return s&&s.forEach((r,a)=>{n.has(a)||s.getAll(a).forEach(l=>{n.append(a,l)})}),n}const xf=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gf=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ff="6";try{window.__reactRouterVersion=ff}catch{}const yf=b.createContext({isTransitioning:!1}),vf="startTransition",su=c0[vf];function jf(e){let{basename:s,children:n,future:r,window:a}=e,l=b.useRef();l.current==null&&(l.current=Ng({window:a,v5Compat:!0}));let i=l.current,[o,c]=b.useState({action:i.action,location:i.location}),{v7_startTransition:m}=r||{},j=b.useCallback(y=>{m&&su?su(()=>c(y)):c(y)},[c,m]);return b.useLayoutEffect(()=>i.listen(j),[i,j]),b.useEffect(()=>cf(r),[r]),b.createElement(df,{basename:s,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const Nf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wc=b.forwardRef(function(s,n){let{onClick:r,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:m,preventScrollReset:j,viewTransition:y}=s,h=dh(s,xf),{basename:v}=b.useContext(Ms),g,p=!1;if(typeof m=="string"&&wf.test(m)&&(g=m,Nf))try{let u=new URL(window.location.href),w=m.startsWith("//")?new URL(u.protocol+m):new URL(m),N=Rn(w.pathname,v);w.origin===u.origin&&N!=null?m=N+w.search+w.hash:p=!0}catch{}let f=Gg(m,{relative:a}),d=kf(m,{replace:i,state:o,target:c,preventScrollReset:j,relative:a,viewTransition:y});function x(u){r&&r(u),u.defaultPrevented||d(u)}return b.createElement("a",rl({},h,{href:g||f,onClick:p||l?r:x,ref:n,target:c}))}),Qn=b.forwardRef(function(s,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:m,children:j}=s,y=dh(s,gf),h=Il(c,{relative:y.relative}),v=$s(),g=b.useContext(rh),{navigator:p,basename:f}=b.useContext(Ms),d=g!=null&&Cf(h)&&m===!0,x=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,u=v.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(u=u.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&f&&(w=Rn(w,f)||w);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=u===x||!i&&u.startsWith(x)&&u.charAt(N)==="/",k=w!=null&&(w===x||!i&&w.startsWith(x)&&w.charAt(x.length)==="/"),I={isActive:C,isPending:k,isTransitioning:d},z=C?r:void 0,_;typeof l=="function"?_=l(I):_=[l,C?"active":null,k?"pending":null,d?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(I):o;return b.createElement(wc,rl({},y,{"aria-current":z,className:_,ref:n,style:D,to:c,viewTransition:m}),typeof j=="function"?j(I):j)});var go;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(go||(go={}));var nu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(nu||(nu={}));function bf(e){let s=b.useContext(Dl);return s||je(!1),s}function kf(e,s){let{target:n,replace:r,state:a,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,c=Ve(),m=$s(),j=Il(e,{relative:i});return b.useCallback(y=>{if(pf(y,n)){y.preventDefault();let h=r!==void 0?r:nl(m)===nl(j);c(e,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[m,c,j,r,a,n,e,l,i,o])}function bc(e){let s=b.useRef(xo(e)),n=b.useRef(!1),r=$s(),a=b.useMemo(()=>hf(r.search,n.current?null:s.current),[r.search]),l=Ve(),i=b.useCallback((o,c)=>{const m=xo(typeof o=="function"?o(a):o);n.current=!0,l("?"+m,c)},[l,a]);return[a,i]}function Cf(e,s){s===void 0&&(s={});let n=b.useContext(yf);n==null&&je(!1);let{basename:r}=bf(go.useViewTransitionState),a=Il(e,{relative:s.relative});if(!n.isTransitioning)return!1;let l=Rn(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Rn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return po(a.pathname,i)!=null||po(a.pathname,l)!=null}const Sf=new Date,Et=(e,s)=>{const n={hasPrimaryContact:!0,hasSchedule:!1,isConfirmed:!1,hasDevice:!1,hasCrew:!1,hasBlockers:!1,...s};return[{id:`ready-${e}-1`,label:"Customer contact confirmed",completed:n.hasPrimaryContact,critical:!0},{id:`ready-${e}-2`,label:"Install date scheduled",completed:n.hasSchedule,critical:!0},{id:`ready-${e}-3`,label:"Customer confirmed install date",completed:n.isConfirmed,critical:!0},{id:`ready-${e}-4`,label:"Building access instructions available",completed:!1},{id:`ready-${e}-5`,label:"Device assigned",completed:n.hasDevice},{id:`ready-${e}-6`,label:"Install crew assigned",completed:n.hasCrew},{id:`ready-${e}-7`,label:"No active blockers",completed:!n.hasBlockers,critical:!0},{id:`ready-${e}-8`,label:"FOC date confirmed",completed:!0}]},S=e=>{const s=new Date(Sf);return s.setDate(s.getDate()+e),s.toISOString()},Xn={"proj-001":[{id:"note-001-1",content:"Customer prefers morning installations. Has meetings after 2pm.",author:"Sarah Chen",createdAt:S(-1),isPinned:!0}],"proj-002":[{id:"note-002-1",content:"Building super is John - very helpful. Call him directly for access.",author:"Sarah Chen",createdAt:S(-2),isPinned:!0},{id:"note-002-2",content:"Customer mentioned they may add a second location next quarter.",author:"Sarah Chen",createdAt:S(-1)}],"proj-003":[{id:"note-003-1",content:"ABC Contractors has done 3 jobs here before - they know the building well.",author:"Alex Chen",createdAt:S(-3)}],"proj-005":[{id:"note-005-1",content:"CTO David Park is very technical - send detailed updates.",author:"Alex Chen",createdAt:S(-8),isPinned:!0},{id:"note-005-2",content:"They want to schedule their own BGP config after we complete physical install.",author:"Alex Chen",createdAt:S(-5)}]},Jn={"proj-001":[{id:"act-001-1",projectId:"proj-001",type:"created",description:"Project created from sales handoff",author:"System",createdAt:S(-1)},{id:"act-001-2",projectId:"proj-001",type:"assignee_changed",description:"Assigned to Sarah Chen",author:"System",createdAt:S(-1)},{id:"act-001-3",projectId:"proj-001",type:"email_sent",description:"Sent welcome email to customer",author:"Sarah Chen",createdAt:S(-1)}],"proj-002":[{id:"act-002-1",projectId:"proj-002",type:"created",description:"Project created from sales handoff",author:"System",createdAt:S(-3)},{id:"act-002-2",projectId:"proj-002",type:"status_change",description:"Status changed from New to Reviewing",author:"Sarah Chen",createdAt:S(-2)},{id:"act-002-3",projectId:"proj-002",type:"task_completed",description:"Completed: Check sales order email for details",author:"Sarah Chen",createdAt:S(-2)},{id:"act-002-4",projectId:"proj-002",type:"schedule_set",description:"Installation scheduled for after-hours slot",author:"Sarah Chen",createdAt:S(-1)}],"proj-004":[{id:"act-004-1",projectId:"proj-004",type:"created",description:"Project created from sales handoff",author:"System",createdAt:S(-7)},{id:"act-004-2",projectId:"proj-004",type:"status_change",description:"Status changed from New to Reviewing",author:"Maria Santos",createdAt:S(-6)},{id:"act-004-3",projectId:"proj-004",type:"status_change",description:"Status changed from Reviewing to Scheduled",author:"Maria Santos",createdAt:S(-4)},{id:"act-004-4",projectId:"proj-004",type:"email_sent",description:"Sent installation confirmation email",author:"Maria Santos",createdAt:S(-3)},{id:"act-004-5",projectId:"proj-004",type:"status_change",description:"Status changed from Scheduled to Confirmed",author:"Maria Santos",createdAt:S(-2)},{id:"act-004-6",projectId:"proj-004",type:"email_sent",description:"Sent 1-day reminder email",author:"Maria Santos",createdAt:S(0)}],"proj-005":[{id:"act-005-1",projectId:"proj-005",type:"created",description:"Project created from sales handoff",author:"System",createdAt:S(-10)},{id:"act-005-2",projectId:"proj-005",type:"status_change",description:"Status changed from New to Reviewing",author:"Alex Chen",createdAt:S(-9)},{id:"act-005-3",projectId:"proj-005",type:"note_added",description:"Added internal note about customer preferences",author:"Alex Chen",createdAt:S(-8)},{id:"act-005-4",projectId:"proj-005",type:"status_change",description:"Status changed from Reviewing to Scheduled",author:"Alex Chen",createdAt:S(-5)},{id:"act-005-5",projectId:"proj-005",type:"status_change",description:"Status changed from Scheduled to Confirmed",author:"Alex Chen",createdAt:S(-2)},{id:"act-005-6",projectId:"proj-005",type:"status_change",description:"Status changed from Confirmed to Installing",author:"Alex Chen",createdAt:S(0)}]},Zn={"proj-001":[{id:"comm-001-1",type:"call",direction:"outbound",contactName:"John Smith",summary:"Intro call - discussed installation timeline",notes:"Customer prefers morning installations. Available Mon-Wed next week.",duration:15,followUpRequired:!1,author:"Sarah Chen",createdAt:S(-1)}],"proj-002":[{id:"comm-002-1",type:"email",direction:"outbound",contactName:"Sarah Johnson",summary:"Sent after-hours scheduling options",followUpRequired:!0,followUpDate:S(2),author:"Sarah Chen",createdAt:S(-2)},{id:"comm-002-2",type:"call",direction:"inbound",contactName:"Sarah Johnson",summary:"Customer confirmed after-hours preference",notes:"Preferred slot is 6pm. Will have building super available.",duration:8,followUpRequired:!1,author:"Sarah Chen",createdAt:S(-1)}],"proj-004":[{id:"comm-004-1",type:"call",direction:"outbound",contactName:"Amanda Torres",summary:"Installation confirmation call",notes:"Confirmed install date and access instructions. Customer will meet installer at lobby.",duration:10,followUpRequired:!1,author:"Maria Santos",createdAt:S(-2)},{id:"comm-004-2",type:"email",direction:"outbound",contactName:"Amanda Torres",summary:"Sent 1-day reminder with installer details",followUpRequired:!1,author:"Maria Santos",createdAt:S(0)}],"proj-005":[{id:"comm-005-1",type:"meeting",direction:"outbound",contactName:"David Park",summary:"On-site survey walkthrough",notes:"Reviewed fiber path with customer CTO. Identified optimal demarc location in server room.",duration:45,followUpRequired:!1,author:"Alex Chen",createdAt:S(-8)},{id:"comm-005-2",type:"call",direction:"outbound",contactName:"Nina Patel",summary:"Technical discussion - BGP configuration",notes:"Customer network admin confirmed ASN and prefix list. Will send config template.",duration:25,followUpRequired:!0,followUpDate:S(1),author:"Alex Chen",createdAt:S(-5)},{id:"comm-005-3",type:"email",direction:"outbound",contactName:"David Park",summary:"Installation day confirmation",followUpRequired:!1,author:"Alex Chen",createdAt:S(-1)}]},nn={"proj-002":[{id:"block-002-1",type:"waiting_internal",description:"Waiting for after-hours approval from Operations Manager",createdAt:S(-2),createdBy:"Sarah Chen"}],"proj-007":[{id:"block-007-1",type:"waiting_customer",description:"Waiting for customer to provide LOA",createdAt:S(-1),createdBy:"Alex Chen"}]},ru=[{id:"proj-001",projectType:"standard-on-net",customerId:"cust-001",buildingId:"bldg-001",serviceOrderId:"so-001",status:"new",priority:"high",handoffDate:S(-1),handoffEmailId:"email-001",salesRep:"Mike Reynolds",cxAssignee:"Sarah Chen",focDate:S(8),product:"Dedicated Internet",ipType:"static",serviceBandwidth:"1 Gbps",numStaticIps:5,mrc:999,nrc:0,buildingOnNet:!0,buildingType:"commercial",buildingIspNotes:"Panel on floor 2, room 2B. Contact building ops for access.",quotedLeadTime:10,device:"Pilot XGS-2000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-001",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!1,serviceType:"1 Gig Dedicated",staticIp:!0,customerOwnRouter:!1,isWholesale:!1,thirdPartyItContact:{company:"TechSupport Solutions",name:"Kevin Martinez",email:"kmartinez@techsupportsolutions.com",phone:"(212) 555-0301"},tasks:[{id:"task-001-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!1,assignee:"Sarah Chen",dueDate:S(0)},{id:"task-001-2",title:"Confirm building access requirements",section:"Sales Hand Off",completed:!1,assignee:"Sarah Chen",dueDate:S(1)},{id:"task-001-3",title:"Verify port availability",section:"Sales Hand Off",completed:!1,assignee:"Marcus Johnson",dueDate:S(2)},{id:"task-001-4",title:"Send customer welcome email with install scheduling options",section:"Scheduling",completed:!1,assignee:"Sarah Chen",dueDate:S(3)},{id:"task-001-5",title:"Create network provisioning ticket",section:"Network Provisioning",completed:!1,assignee:"Network Ops",dueDate:S(4)}],readinessTasks:Et("proj-001",{hasDevice:!0}),approvals:[],slaDeadline:S(1),lastCustomerContact:S(-1),internalNotes:Xn["proj-001"]||[],activityLog:Jn["proj-001"]||[],communicationLog:Zn["proj-001"]||[],blockers:nn["proj-001"]||[],isEscalated:!1,projectGroupId:"group-003",createdAt:S(-1),updatedAt:S(-1)},{id:"proj-002",projectType:"after-hours",customerId:"cust-002",buildingId:"bldg-002",serviceOrderId:"so-002",status:"reviewing",priority:"normal",handoffDate:S(-3),handoffEmailId:"email-002",salesRep:"Jennifer Lee",cxAssignee:"Sarah Chen",focDate:S(9),product:"Dedicated Internet",ipType:"dynamic",serviceBandwidth:"500 Mbps",mrc:499,nrc:0,buildingOnNet:!0,buildingType:"commercial",buildingIspNotes:"Strict after-hours policy. No exceptions.",quotedLeadTime:14,device:"Pilot GPON-1000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-002",surveyRequired:!1,afterHoursRequired:!0,riserDiagramRequired:!1,serviceType:"500 Mbps Dedicated",staticIp:!1,customerOwnRouter:!0,scheduledDate:S(5),scheduledSlot:"after-hours",tasks:[{id:"task-002-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0,assignee:"Sarah Chen"},{id:"task-002-2",title:"Check building after-hours requirements",section:"Sales Hand Off",completed:!0,assignee:"Sarah Chen"},{id:"task-002-3",title:"Get after-hours approval from Operations Manager",section:"After Hours Process",completed:!1,assignee:"Emily Rodriguez",dueDate:S(-1)},{id:"task-002-4",title:"Submit after-hours access request to building",section:"After Hours Process",completed:!1,assignee:"Sarah Chen",dueDate:S(0)},{id:"task-002-5",title:"Confirm after-hours scheduling with customer",section:"After Hours Process",completed:!1,assignee:"Sarah Chen",dueDate:S(2)},{id:"task-002-6",title:"Verify port availability",section:"Network Provisioning",completed:!1,assignee:"David Kim",dueDate:S(3)}],readinessTasks:Et("proj-002",{hasSchedule:!0,hasDevice:!0,hasBlockers:!0}),approvals:[{id:"appr-002-1",requirementId:"ah-appr-1",status:"pending"}],slaDeadline:S(2),lastCustomerContact:S(-2),internalNotes:Xn["proj-002"]||[],activityLog:Jn["proj-002"]||[],communicationLog:Zn["proj-002"]||[],blockers:nn["proj-002"]||[],isEscalated:!1,isWholesale:!1,createdAt:S(-3),updatedAt:S(0)},{id:"proj-003",projectType:"contract-labor",customerId:"cust-003",buildingId:"bldg-003",serviceOrderId:"so-003",status:"scheduled",priority:"normal",handoffDate:S(-5),handoffEmailId:"email-003",salesRep:"Mike Reynolds",cxAssignee:"Alex Chen",focDate:S(5),product:"Dedicated Internet",ipType:"static",serviceBandwidth:"1 Gbps",numStaticIps:5,mrc:999,nrc:500,buildingOnNet:!0,buildingType:"commercial",buildingIspNotes:"Panel capacity limited. Check before scheduling.",quotedLeadTime:14,device:"Pilot XGS-2000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-003",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!0,serviceType:"1 Gig Dedicated",staticIp:!0,customerOwnRouter:!1,scheduledDate:S(3),scheduledSlot:"early-7",assignedCrew:"ABC Contractors",contractLaborVendor:"ABC Contractors Inc.",contractorContact:{company:"ABC Contractors Inc.",name:"Tony Rivera",email:"trivera@abccontractors.com",phone:"(917) 555-0201"},tasks:[{id:"task-003-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0},{id:"task-003-2",title:"Check building access requirements",section:"Sales Hand Off",completed:!0},{id:"task-003-3",title:"Request riser diagram from building",section:"Survey Required",completed:!0},{id:"task-003-4",title:"Request contractor quote",section:"Contract Labor",completed:!0,assignee:"Operations"},{id:"task-003-5",title:"Get contractor cost approval",section:"Contract Labor",completed:!0,assignee:"Manager"},{id:"task-003-6",title:"Schedule contractor for install",section:"Contract Labor",completed:!0},{id:"task-003-7",title:"Create network provisioning ticket",section:"Network Provisioning",completed:!0,assignee:"Network Ops"},{id:"task-003-8",title:"Assign IP address",section:"Network Provisioning",completed:!1,assignee:"Network Ops"}],readinessTasks:Et("proj-003",{hasSchedule:!0,hasDevice:!0,hasCrew:!0}),approvals:[{id:"appr-003-1",requirementId:"cl-appr-1",status:"approved",approvedBy:"Sarah Manager",approvedAt:S(-2)}],slaDeadline:S(5),lastCustomerContact:S(-1),internalNotes:Xn["proj-003"]||[],activityLog:Jn["proj-003"]||[],communicationLog:Zn["proj-003"]||[],blockers:nn["proj-003"]||[],isEscalated:!1,isWholesale:!1,createdAt:S(-5),updatedAt:S(-1)},{id:"proj-004",projectType:"standard-on-net",customerId:"cust-004",buildingId:"bldg-004",serviceOrderId:"so-004",status:"confirmed",priority:"normal",handoffDate:S(-7),handoffEmailId:"email-004",salesRep:"Jennifer Lee",cxAssignee:"Maria Santos",focDate:S(1),product:"Dedicated Internet",ipType:"dynamic",serviceBandwidth:"250 Mbps",mrc:299,nrc:0,buildingOnNet:!0,buildingType:"commercial",quotedLeadTime:10,device:"Pilot XGS-2000",eeroRequired:!0,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-004",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!1,serviceType:"250 Mbps Dedicated",staticIp:!1,customerOwnRouter:!1,scheduledDate:S(1),scheduledSlot:"morning-9",assignedCrew:"Team Beta",tasks:[{id:"task-004-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0},{id:"task-004-2",title:"Check building access requirements",section:"Sales Hand Off",completed:!0},{id:"task-004-3",title:"Verify port availability",section:"Sales Hand Off",completed:!0},{id:"task-004-4",title:"Send customer welcome email",section:"Scheduling",completed:!0},{id:"task-004-5",title:"Confirm install date with customer",section:"Scheduling",completed:!0},{id:"task-004-6",title:"Create network provisioning ticket",section:"Network Provisioning",completed:!0,assignee:"Network Ops"},{id:"task-004-7",title:"Assign IP address",section:"Network Provisioning",completed:!0,assignee:"Network Ops"},{id:"task-004-8",title:"Dispatch crew for install",section:"Installation",completed:!0}],readinessTasks:Et("proj-004",{hasSchedule:!0,isConfirmed:!0,hasDevice:!0,hasCrew:!0}),approvals:[],slaDeadline:S(3),lastCustomerContact:S(0),internalNotes:Xn["proj-004"]||[],activityLog:Jn["proj-004"]||[],communicationLog:Zn["proj-004"]||[],blockers:nn["proj-004"]||[],isEscalated:!1,isWholesale:!1,createdAt:S(-7),updatedAt:S(0)},{id:"proj-005",projectType:"dark-fiber",customerId:"cust-005",buildingId:"bldg-005",serviceOrderId:"so-005",status:"installing",priority:"urgent",handoffDate:S(-10),handoffEmailId:"email-005",salesRep:"Mike Reynolds",cxAssignee:"Alex Chen",focDate:S(0),product:"Dark Fiber",ipType:"bgp",serviceBandwidth:"10 Gbps",numStaticIps:16,mrc:4999,nrc:15e3,buildingOnNet:!0,buildingType:"commercial",quotedLeadTime:45,device:"Customer Provided",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-005",surveyRequired:!0,surveyDate:S(-8),afterHoursRequired:!1,riserDiagramRequired:!0,serviceType:"10 Gig Dedicated",staticIp:!0,customerOwnRouter:!0,scheduledDate:S(0),scheduledSlot:"all-day",assignedCrew:"Team Alpha",engineeringNotes:"Fiber path verified. 12-strand splice at MH-47. OTDR test required post-splice.",tasks:[{id:"task-005-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0},{id:"task-005-2",title:"Review building survey requirements",section:"Survey Required",completed:!0},{id:"task-005-3",title:"Schedule on-site survey",section:"Survey Required",completed:!0},{id:"task-005-4",title:"Complete survey and generate SOW",section:"Survey Required",completed:!0},{id:"task-005-5",title:"Get customer SOW approval",section:"Survey Required",completed:!0},{id:"task-005-6",title:"Engineering fiber path review",section:"Engineering",completed:!0,assignee:"Engineering"},{id:"task-005-7",title:"Create splice plan",section:"Engineering",completed:!0,assignee:"Engineering"},{id:"task-005-8",title:"Engineering approval",section:"Engineering",completed:!0,assignee:"Engineering Manager"},{id:"task-005-9",title:"Schedule fiber splicing",section:"Installation",completed:!0},{id:"task-005-10",title:"Complete A-side termination",section:"Installation",completed:!0},{id:"task-005-11",title:"Complete Z-side termination",section:"Installation",completed:!1},{id:"task-005-12",title:"OTDR testing",section:"Installation",completed:!1,assignee:"Engineering"}],readinessTasks:Et("proj-005",{hasSchedule:!0,isConfirmed:!0,hasDevice:!0,hasCrew:!0}),approvals:[{id:"appr-005-1",requirementId:"df-appr-1",status:"approved",approvedBy:"Tom Engineer",approvedAt:S(-5)},{id:"appr-005-2",requirementId:"df-appr-2",status:"pending"}],slaDeadline:S(0),lastCustomerContact:S(-1),internalNotes:Xn["proj-005"]||[],activityLog:Jn["proj-005"]||[],communicationLog:Zn["proj-005"]||[],blockers:nn["proj-005"]||[],isEscalated:!0,escalatedAt:S(-1),escalatedBy:"Alex Chen",escalationReason:"FOC date is today - need immediate attention on OTDR testing",isWholesale:!1,projectGroupId:"group-001",createdAt:S(-10),updatedAt:S(0)},{id:"proj-006",projectType:"wavelength",customerId:"cust-006",buildingId:"bldg-006",serviceOrderId:"so-006",status:"completed",priority:"normal",handoffDate:S(-45),handoffEmailId:"email-006",salesRep:"Jennifer Lee",cxAssignee:"Maria Santos",focDate:S(-3),product:"Wavelength",ipType:"bgp",serviceBandwidth:"100 Gbps",mrc:12999,nrc:25e3,buildingOnNet:!0,buildingType:"data-center",quotedLeadTime:60,device:"Ciena 6500 Transponder",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-006",surveyRequired:!0,surveyDate:S(-40),sowApproved:!0,sowUrl:"https://docs.pilotfiber.com/sow/006",afterHoursRequired:!1,riserDiagramRequired:!0,serviceType:"100G Wavelength",staticIp:!0,customerOwnRouter:!1,scheduledDate:S(-3),scheduledSlot:"morning-11",assignedCrew:"Team Beta",engineeringNotes:"DWDM channel 34. Transponders: Ciena 6500.",specialEquipment:["Ciena 6500 Transponder (x2)","LC/UPC patch cables (x4)"],tasks:[{id:"task-006-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0},{id:"task-006-2",title:"Schedule on-site survey",section:"Survey Required",completed:!0},{id:"task-006-3",title:"Complete survey and generate SOW",section:"Survey Required",completed:!0},{id:"task-006-4",title:"Get customer SOW approval",section:"Survey Required",completed:!0},{id:"task-006-5",title:"Engineering wavelength design",section:"Engineering",completed:!0,assignee:"Engineering"},{id:"task-006-6",title:"Verify DWDM capacity",section:"Engineering",completed:!0},{id:"task-006-7",title:"Engineering approval",section:"Engineering",completed:!0,assignee:"Engineering Manager"},{id:"task-006-8",title:"Order transponder equipment",section:"Equipment",completed:!0},{id:"task-006-9",title:"Verify equipment received",section:"Equipment",completed:!0},{id:"task-006-10",title:"A-side transponder install",section:"Installation",completed:!0},{id:"task-006-11",title:"Z-side transponder install",section:"Installation",completed:!0},{id:"task-006-12",title:"Wavelength turn-up",section:"Installation",completed:!0,assignee:"Network Ops"},{id:"task-006-13",title:"End-to-end testing",section:"Post-Install",completed:!0},{id:"task-006-14",title:"Customer acceptance testing",section:"Post-Install",completed:!0},{id:"task-006-15",title:"Send customer survey",section:"Post-Install",completed:!0}],readinessTasks:Et("proj-006",{hasSchedule:!0,isConfirmed:!0,hasDevice:!0,hasCrew:!0}),approvals:[{id:"appr-006-1",requirementId:"wl-appr-1",status:"approved",approvedBy:"Tom Engineer",approvedAt:S(-30)},{id:"appr-006-2",requirementId:"wl-appr-2",status:"approved",approvedBy:"Sarah Manager",approvedAt:S(-28)},{id:"appr-006-3",requirementId:"wl-appr-3",status:"approved",approvedBy:"Lisa Wong (Customer)",approvedAt:S(-3)}],slaDeadline:S(-5),lastCustomerContact:S(-3),installReport:{id:"report-001",installerName:"Carlos Rodriguez",completedAt:S(-3),deviceInstalled:"Ciena 6500 Transponder",deviceSerial:"C6500-2024-00123",powerStatus:"permanent",notes:"Wavelength turn-up successful. Customer verified 100G connectivity. Light levels within spec."},customerSurveyId:"survey-001",internalNotes:[],activityLog:[],communicationLog:[],blockers:[],isEscalated:!1,isWholesale:!1,projectGroupId:"group-002",createdAt:S(-45),updatedAt:S(-3)},{id:"proj-007",projectType:"ip-transit",customerId:"cust-001",buildingId:"bldg-001",serviceOrderId:"so-007",status:"reviewing",priority:"normal",handoffDate:S(-2),handoffEmailId:"email-007",salesRep:"Mike Reynolds",cxAssignee:"Alex Chen",focDate:S(12),product:"IP Transit",ipType:"bgp",serviceBandwidth:"10 Gbps",numStaticIps:256,mrc:7999,nrc:2500,buildingOnNet:!0,buildingType:"data-center",quotedLeadTime:30,device:"Customer Provided",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-007",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!1,serviceType:"10G IP Transit",staticIp:!0,customerOwnRouter:!0,isWholesale:!1,tasks:[{id:"task-007-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0},{id:"task-007-2",title:"Verify cross-connect availability",section:"Sales Hand Off",completed:!1},{id:"task-007-3",title:"Request customer LOA",section:"Sales Hand Off",completed:!1},{id:"task-007-4",title:"Submit BGP peering request",section:"Network Provisioning",completed:!1,assignee:"Network Ops"},{id:"task-007-5",title:"Configure IP transit session",section:"Network Provisioning",completed:!1,assignee:"Network Ops"}],readinessTasks:Et("proj-007",{hasDevice:!0,hasBlockers:!0}),approvals:[],slaDeadline:S(5),lastCustomerContact:S(-2),internalNotes:[],activityLog:[],communicationLog:[],blockers:nn["proj-007"]||[],isEscalated:!1,projectGroupId:"group-003",createdAt:S(-2),updatedAt:S(-1)},{id:"proj-008",projectType:"ethernet-transport",customerId:"cust-003",buildingId:"bldg-003",serviceOrderId:"so-008",status:"scheduled",priority:"high",handoffDate:S(-8),handoffEmailId:"email-008",salesRep:"Jennifer Lee",cxAssignee:"Maria Santos",focDate:S(4),product:"Ethernet Transport",ipType:"dynamic",serviceBandwidth:"1 Gbps",mrc:1999,nrc:1500,buildingOnNet:!0,buildingType:"commercial",quotedLeadTime:30,device:"Pilot XGS-2000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-008",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!1,serviceType:"1G Ethernet Transport",staticIp:!1,customerOwnRouter:!0,scheduledDate:S(4),scheduledSlot:"morning-9",assignedCrew:"Team Alpha",engineeringNotes:"P2P circuit Metro-NYC-001 to Metro-NYC-047. VLAN 2847.",tasks:[{id:"task-008-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0},{id:"task-008-2",title:"Engineering circuit design",section:"Engineering",completed:!0,assignee:"Engineering"},{id:"task-008-3",title:"Verify path availability",section:"Engineering",completed:!0},{id:"task-008-4",title:"Engineering approval",section:"Engineering",completed:!0,assignee:"Engineering Manager"},{id:"task-008-5",title:"Create network provisioning ticket",section:"Network Provisioning",completed:!0,assignee:"Network Ops"},{id:"task-008-6",title:"Configure VLAN on network",section:"Network Provisioning",completed:!1,assignee:"Network Ops"},{id:"task-008-7",title:"A-side handoff configuration",section:"Installation",completed:!1},{id:"task-008-8",title:"Z-side handoff configuration",section:"Installation",completed:!1}],readinessTasks:Et("proj-008",{hasSchedule:!0,hasDevice:!0}),approvals:[{id:"appr-008-1",requirementId:"et-appr-1",status:"approved",approvedBy:"Tom Engineer",approvedAt:S(-4)}],slaDeadline:S(6),lastCustomerContact:S(-1),internalNotes:[],activityLog:[],communicationLog:[],blockers:[],isEscalated:!1,isWholesale:!1,createdAt:S(-8),updatedAt:S(-1)},{id:"proj-009",projectType:"new-build",customerId:"cust-002",buildingId:"bldg-002",serviceOrderId:"so-009",status:"reviewing",priority:"normal",handoffDate:S(-2),handoffEmailId:"email-009",salesRep:"Jennifer Lee",cxAssignee:"Sarah Chen",focDate:S(18),product:"Dedicated Internet",ipType:"static",serviceBandwidth:"1 Gbps",numStaticIps:5,mrc:1299,nrc:500,buildingOnNet:!1,buildingType:"commercial",buildingIspNotes:"New construction - building still under development. Fiber drop scheduled.",quotedLeadTime:21,device:"Pilot XGS-2000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-009",surveyRequired:!0,afterHoursRequired:!1,riserDiagramRequired:!0,serviceType:"1 Gig Dedicated",staticIp:!0,customerOwnRouter:!1,isWholesale:!1,tasks:[{id:"task-009-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0,assignee:"Sarah Chen"},{id:"task-009-2",title:"Confirm all customer details and fill out the Description section",section:"Sales Hand Off",completed:!0,assignee:"Sarah Chen"},{id:"task-009-3",title:"Mark yourself as the CXA for the subscriber in Flight Deck",section:"Sales Hand Off",completed:!1,assignee:"Sarah Chen",dueDate:S(0)},{id:"task-009-4",title:"Check if customer is on ground floor or space is retail/fitness (requires survey)",section:"New Build",completed:!1,assignee:"Sarah Chen",dueDate:S(1)},{id:"task-009-5",title:"Add survey to install calendar (Mon/Wed/Fri at 9am or 11am)",section:"New Build",completed:!1,dueDate:S(2)},{id:"task-009-6",title:"Create a CX-FO request in Site Tracker",section:"New Build",completed:!1,assignee:"Sarah Chen",dueDate:S(2)},{id:"task-009-7",title:"Complete the Riser Diagram & Survey Request form",section:"New Build",completed:!1,dueDate:S(3)},{id:"task-009-8",title:"Coordinate access with the customer",section:"New Build",completed:!1,dueDate:S(5)},{id:"task-009-9",title:"Send reminder to customer the day before by 9:30am",section:"New Build",completed:!1},{id:"task-009-10",title:"PE confirms install can be scheduled in Slack thread and CX-FO request",section:"New Build",completed:!1,assignee:"PE"},{id:"task-009-11",title:"Share SOW with customer/building for approval",section:"New Build",completed:!1},{id:"task-009-12",title:"SOW is approved",section:"New Build",completed:!1},{id:"task-009-13",title:"Attach SOW to the install card",section:"New Build",completed:!1},{id:"task-009-14",title:"Mark CX-FO project in Site Tracker as Complete",section:"New Build",completed:!1},{id:"task-009-15",title:"Verify port availability",section:"Scheduling",completed:!1},{id:"task-009-16",title:"Propose install date to customer",section:"Scheduling",completed:!1},{id:"task-009-17",title:"Create network provisioning ticket",section:"Network Provisioning",completed:!1,assignee:"Network Ops"}],readinessTasks:Et("proj-009",{hasDevice:!0}),approvals:[{id:"appr-009-1",requirementId:"nb-appr-1",status:"pending"}],slaDeadline:S(7),lastCustomerContact:S(-1),internalNotes:[],activityLog:[],communicationLog:[],blockers:[],isEscalated:!1,createdAt:S(-2),updatedAt:S(0)},{id:"proj-010",projectType:"montgomery",customerId:"cust-004",buildingId:"bldg-004",serviceOrderId:"so-010",status:"reviewing",priority:"normal",handoffDate:S(-1),handoffEmailId:"email-010",salesRep:"Mike Reynolds",cxAssignee:"Emily Rodriguez",focDate:S(10),product:"Dedicated Internet",ipType:"static",serviceBandwidth:"500 Mbps",numStaticIps:5,mrc:699,nrc:0,buildingOnNet:!0,buildingType:"commercial",buildingIspNotes:"Montgomery building - strict access procedures.",quotedLeadTime:12,device:"Pilot GPON-1000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-010",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!1,serviceType:"500 Mbps Dedicated",staticIp:!0,customerOwnRouter:!1,isWholesale:!1,montgomeryContact:{name:"Patricia Wilson",email:"pwilson@montgomerybuilding.com",phone:"(212) 555-0401"},tasks:[{id:"task-010-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0,assignee:"Emily Rodriguez"},{id:"task-010-2",title:"Confirm all customer details",section:"Sales Hand Off",completed:!1,assignee:"Emily Rodriguez",dueDate:S(0)},{id:"task-010-3",title:"Mark yourself as the CXA in Flight Deck",section:"Sales Hand Off",completed:!1,assignee:"Emily Rodriguez",dueDate:S(1)},{id:"task-010-4",title:"Submit Montgomery building access request",section:"Building Access",completed:!1,dueDate:S(2)},{id:"task-010-5",title:"Receive building approval",section:"Building Access",completed:!1},{id:"task-010-6",title:"Verify port availability",section:"Scheduling",completed:!1},{id:"task-010-7",title:"Propose install date to customer",section:"Scheduling",completed:!1}],readinessTasks:Et("proj-010",{hasDevice:!0}),approvals:[{id:"appr-010-1",requirementId:"mont-appr-1",status:"pending"}],slaDeadline:S(5),lastCustomerContact:S(-1),internalNotes:[],activityLog:[],communicationLog:[],blockers:[],isEscalated:!1,createdAt:S(-1),updatedAt:S(0)},{id:"proj-011",projectType:"standard-on-net",customerId:"cust-005",buildingId:"bldg-001",serviceOrderId:"so-011",status:"scheduled",priority:"normal",handoffDate:S(-4),handoffEmailId:"email-011",salesRep:"Jennifer Lee",cxAssignee:"Marcus Johnson",focDate:S(6),product:"Dedicated Internet",ipType:"static",serviceBandwidth:"10 Gbps",numStaticIps:16,mrc:4999,nrc:1500,buildingOnNet:!0,buildingType:"data-center",quotedLeadTime:10,device:"Pilot XGS-4000",eeroRequired:!1,flightDeckUrl:"https://flightdeck.pilotfiber.com/orders/so-011",surveyRequired:!1,afterHoursRequired:!1,riserDiagramRequired:!1,serviceType:"10 Gig Dedicated",staticIp:!0,customerOwnRouter:!0,isWholesale:!0,hasEndUserContact:!0,endUserContact:{company:"CloudServe Inc.",name:"Rachel Green",email:"rgreen@cloudserve.io",phone:"(646) 555-0501"},scheduledDate:S(4),scheduledSlot:"morning-9",assignedCrew:"Team Alpha",tasks:[{id:"task-011-1",title:"Check sales order email for details",section:"Sales Hand Off",completed:!0,assignee:"Marcus Johnson"},{id:"task-011-2",title:"Confirm all customer details",section:"Sales Hand Off",completed:!0,assignee:"Marcus Johnson"},{id:"task-011-3",title:"Verify port availability",section:"Scheduling",completed:!0},{id:"task-011-4",title:"Propose install date to customer",section:"Scheduling",completed:!0},{id:"task-011-5",title:"Customer confirms install date",section:"Scheduling",completed:!0},{id:"task-011-6",title:"Create network provisioning ticket",section:"Network Provisioning",completed:!0,assignee:"Network Ops"},{id:"task-011-7",title:"Assign IP address",section:"Network Provisioning",completed:!1,assignee:"Network Ops"},{id:"task-011-8",title:"Send reminder to customer",section:"Installation",completed:!1,dueDate:S(3)}],readinessTasks:Et("proj-011",{hasSchedule:!0,hasDevice:!0,hasCrew:!0}),approvals:[],slaDeadline:S(8),lastCustomerContact:S(-1),internalNotes:[],activityLog:[],communicationLog:[],blockers:[],isEscalated:!1,createdAt:S(-4),updatedAt:S(-1)}],au=[{id:"cust-001",companyName:"Acme Corp",contacts:[{id:"cont-001-1",name:"John Smith",email:"john.smith@acmecorp.com",phone:"(212) 555-0101",role:"primary",isPrimary:!0},{id:"cont-001-2",name:"Emily Davis",email:"emily.davis@acmecorp.com",phone:"(212) 555-0111",role:"technical"}],vipTier:"gold",linkedInUrl:"https://www.linkedin.com/company/acmecorp"},{id:"cust-002",companyName:"TechStart Inc",contacts:[{id:"cont-002-1",name:"Sarah Johnson",email:"sarah@techstart.io",phone:"(212) 555-0102",role:"primary",isPrimary:!0},{id:"cont-002-2",name:"James Wilson",email:"james@techstart.io",phone:"(212) 555-0112",role:"it"}],linkedInUrl:"https://www.linkedin.com/company/techstart"},{id:"cust-003",companyName:"Metro Design Studio",contacts:[{id:"cont-003-1",name:"Michael Chen",email:"mchen@metrodesign.com",phone:"(212) 555-0103",role:"primary",isPrimary:!0}],vipTier:"silver",linkedInUrl:"https://www.linkedin.com/company/metrodesign"},{id:"cust-004",companyName:"Brooklyn Law Offices",contacts:[{id:"cont-004-1",name:"Amanda Torres",email:"atorres@brooklynlaw.com",phone:"(718) 555-0104",role:"primary",isPrimary:!0},{id:"cont-004-2",name:"Robert Kim",email:"rkim@brooklynlaw.com",phone:"(718) 555-0114",role:"it"}],linkedInUrl:"https://www.linkedin.com/company/brooklyn-law-offices"},{id:"cust-005",companyName:"DataFlow Analytics",contacts:[{id:"cont-005-1",name:"David Park",email:"dpark@dataflow.co",phone:"(212) 555-0105",role:"primary",isPrimary:!0},{id:"cont-005-2",name:"Nina Patel",email:"npatel@dataflow.co",phone:"(212) 555-0115",role:"technical"},{id:"cont-005-3",name:"Chris Lee",email:"clee@dataflow.co",phone:"(212) 555-0125",role:"onsite"}],vipTier:"platinum",linkedInUrl:"https://www.linkedin.com/company/dataflow-analytics"},{id:"cust-006",companyName:"Manhattan Media Group",contacts:[{id:"cont-006-1",name:"Lisa Wong",email:"lwong@mmg.com",phone:"(212) 555-0106",role:"primary",isPrimary:!0},{id:"cont-006-2",name:"Tom Martinez",email:"tmartinez@mmg.com",phone:"(212) 555-0116",role:"technical"}],vipTier:"gold",linkedInUrl:"https://www.linkedin.com/company/manhattan-media-group"}],lu=[{id:"bldg-001",address:"350 Fifth Avenue",city:"New York",state:"NY",zip:"10118",buildingStatus:"on-net",deploymentType:"xgs",buildingType:"commercial",onNet:!0,installNotes:["Freight elevator required","Building access 7am-6pm only"],recommendedDevice:"Pilot XGS-2000",accessInstructions:"Check in with security at lobby. Riser access on floor 2.",ispNotes:"Panel on floor 2, room 2B. Contact building ops for access.",flightDeckId:"fd-bldg-001"},{id:"bldg-002",address:"200 Park Avenue",city:"New York",state:"NY",zip:"10166",buildingStatus:"on-net",deploymentType:"gpon",buildingType:"commercial",onNet:!0,installNotes:["After-hours installs only (6pm-10pm)","COI required 48h in advance"],recommendedDevice:"Pilot GPON-1000",accessInstructions:"Loading dock entrance on 45th St. Contact building ops.",ispNotes:"Strict after-hours policy. No exceptions.",requiresAfterHours:!0,flightDeckId:"fd-bldg-002",outages:[{id:"outage-001",type:"maintenance",status:"scheduled",title:"Scheduled Fiber Maintenance",description:"Routine fiber inspection and cleaning in telecom room",startTime:new Date(Date.now()+7*24*60*60*1e3).toISOString(),endTime:new Date(Date.now()+7*24*60*60*1e3+4*60*60*1e3).toISOString(),affectedServices:["Internet","Voice"]}]},{id:"bldg-003",address:"55 Water Street",city:"New York",state:"NY",zip:"10041",buildingStatus:"anchor",deploymentType:"gpon-xgs",buildingType:"commercial",onNet:!0,installNotes:["Panel nearly full - verify port availability","Early morning preferred (7am-9am)"],recommendedDevice:"Pilot XGS-2000",accessInstructions:"Main lobby, ask for telecom room access badge.",ispNotes:"Panel capacity limited. Check before scheduling.",requiresContractWork:!0,flightDeckId:"fd-bldg-003"},{id:"bldg-004",address:"1 Brooklyn Bridge Park",city:"Brooklyn",state:"NY",zip:"11201",buildingStatus:"on-net",deploymentType:"xgs",buildingType:"commercial",onNet:!0,installNotes:["New construction - verify demarc location"],recommendedDevice:"Pilot XGS-2000",flightDeckId:"fd-bldg-004"},{id:"bldg-005",address:"175 Varick Street",city:"New York",state:"NY",zip:"10014",buildingStatus:"on-net",deploymentType:"gpon",buildingType:"commercial",onNet:!0,installNotes:[],recommendedDevice:"Pilot GPON-1000",accessInstructions:"Telecom closet on each floor. Key from super.",requiresSurvey:!0,flightDeckId:"fd-bldg-005",outages:[{id:"outage-002",type:"outage",status:"resolved",title:"Fiber Cut - Resolved",description:"Construction crew accidentally cut fiber on floor 3. Splice completed.",startTime:new Date(Date.now()-3*24*60*60*1e3).toISOString(),endTime:new Date(Date.now()-3*24*60*60*1e3+6*60*60*1e3).toISOString(),affectedServices:["Internet"]}]},{id:"bldg-006",address:"101 Avenue of the Americas",city:"New York",state:"NY",zip:"10013",buildingStatus:"anchor",deploymentType:"xgs",buildingType:"data-center",onNet:!0,installNotes:["High-security floor - escort required","Weekend installs preferred"],recommendedDevice:"Pilot XGS-2000",accessInstructions:"Building management at suite 100.",ispNotes:"Data center floor requires 48h advance notice and escort.",requiresAfterHours:!0,requiresContractWork:!0,flightDeckId:"fd-bldg-006"}],uh={standard:{tier:"standard",label:"Standard",color:"text-gray-600",bgColor:"bg-gray-100",slaMultiplier:1,firstResponseHours:24,leadTimeReductionDays:0,priorityBoost:0,dedicatedSupport:!1,priorityScheduling:!1,executiveEscalation:!1},silver:{tier:"silver",label:"Silver",color:"text-slate-600",bgColor:"bg-slate-100",slaMultiplier:.75,firstResponseHours:12,leadTimeReductionDays:2,priorityBoost:1,dedicatedSupport:!1,priorityScheduling:!0,executiveEscalation:!1},gold:{tier:"gold",label:"Gold",color:"text-amber-600",bgColor:"bg-amber-100",slaMultiplier:.5,firstResponseHours:4,leadTimeReductionDays:5,priorityBoost:2,dedicatedSupport:!0,priorityScheduling:!0,executiveEscalation:!1},platinum:{tier:"platinum",label:"Platinum",color:"text-purple-600",bgColor:"bg-purple-100",slaMultiplier:.25,firstResponseHours:1,leadTimeReductionDays:10,priorityBoost:3,dedicatedSupport:!0,priorityScheduling:!0,executiveEscalation:!0}},Df={primary:"Primary",technical:"Technical",billing:"Billing",onsite:"Onsite POC",it:"IT Contact",other:"Other"},Ea={low:{firstResponse:24,resolution:72},normal:{firstResponse:8,resolution:48},high:{firstResponse:4,resolution:24},urgent:{firstResponse:1,resolution:8}},iu={funding:{label:"Funding",color:"text-green-700",bgColor:"bg-green-100",icon:"DollarSign",defaultAction:"Consider upgrade opportunity"},milestone:{label:"Milestone",color:"text-blue-700",bgColor:"bg-blue-100",icon:"Trophy",defaultAction:"Send congratulations"},press:{label:"Press",color:"text-purple-700",bgColor:"bg-purple-100",icon:"Newspaper",defaultAction:"Stay informed"},leadership:{label:"Leadership Change",color:"text-amber-700",bgColor:"bg-amber-100",icon:"Users",defaultAction:"Introduce yourself to new contact"},expansion:{label:"Expansion",color:"text-cyan-700",bgColor:"bg-cyan-100",icon:"Building2",defaultAction:"Explore new location opportunities"},product:{label:"Product Launch",color:"text-indigo-700",bgColor:"bg-indigo-100",icon:"Package",defaultAction:"Ensure bandwidth supports growth"},partnership:{label:"Partnership",color:"text-pink-700",bgColor:"bg-pink-100",icon:"Handshake",defaultAction:"Discuss connectivity needs"},award:{label:"Award",color:"text-yellow-700",bgColor:"bg-yellow-100",icon:"Award",defaultAction:"Send congratulations"},general:{label:"News",color:"text-gray-700",bgColor:"bg-gray-100",icon:"FileText",defaultAction:"Review and follow up if relevant"}};function Tf(e){return e>=9?"promoter":e>=7?"passive":"detractor"}const If={promoter:{label:"Promoter",color:"text-green-700",bgColor:"bg-green-100",description:"Score 9-10: Loyal enthusiasts who will refer others"},passive:{label:"Passive",color:"text-yellow-700",bgColor:"bg-yellow-100",description:"Score 7-8: Satisfied but unenthusiastic"},detractor:{label:"Detractor",color:"text-red-700",bgColor:"bg-red-100",description:"Score 0-6: Unhappy customers who may damage reputation"}},al={contract:{label:"Contract",color:"text-blue-700",bgColor:"bg-blue-100",icon:"FileText",description:"Service agreements and contracts"},sow:{label:"SOW",color:"text-purple-700",bgColor:"bg-purple-100",icon:"FileCheck",description:"Statement of Work documents"},permit:{label:"Permit",color:"text-amber-700",bgColor:"bg-amber-100",icon:"Shield",description:"Building and work permits"},"install-photo":{label:"Install Photo",color:"text-green-700",bgColor:"bg-green-100",icon:"Camera",description:"Installation photographs"},"riser-diagram":{label:"Riser Diagram",color:"text-cyan-700",bgColor:"bg-cyan-100",icon:"GitBranch",description:"Building riser diagrams"},"site-survey":{label:"Site Survey",color:"text-indigo-700",bgColor:"bg-indigo-100",icon:"ClipboardList",description:"Site survey reports"},invoice:{label:"Invoice",color:"text-emerald-700",bgColor:"bg-emerald-100",icon:"Receipt",description:"Invoices and billing documents"},correspondence:{label:"Correspondence",color:"text-gray-700",bgColor:"bg-gray-100",icon:"Mail",description:"Email threads and correspondence"},other:{label:"Other",color:"text-gray-600",bgColor:"bg-gray-50",icon:"File",description:"Miscellaneous documents"}},mh={"follow-up":{label:"Follow-up",color:"text-blue-700",bgColor:"bg-blue-100",icon:"PhoneCall"},deadline:{label:"Deadline",color:"text-red-700",bgColor:"bg-red-100",icon:"Clock"},"check-in":{label:"Check-in",color:"text-green-700",bgColor:"bg-green-100",icon:"UserCheck"},escalation:{label:"Escalation",color:"text-orange-700",bgColor:"bg-orange-100",icon:"AlertTriangle"},custom:{label:"Custom",color:"text-purple-700",bgColor:"bg-purple-100",icon:"Bell"}},Ts={onboarding:{label:"Onboarding",color:"text-blue-700",bgColor:"bg-blue-100",icon:"UserPlus"},escalation:{label:"Escalation",color:"text-red-700",bgColor:"bg-red-100",icon:"AlertTriangle"},delay:{label:"Delay Mitigation",color:"text-orange-700",bgColor:"bg-orange-100",icon:"Clock"},vip:{label:"VIP Treatment",color:"text-purple-700",bgColor:"bg-purple-100",icon:"Crown"},"post-install":{label:"Post-Install",color:"text-green-700",bgColor:"bg-green-100",icon:"CheckCircle"},"at-risk":{label:"At-Risk Customer",color:"text-yellow-700",bgColor:"bg-yellow-100",icon:"Shield"},custom:{label:"Custom",color:"text-gray-700",bgColor:"bg-gray-100",icon:"Workflow"}},Bs={"project-created":{label:"New Project",description:"When a new project is assigned to you",defaultEnabled:!0,category:"project"},"project-escalated":{label:"Project Escalated",description:"When a project is escalated",defaultEnabled:!0,category:"project"},"project-completed":{label:"Project Completed",description:"When a project is marked as completed",defaultEnabled:!0,category:"project"},"foc-approaching":{label:"FOC Approaching",description:"When a project is within 3 days of FOC",defaultEnabled:!0,category:"project"},"blocker-added":{label:"Blocker Added",description:"When a blocker is added to your project",defaultEnabled:!0,category:"project"},"blocker-resolved":{label:"Blocker Resolved",description:"When a blocker is resolved",defaultEnabled:!1,category:"project"},mention:{label:"@Mention",description:"When someone mentions you in a note",defaultEnabled:!0,category:"team"},"vip-activity":{label:"VIP Activity",description:"Activity on VIP customer projects",defaultEnabled:!0,category:"customer"},"customer-news":{label:"Customer News",description:"New news alerts for your customers",defaultEnabled:!1,category:"customer"},"nps-response":{label:"NPS Response",description:"When a customer responds to NPS survey",defaultEnabled:!0,category:"customer"}},Af=new Date,L=(e,s=0)=>{const n=new Date(Af);return n.setDate(n.getDate()+e),n.setHours(n.getHours()+s),n.toISOString()},Ee=(e,s)=>{const n=new Date(e),r=Ea[s],a=new Date(n);a.setHours(a.getHours()+r.firstResponse);const l=new Date(n);return l.setHours(l.getHours()+r.resolution),{firstResponseDue:a.toISOString(),resolutionDue:l.toISOString()}},ou=[{id:"ticket-001",projectId:"proj-001",type:"email",category:"general",status:"open",priority:"high",subject:"New Customer Handoff - Acme Corp - 350 Fifth Ave",description:`Hi CX Team,

Please find below the details for our new customer Acme Corp:

Customer: Acme Corp
Contact: John Smith (john.smith@acmecorp.com)
Address: 350 Fifth Avenue, New York, NY 10118
Service: 1 Gig Dedicated
Static IP: Yes (/29 block)
Contract Term: 36 months

Customer is eager to get started. They're expanding their office and need connectivity ASAP.

Thanks,
Mike Reynolds
Account Executive`,from:"mike.reynolds@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Alex Chen",createdAt:L(-1,-4),updatedAt:L(-1,-4),isRead:!0,requiresResponse:!0,responseDeadline:L(1),...Ee(L(-1,-4),"high"),firstRespondedAt:L(-1,-2),replies:[{id:"reply-001-1",author:"Alex Chen",authorType:"agent",content:"Thanks for the handoff Mike! I'll reach out to John today to introduce myself and discuss next steps.",createdAt:L(-1,-2),isInternal:!1}],notes:[{id:"note-001-1",author:"Alex Chen",content:"Reviewed handoff email. Building is on-net with XGS deployment. Will send welcome email today.",createdAt:L(-1,-2),isInternal:!0}]},{id:"ticket-002",projectId:"proj-002",type:"email",category:"general",status:"resolved",priority:"normal",subject:"New Customer Handoff - TechStart Inc - 200 Park Ave",description:`Hi Team,

New customer handoff for TechStart Inc.

Customer: TechStart Inc
Contact: Sarah Johnson (sarah@techstart.io)
Address: 200 Park Avenue, New York, NY 10166
Service: 500 Mbps Dedicated
Static IP: No
Contract Term: 24 months

Note: Customer has their own router and will manage WiFi.

Thanks,
Jennifer Lee
Account Executive`,from:"jennifer.lee@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(-3,-6),updatedAt:L(-2,-3),resolvedAt:L(-2,-3),isRead:!0,requiresResponse:!1,...Ee(L(-3,-6),"normal"),firstRespondedAt:L(-3,-4),replies:[{id:"reply-002-1",author:"Maria Santos",authorType:"agent",content:"Got it Jennifer! I'll send the welcome email to Sarah and start the onboarding process.",createdAt:L(-3,-4),isInternal:!1},{id:"reply-002-2",author:"System",authorType:"system",content:"Ticket resolved - Welcome email sent and scheduling in progress.",createdAt:L(-2,-3),isInternal:!1}]},{id:"ticket-003",projectId:"proj-002",type:"email",category:"technical",status:"open",priority:"normal",subject:"Re: Welcome to Pilot Fiber - Equipment Question",description:`Hi,

Thursday the 16th works great for us. I'll be onsite to meet the installer.

Quick question - will the installer bring the modem/ONT or do we need to purchase equipment separately?

Thanks,
Sarah`,from:"sarah@techstart.io",to:["am@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(-2,2),updatedAt:L(-2,2),isRead:!1,requiresResponse:!0,responseDeadline:L(0),...Ee(L(-2,2),"normal"),notes:[{id:"note-003-1",author:"Maria Santos",content:"Customer asking about equipment. Need to confirm we provide ONT and they handle their own router.",createdAt:L(-2,3),isInternal:!0}]},{id:"ticket-004",projectId:"proj-002",type:"internal",category:"scheduling",status:"pending",priority:"normal",subject:"After-hours access request submitted",description:"Submitted building access request for after-hours installation on Thursday 6pm. Waiting for building management approval.",assignee:"Maria Santos",createdAt:L(-2,-1),updatedAt:L(-2,-1),isRead:!0,requiresResponse:!1,...Ee(L(-2,-1),"normal"),firstRespondedAt:L(-2,-1)},{id:"ticket-005",projectId:"proj-003",type:"email",category:"general",status:"resolved",priority:"normal",subject:"New Customer Handoff - Metro Design Studio - 55 Water St",description:`CX Team,

New customer for 55 Water Street.

Customer: Metro Design Studio
Contact: Michael Chen (mchen@metrodesign.com)
Address: 55 Water Street, New York, NY 10041
Service: 1 Gig Dedicated
Static IP: Yes
Contract Term: 36 months

Thanks,
Mike`,from:"mike.reynolds@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Alex Chen",createdAt:L(-5,-8),updatedAt:L(-1,-5),resolvedAt:L(-1,-5),isRead:!0,requiresResponse:!1,...Ee(L(-5,-8),"normal"),firstRespondedAt:L(-5,-6),notes:[{id:"note-005-1",author:"Alex Chen",content:"Sent confirmation email to customer. Install scheduled for Saturday 7am.",createdAt:L(-1,-5),isInternal:!0}]},{id:"ticket-006",projectId:"proj-003",type:"internal",category:"scheduling",status:"open",priority:"high",subject:"Contractor coordination - ABC Contractors",description:"Need to confirm contractor arrival time and provide building access instructions. Contractor contact: Bob Smith (555-123-4567).",assignee:"Alex Chen",createdAt:L(-1,-3),updatedAt:L(-1,-3),isRead:!0,requiresResponse:!1,...Ee(L(-1,-3),"high"),firstRespondedAt:L(-1,-2)},{id:"ticket-007",projectId:"proj-004",type:"email",category:"general",status:"resolved",priority:"normal",subject:"New Customer Handoff - Brooklyn Law Offices",description:`Hi CX,

Please welcome Brooklyn Law Offices to Pilot!

Customer: Brooklyn Law Offices
Contact: Amanda Torres (atorres@brooklynlaw.com)
Address: 1 Brooklyn Bridge Park, Brooklyn, NY 11201
Service: 250 Mbps Dedicated
Contract Term: 24 months

Jennifer`,from:"jennifer.lee@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(-7,-4),updatedAt:L(-6,-2),resolvedAt:L(-6,-2),isRead:!0,requiresResponse:!1,...Ee(L(-7,-4),"normal"),firstRespondedAt:L(-7,-2)},{id:"ticket-008",projectId:"proj-004",type:"email",category:"scheduling",status:"closed",priority:"normal",subject:"Re: Installation Tomorrow - Brooklyn Law Offices",description:`Perfect, we're all set for tomorrow at 9 AM.

I'll be here to meet your technician. The building concierge knows to expect them.

Thanks for the great communication throughout this process!

Amanda Torres
Office Manager
Brooklyn Law Offices`,from:"atorres@brooklynlaw.com",to:["am@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(0,-2),updatedAt:L(0,-1),resolvedAt:L(0,-1),isRead:!0,requiresResponse:!1,...Ee(L(0,-2),"normal"),firstRespondedAt:L(0,-1),replies:[{id:"reply-008-1",author:"Maria Santos",authorType:"agent",content:"Perfect Amanda! Our technician will arrive at 9 AM sharp. If you have any questions on the day, feel free to call me directly.",createdAt:L(0,-1),isInternal:!1}]},{id:"ticket-009",projectId:"proj-005",type:"email",category:"general",status:"resolved",priority:"urgent",subject:"URGENT: New Customer Handoff - DataFlow Analytics - 10 Gig",description:`Team,

High priority install for DataFlow Analytics - they're a data center customer needing 10 Gig service.

Customer: DataFlow Analytics
Contact: David Park (dpark@dataflow.co)
Address: 175 Varick Street, New York, NY 10014
Service: 10 Gig Dedicated
Static IP: Yes
Contract Term: 36 months

This is a big account - please prioritize.

Thanks,
Mike`,from:"mike.reynolds@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Alex Chen",createdAt:L(-10,-6),updatedAt:L(-8,-4),resolvedAt:L(-8,-4),isRead:!0,requiresResponse:!1,...Ee(L(-10,-6),"urgent"),firstRespondedAt:L(-10,-5)},{id:"ticket-010",projectId:"proj-005",type:"email",category:"technical",status:"open",priority:"high",subject:"Re: Installation Day - IP Block Assignment",description:`Hi Team,

Just wanted to confirm our install is still on for today. Our network team will be onsite all day.

Also, can you confirm the IP block assignment? We need to update our DNS ahead of the cutover.

Thanks,
David`,from:"dpark@dataflow.co",to:["am@pilotfiber.com"],assignee:"Alex Chen",createdAt:L(-1,4),updatedAt:L(-1,4),isRead:!0,requiresResponse:!0,responseDeadline:L(0),...Ee(L(-1,4),"high"),notes:[{id:"note-010-1",author:"Alex Chen",content:"Need to get IP block from Network Ops before responding.",createdAt:L(-1,5),isInternal:!0}]},{id:"ticket-011",projectId:"proj-005",type:"phone",category:"general",status:"open",priority:"normal",subject:"Customer call - install progress update",description:"David Park called asking for status on Z-side termination. Told him crew is on site and expects completion by end of day. Will call back when OTDR testing is complete.",assignee:"Alex Chen",createdAt:L(0,-1),updatedAt:L(0,-1),isRead:!0,requiresResponse:!1,...Ee(L(0,-1),"normal"),firstRespondedAt:L(0,-1)},{id:"ticket-012",projectId:"proj-006",type:"email",category:"general",status:"closed",priority:"normal",subject:"Re: Installation Complete - Manhattan Media Group",description:`Hi,

Everything is working great! The installer was professional and efficient. Thanks for making this so smooth.

Lisa Wong
IT Director
Manhattan Media Group`,from:"lwong@mmg.com",to:["am@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(-3,3),updatedAt:L(-3,4),resolvedAt:L(-3,4),isRead:!0,requiresResponse:!1,...Ee(L(-3,3),"normal"),firstRespondedAt:L(-3,4),notes:[{id:"note-012-1",author:"Maria Santos",content:"Great feedback! Sent customer survey.",createdAt:L(-3,4),isInternal:!0}]},{id:"ticket-013",projectId:"proj-007",type:"email",category:"technical",status:"open",priority:"normal",subject:"New Customer Handoff - Acme Corp - IP Transit Service",description:`CX Team,

Acme Corp is adding IP Transit service to their existing location at 350 Fifth Ave.

Service: 10G IP Transit
BGP ASN: 64512
IP Block: /24 requested

Mike`,from:"mike.reynolds@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Alex Chen",createdAt:L(-2,-5),updatedAt:L(-2,-5),isRead:!0,requiresResponse:!1,...Ee(L(-2,-5),"normal"),firstRespondedAt:L(-2,-3)},{id:"ticket-014",projectId:"proj-007",type:"customer-request",category:"change-request",status:"pending",priority:"normal",subject:"LOA request sent to customer",description:"Sent Letter of Authorization request to customer for cross-connect. Waiting for signed document.",assignee:"Alex Chen",createdAt:L(-1,-3),updatedAt:L(-1,-3),isRead:!0,requiresResponse:!1,...Ee(L(-1,-3),"normal"),firstRespondedAt:L(-1,-3)},{id:"ticket-015",projectId:"proj-008",type:"email",category:"general",status:"resolved",priority:"high",subject:"New Customer Handoff - Metro Design - Ethernet Transport",description:`Team,

Metro Design is adding a point-to-point Ethernet circuit between their two locations.

A-side: 55 Water Street
Z-side: 100 Wall Street
Service: 1G Ethernet Transport

Jennifer`,from:"jennifer.lee@pilotfiber.com",to:["am@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(-8,-6),updatedAt:L(-6,-2),resolvedAt:L(-6,-2),isRead:!0,requiresResponse:!1,...Ee(L(-8,-6),"high"),firstRespondedAt:L(-8,-4)},{id:"ticket-016",projectId:"proj-008",type:"internal",category:"technical",status:"open",priority:"normal",subject:"Engineering approval received - ready for install",description:"Tom Engineer approved circuit design. VLAN 2847 assigned. Ready to schedule A-side and Z-side handoffs.",assignee:"Maria Santos",createdAt:L(-4,-2),updatedAt:L(-4,-2),isRead:!0,requiresResponse:!1,...Ee(L(-4,-2),"normal"),firstRespondedAt:L(-4,-2)},{id:"ticket-017",customerId:"cust-001",type:"email",category:"billing",status:"open",priority:"normal",subject:"Invoice Question - Account #12345",description:`Hi,

I have a question about our latest invoice. There's a charge for "Network Services" that I don't recognize. Can you please explain what this is for?

Thanks,
John Smith
Acme Corp`,from:"john.smith@acmecorp.com",to:["billing@pilotfiber.com"],assignee:"Maria Santos",createdAt:L(-1,2),updatedAt:L(-1,2),isRead:!1,requiresResponse:!0,...Ee(L(-1,2),"normal")},{id:"ticket-018",customerId:"cust-003",type:"phone",category:"complaint",status:"open",priority:"urgent",subject:"Service outage complaint - Metro Design Studio",description:"Customer called very frustrated about intermittent connectivity issues over the past week. Promised to escalate to NOC and call back within 1 hour with update.",from:"mchen@metrodesign.com",assignee:"Alex Chen",createdAt:L(0,-3),updatedAt:L(0,-3),isRead:!0,requiresResponse:!0,...Ee(L(0,-3),"urgent"),notes:[{id:"note-018-1",author:"Alex Chen",content:"Escalated to NOC team. Ticket #NOC-4521 opened. They are investigating.",createdAt:L(0,-2),isInternal:!0}]}],cu=[{id:"so-001",customerId:"cust-001",buildingId:"bldg-001",product:"Dedicated Internet",serviceType:"1 Gig Dedicated",serviceBandwidth:"1 Gbps",ipType:"static",numStaticIps:5,monthlyRecurring:999,installFee:0,contractTerm:36,staticIp:!0,notes:"Customer needs /29 block for multiple servers"},{id:"so-002",customerId:"cust-002",buildingId:"bldg-002",product:"Dedicated Internet",serviceType:"500 Mbps Dedicated",serviceBandwidth:"500 Mbps",ipType:"dynamic",monthlyRecurring:499,installFee:0,contractTerm:24,staticIp:!1},{id:"so-003",customerId:"cust-003",buildingId:"bldg-003",product:"Dedicated Internet",serviceType:"1 Gig Dedicated",serviceBandwidth:"1 Gbps",ipType:"static",numStaticIps:5,monthlyRecurring:999,installFee:500,contractTerm:36,staticIp:!0},{id:"so-004",customerId:"cust-004",buildingId:"bldg-004",product:"Dedicated Internet",serviceType:"250 Mbps Dedicated",serviceBandwidth:"250 Mbps",ipType:"dynamic",monthlyRecurring:299,installFee:0,contractTerm:24,staticIp:!1},{id:"so-005",customerId:"cust-005",buildingId:"bldg-005",product:"Dark Fiber",serviceType:"10 Gig Dedicated",serviceBandwidth:"10 Gbps",ipType:"bgp",numStaticIps:16,monthlyRecurring:4999,installFee:15e3,contractTerm:36,staticIp:!0,notes:"Data center use case - high bandwidth critical"},{id:"so-006",customerId:"cust-006",buildingId:"bldg-006",product:"Wavelength",serviceType:"100G Wavelength",serviceBandwidth:"100 Gbps",ipType:"bgp",monthlyRecurring:12999,installFee:25e3,contractTerm:36,staticIp:!0},{id:"so-007",customerId:"cust-001",buildingId:"bldg-001",product:"IP Transit",serviceType:"10G IP Transit",serviceBandwidth:"10 Gbps",ipType:"bgp",numStaticIps:256,monthlyRecurring:7999,installFee:2500,contractTerm:24,staticIp:!0},{id:"so-008",customerId:"cust-003",buildingId:"bldg-003",product:"Ethernet Transport",serviceType:"1G Ethernet Transport",serviceBandwidth:"1 Gbps",ipType:"dynamic",monthlyRecurring:1999,installFee:1500,contractTerm:36,staticIp:!1}],Pf=new Date,rn=e=>{const s=new Date(Pf);return s.setDate(s.getDate()+e),s.toISOString()},du=[{id:"group-001",name:"DataFlow Analytics Multi-Site Rollout",description:"Enterprise deployment across 3 NYC locations - primary data center, HQ, and DR site",customerId:"cust-005",color:"#8B5CF6",createdAt:rn(-15),updatedAt:rn(-1),createdBy:"Alex Chen"},{id:"group-002",name:"Manhattan Media Group Campus Expansion",description:"Wavelength and dark fiber services for new media production facility",customerId:"cust-006",color:"#EC4899",createdAt:rn(-50),updatedAt:rn(-3),createdBy:"Maria Santos"},{id:"group-003",name:"Acme Corp Q1 Build-out",description:"Phase 1 connectivity for new Acme Corp headquarters floors",customerId:"cust-001",color:"#10B981",createdAt:rn(-5),updatedAt:rn(-1),createdBy:"Sarah Chen"}],oi=[{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Emerald",value:"#10B981"},{name:"Blue",value:"#3B82F6"},{name:"Orange",value:"#F97316"},{name:"Teal",value:"#14B8A6"},{name:"Red",value:"#EF4444"},{name:"Indigo",value:"#6366F1"}],Ef={projects:[],customers:[],buildings:[],tickets:[],serviceOrders:[],projectGroups:[]};function Rf(e,s){switch(s.type){case"LOAD_STATE":return s.payload;case"SET_PROJECTS":return{...e,projects:s.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,s.payload]};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(n=>n.id===s.payload.id?s.payload:n)};case"SET_TICKETS":return{...e,tickets:s.payload};case"ADD_TICKET":return{...e,tickets:[...e.tickets,s.payload]};case"UPDATE_TICKET":return{...e,tickets:e.tickets.map(n=>n.id===s.payload.id?s.payload:n)};case"MARK_TICKET_READ":return{...e,tickets:e.tickets.map(n=>n.id===s.payload?{...n,isRead:!0}:n)};case"UPDATE_TICKET_STATUS":{const n=new Date().toISOString();return{...e,tickets:e.tickets.map(r=>r.id===s.payload.ticketId?{...r,status:s.payload.status,updatedAt:n,resolvedAt:s.payload.status==="resolved"||s.payload.status==="closed"?n:r.resolvedAt}:r)}}case"UPDATE_TICKET_PRIORITY":return{...e,tickets:e.tickets.map(n=>n.id===s.payload.ticketId?{...n,priority:s.payload.priority,updatedAt:new Date().toISOString()}:n)};case"UPDATE_TICKET_ASSIGNEE":return{...e,tickets:e.tickets.map(n=>n.id===s.payload.ticketId?{...n,assignee:s.payload.assignee,updatedAt:new Date().toISOString()}:n)};case"ADD_TICKET_REPLY":{const n=new Date().toISOString();return{...e,tickets:e.tickets.map(r=>{if(r.id!==s.payload.ticketId)return r;const a=!r.firstRespondedAt&&s.payload.reply.authorType==="agent";return{...r,replies:[...r.replies||[],s.payload.reply],updatedAt:n,firstRespondedAt:a?n:r.firstRespondedAt,requiresResponse:s.payload.reply.authorType==="customer"}})}}case"UPDATE_TASK":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,tasks:n.tasks.map(r=>r.id===s.payload.taskId?{...r,completed:s.payload.completed}:r)}:n)};case"UPDATE_PROJECT_ASSIGNEE":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,cxAssignee:s.payload.cxAssignee}:n)};case"UPDATE_TASK_ASSIGNEE":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,tasks:n.tasks.map(r=>r.id===s.payload.taskId?{...r,assignee:s.payload.assignee}:r)}:n)};case"UPDATE_TASK_DUE_DATE":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,tasks:n.tasks.map(r=>r.id===s.payload.taskId?{...r,dueDate:s.payload.dueDate}:r)}:n)};case"UPDATE_PROJECT_STATUS":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,status:s.payload.status,updatedAt:new Date().toISOString()}:n)};case"ADD_INTERNAL_NOTE":{const n={id:`activity-note-${s.payload.note.id}`,projectId:s.payload.projectId,type:"note_added",description:s.payload.note.content.length>100?`${s.payload.note.content.substring(0,100)}...`:s.payload.note.content,author:s.payload.note.author,createdAt:s.payload.note.createdAt};return{...e,projects:e.projects.map(r=>r.id===s.payload.projectId?{...r,internalNotes:[s.payload.note,...r.internalNotes],activityLog:[n,...r.activityLog],updatedAt:new Date().toISOString()}:r)}}case"DELETE_INTERNAL_NOTE":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,internalNotes:n.internalNotes.filter(r=>r.id!==s.payload.noteId)}:n)};case"TOGGLE_NOTE_PIN":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,internalNotes:n.internalNotes.map(r=>r.id===s.payload.noteId?{...r,isPinned:!r.isPinned}:r)}:n)};case"ADD_ACTIVITY_LOG":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,activityLog:[s.payload.entry,...n.activityLog]}:n)};case"ADD_BLOCKER":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,blockers:[s.payload.blocker,...n.blockers],updatedAt:new Date().toISOString()}:n)};case"RESOLVE_BLOCKER":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,blockers:n.blockers.map(r=>r.id===s.payload.blockerId?{...r,resolvedAt:new Date().toISOString(),resolvedBy:s.payload.resolvedBy}:r),updatedAt:new Date().toISOString()}:n)};case"TOGGLE_ESCALATION":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,isEscalated:s.payload.isEscalated,escalatedAt:s.payload.isEscalated?new Date().toISOString():void 0,escalatedBy:s.payload.escalatedBy,escalationReason:s.payload.reason,updatedAt:new Date().toISOString()}:n)};case"UPDATE_CONTACT_ROLE":return{...e,customers:e.customers.map(n=>n.id===s.payload.customerId?{...n,contacts:n.contacts.map(r=>r.id===s.payload.contactId?{...r,role:s.payload.role,isPrimary:s.payload.isPrimary??r.isPrimary}:s.payload.isPrimary&&s.payload.role==="primary"?{...r,isPrimary:!1}:r)}:n)};case"UPDATE_READINESS_TASK":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,readinessTasks:n.readinessTasks.map(r=>r.id===s.payload.taskId?{...r,...s.payload.updates}:r),updatedAt:new Date().toISOString()}:n)};case"ADD_COMMUNICATION_LOG":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,communicationLog:[s.payload.entry,...n.communicationLog||[]],lastCustomerContact:new Date().toISOString(),updatedAt:new Date().toISOString()}:n)};case"ADD_PROJECT_GROUP":return{...e,projectGroups:[...e.projectGroups,s.payload]};case"UPDATE_PROJECT_GROUP":return{...e,projectGroups:e.projectGroups.map(n=>n.id===s.payload.id?s.payload:n)};case"DELETE_PROJECT_GROUP":return{...e,projectGroups:e.projectGroups.filter(n=>n.id!==s.payload),projects:e.projects.map(n=>n.projectGroupId===s.payload?{...n,projectGroupId:void 0,updatedAt:new Date().toISOString()}:n)};case"LINK_PROJECT_TO_GROUP":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,projectGroupId:s.payload.groupId,updatedAt:new Date().toISOString()}:n)};case"UPDATE_CUSTOMER_VIP_TIER":return{...e,customers:e.customers.map(n=>n.id===s.payload.customerId?{...n,vipTier:s.payload.vipTier}:n)};case"UPDATE_CUSTOMER_LINKEDIN":return{...e,customers:e.customers.map(n=>n.id===s.payload.customerId?{...n,linkedInUrl:s.payload.linkedInUrl}:n)};case"UPDATE_PROJECT_VIP_OVERRIDE":return{...e,projects:e.projects.map(n=>n.id===s.payload.projectId?{...n,vipTierOverride:s.payload.vipTierOverride,updatedAt:new Date().toISOString()}:n)};default:return e}}const ph=b.createContext(null),uu="cx-onboarding-state",mu="cx-onboarding-version",pu="12";function Mf({children:e}){const[s,n]=b.useReducer(Rf,Ef);b.useEffect(()=>{const y=localStorage.getItem(mu),h=localStorage.getItem(uu);if(y!==pu||!h){localStorage.setItem(mu,pu),n({type:"LOAD_STATE",payload:{projects:ru,customers:au,buildings:lu,tickets:ou,serviceOrders:cu,projectGroups:du}});return}try{const v=JSON.parse(h);n({type:"LOAD_STATE",payload:v})}catch{n({type:"LOAD_STATE",payload:{projects:ru,customers:au,buildings:lu,tickets:ou,serviceOrders:cu,projectGroups:du}})}},[]),b.useEffect(()=>{s.projects.length>0&&localStorage.setItem(uu,JSON.stringify(s))},[s]);const r=y=>s.projects.find(h=>h.id===y),a=y=>s.customers.find(h=>h.id===y),l=y=>s.buildings.find(h=>h.id===y),i=y=>s.tickets.find(h=>h.id===y),o=y=>s.tickets.filter(h=>h.projectId===y).sort((h,v)=>new Date(v.updatedAt).getTime()-new Date(h.updatedAt).getTime()),c=y=>s.serviceOrders.find(h=>h.id===y),m=y=>s.projectGroups.find(h=>h.id===y),j=y=>s.projects.filter(h=>h.projectGroupId===y);return t.jsx(ph.Provider,{value:{state:s,dispatch:n,getProject:r,getCustomer:a,getBuilding:l,getTicket:i,getProjectTickets:o,getServiceOrder:c,getProjectGroup:m,getProjectsInGroup:j},children:e})}function Se(){const e=b.useContext(ph);if(!e)throw new Error("useApp must be used within AppProvider");return e}const hh=b.createContext(null);function Of({children:e}){const[s,n]=b.useState(!1),[r,a]=b.useState(null),l=o=>{a(o),n(!0)},i=()=>{n(!1),setTimeout(()=>a(null),300)};return t.jsx(hh.Provider,{value:{isOpen:s,building:r,openDrawer:l,closeDrawer:i},children:e})}function xh(){const e=b.useContext(hh);if(!e)throw new Error("useBuildingDrawer must be used within BuildingDrawerProvider");return e}const gh=b.createContext(null);function $f({children:e}){const[s,n]=b.useState(!1),[r,a]=b.useState(null),l=o=>{a(o),n(!0)},i=()=>{n(!1),setTimeout(()=>a(null),300)};return t.jsx(gh.Provider,{value:{isOpen:s,ticketId:r,openDrawer:l,closeDrawer:i},children:e})}function fh(){const e=b.useContext(gh);if(!e)throw new Error("useTicketDrawer must be used within TicketDrawerProvider");return e}function Lf({onOpenCommandPalette:e,onOpenNewProject:s,onOpenShortcutsHelp:n,onOpenEmailTemplates:r,onTabChange:a}){const l=Ve(),i=$s(),o=b.useRef(null),c=b.useRef(null),m=b.useCallback(()=>{const h=document.activeElement;if(!h)return!1;const v=h.tagName.toLowerCase();return v==="input"||v==="textarea"||v==="select"||h.isContentEditable},[]),j=i.pathname.startsWith("/projects/")&&i.pathname!=="/projects",y=b.useCallback(h=>{var v;if(m()){h.key==="Escape"&&((v=document.activeElement)==null||v.blur());return}if((h.metaKey||h.ctrlKey)&&h.key==="k"){h.preventDefault(),e();return}if((h.metaKey||h.ctrlKey)&&h.key==="n"){h.preventDefault(),s();return}if(h.key==="?"&&!h.metaKey&&!h.ctrlKey){h.preventDefault(),n();return}if(o.current==="g")switch(o.current=null,c.current&&(clearTimeout(c.current),c.current=null),h.key.toLowerCase()){case"d":h.preventDefault(),l("/");return;case"p":h.preventDefault(),l("/projects");return;case"c":h.preventDefault(),l("/calendar");return;case"r":h.preventDefault(),l("/reports");return;case"t":h.preventDefault(),l("/tickets");return}if(h.key==="g"&&!h.metaKey&&!h.ctrlKey){h.preventDefault(),o.current="g",c.current=setTimeout(()=>{o.current=null},1e3);return}if(j&&a)switch(h.key){case"1":h.preventDefault(),a("overview");return;case"2":h.preventDefault(),a("tickets");return;case"3":h.preventDefault(),a("tasks");return;case"4":h.preventDefault(),a("activity");return;case"5":h.preventDefault(),a("report");return}if(h.key==="e"&&!h.metaKey&&!h.ctrlKey&&j&&r){h.preventDefault(),r();return}},[m,e,s,n,r,a,l,j]);b.useEffect(()=>(window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y),c.current&&clearTimeout(c.current)}),[y])}var _f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ff=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uf=(e,s)=>{const n=b.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,children:o,...c},m)=>b.createElement("svg",{ref:m,..._f,width:a,height:a,stroke:r,strokeWidth:i?Number(l)*24/Number(a):l,className:`lucide lucide-${Ff(e)}`,...c},[...s.map(([j,y])=>b.createElement(j,y)),...(Array.isArray(o)?o:[o])||[]]));return n.displayName=`${e}`,n};var A=Uf;const Fn=A("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),vt=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),hr=A("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),te=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Bf=A("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),zf=A("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),hu=A("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),qf=A("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),kc=A("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ll=A("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Hf=A("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),xu=A("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Wf=A("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Vf=A("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),$r=A("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Gf=A("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ke=A("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),xr=A("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Gt=A("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Kf=A("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]),me=A("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Yf=A("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),He=A("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Pe=A("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Mn=A("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Ct=A("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ke=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Qf=A("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Lt=A("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ut=A("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Js=A("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Xf=A("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),se=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),yh=A("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Cn=A("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Cc=A("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Al=A("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Sc=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Zs=A("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Jf=A("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Dc=A("FileQuestion",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Tt=A("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),gu=A("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Un=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Tc=A("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),ts=A("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Zf=A("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Ic=A("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),vh=A("GitCommit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),jh=A("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),fu=A("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),ey=A("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ty=A("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),Nh=A("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),sy=A("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Cs=A("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),wh=A("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Kr=A("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Ac=A("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),fo=A("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),yu=A("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),ny=A("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),bh=A("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ry=A("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),le=A("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Pc=A("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Xe=A("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Lr=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ay=A("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),ly=A("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),iy=A("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),oy=A("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),cy=A("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),dy=A("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Ec=A("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),Oe=A("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),uy=A("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),my=A("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),gr=A("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Qe=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),py=A("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),hy=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),xy=A("Router",[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]]),gy=A("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),_r=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),fy=A("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Pl=A("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yr=A("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),yy=A("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),vy=A("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),il=A("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),ci=A("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),jy=A("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ol=A("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),kh=A("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Rc=A("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Ny=A("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),wy=A("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),by=A("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),cl=A("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Mc=A("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),ky=A("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Cy=A("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),El=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Fr=A("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Is=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Sy=A("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Dy=A("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Ch=A("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),vu=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Sh=A("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Ur=A("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ty=A("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Le=A("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Je=A("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Dh=A("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Th=A("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),Ih=A("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ha=A("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),mt=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),As=A("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Iy({className:e="",color:s="#1F191A"}){return t.jsx("svg",{width:"64",height:"22",viewBox:"0 0 64 22",xmlns:"http://www.w3.org/2000/svg",className:e,children:t.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:t.jsxs("g",{fill:s,children:[t.jsx("g",{transform:"translate(18.142646, 0.045132)",children:t.jsx("path",{d:"M1.92633931,3.89588352 C2.92740369,3.89588352 3.73855553,3.07951232 3.73855553,2.07266432 C3.73855553,1.06552192 2.92740369,0.24915072 1.92633931,0.24915072 C0.925567561,0.24915072 0.114123095,1.06552192 0.114123095,2.07266432 C0.114123095,3.07951232 0.925567561,3.89588352 1.92633931,3.89588352"})}),t.jsx("polygon",{points:"21.5383931 7.98168448 16.9295759 7.98168448 16.9295759 9.94386048 19.3238199 9.94386048 19.3238199 21.6963085 21.5383931 21.6963085"}),t.jsx("path",{d:"M7.29729404,11.302016 L2.31918612,11.302016 L2.31918612,2.7337984 L7.29729404,2.7337984 C9.71202167,2.7337984 11.0952521,4.7592704 11.0952521,7.0179072 C11.0952521,9.2762496 9.71202167,11.302016 7.29729404,11.302016 M7.29729404,0.5066624 L0.000146311661,0.5066624 L0.000146311661,21.6963968 L2.31918612,21.6963968 L2.31918612,13.5294464 L7.29729404,13.529152 C11.1508505,13.529152 13.5029568,10.4988928 13.5029568,7.0179072 C13.5029568,3.5369216 11.1508505,0.5066624 7.29729404,0.5066624"}),t.jsx("g",{transform:"translate(37.748408, 7.699532)",children:t.jsx("path",{d:"M6.82549746,12.1160909 C4.02977426,12.1160909 2.42853946,9.76295168 2.42853946,7.13955328 C2.42853946,4.51615488 4.02977426,2.16301568 6.82549746,2.16301568 C9.62151328,2.16301568 11.2227481,4.51615488 11.2227481,7.13955328 C11.2227481,9.76295168 9.62151328,12.1160909 6.82549746,12.1160909 M6.82549746,0.14725888 C2.68751109,0.14725888 0.162171844,3.40126208 0.162171844,7.13925888 C0.162171844,10.8772557 2.68751109,14.1312589 6.82549746,14.1312589 C10.9634838,14.1312589 13.4891157,10.8772557 13.4891157,7.13925888 C13.4891157,3.40126208 10.9634838,0.14725888 6.82549746,0.14725888"})}),t.jsx("path",{d:"M34.1280433,19.68064 C32.2909541,19.68064 30.7810178,18.978496 30.7810178,16.0721792 L30.7810178,0.5066624 L26.164007,0.5066624 L26.164007,2.521536 L28.5655666,2.521536 L28.5670297,16.0721792 C28.5670297,20.4705152 31.1222165,21.6952192 34.1280433,21.6952192 L36.0798408,21.6963968 L36.0798408,19.6812288 L34.1280433,19.68064 Z"}),t.jsx("g",{transform:"translate(53.257444, 3.283532)",children:t.jsx("path",{d:"M5.28723519,6.71323264 L10.5939591,6.71323264 L10.5939591,4.69806464 L5.28723519,4.69806464 L5.28723519,0.02240384 L3.72052994,0.02240384 L3.07236928,4.69806464 L0.230118979,4.69806464 L0.230118979,6.71323264 L3.07353978,6.71323264 L3.07353978,12.788471 C3.07353978,17.186807 5.62843398,18.4118054 8.63426072,18.4118054 L10.5860583,18.412983 L10.5860583,16.397815 L8.63426072,16.3972262 C6.79717152,16.3972262 5.28723519,15.6947878 5.28723519,12.788471 L5.28723519,6.71323264 Z"})})]})})})}function bt({type:e="status",status:s,icon:n,size:r="md",className:a=""}){const i=`inline-flex items-center rounded-full font-medium ${{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"}[r]}`,c={new:"bg-blue-100 text-blue-800",reviewing:"bg-yellow-100 text-yellow-800",scheduled:"bg-cyan-100 text-cyan-800",confirmed:"bg-green-100 text-green-800",installing:"bg-orange-100 text-orange-800",completed:"bg-gray-100 text-gray-800",normal:"bg-gray-100 text-gray-700",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[s.toLowerCase()]||"bg-gray-100 text-gray-800",m=`${i} ${c} ${a}`,j=y=>y.split("-").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ");return t.jsxs("span",{className:m,children:[n&&t.jsx("span",{className:"mr-1.5",children:n}),j(s)]})}function Oc(e){const s=[];let n=100;const r=new Date,a=new Date(e.focDate),l=new Date(e.lastCustomerContact),i=Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24));if(i<0){const f=Math.abs(i),d=Math.min(30,f*5);n-=d,s.push({name:"FOC Date",impact:"negative",points:-d,description:`${f} day${f!==1?"s":""} past FOC date`})}else i<=2?(n-=15,s.push({name:"FOC Date",impact:"negative",points:-15,description:`FOC date is ${i===0?"today":`in ${i} day${i!==1?"s":""}`}`})):i<=5?(n-=5,s.push({name:"FOC Date",impact:"negative",points:-5,description:`FOC date in ${i} days`})):s.push({name:"FOC Date",impact:"positive",points:0,description:`FOC date in ${i} days`});const o=Math.floor((r.getTime()-l.getTime())/(1e3*60*60*24));if(o>7){const f=Math.min(25,(o-7)*5);n-=f,s.push({name:"Customer Contact",impact:"negative",points:-f,description:`No contact in ${o} days`})}else o>3?(n-=5,s.push({name:"Customer Contact",impact:"negative",points:-5,description:`Last contact ${o} days ago`})):s.push({name:"Customer Contact",impact:"positive",points:0,description:o===0?"Contacted today":`Last contact ${o} day${o!==1?"s":""} ago`});const c=e.blockers.filter(f=>!f.resolvedAt).length;if(c>0){const f=Math.min(20,c*10);n-=f,s.push({name:"Blockers",impact:"negative",points:-f,description:`${c} active blocker${c!==1?"s":""}`})}else s.push({name:"Blockers",impact:"positive",points:0,description:"No active blockers"});const m=e.tasks.length,j=e.tasks.filter(f=>f.completed).length,y=m>0?j/m*100:100;y<25?(n-=15,s.push({name:"Task Progress",impact:"negative",points:-15,description:`Only ${Math.round(y)}% tasks complete`})):y<50?(n-=10,s.push({name:"Task Progress",impact:"negative",points:-10,description:`${Math.round(y)}% tasks complete`})):y<75?(n-=5,s.push({name:"Task Progress",impact:"neutral",points:-5,description:`${Math.round(y)}% tasks complete`})):s.push({name:"Task Progress",impact:"positive",points:0,description:`${Math.round(y)}% tasks complete`});const h=e.readinessTasks.filter(f=>f.critical),v=h.filter(f=>f.completed).length,g=h.length>0?v/h.length*100:100;g<50?(n-=15,s.push({name:"Install Readiness",impact:"negative",points:-15,description:`Only ${v}/${h.length} critical items ready`})):g<100?(n-=8,s.push({name:"Install Readiness",impact:"negative",points:-8,description:`${v}/${h.length} critical items ready`})):s.push({name:"Install Readiness",impact:"positive",points:0,description:"All critical items ready"}),e.isEscalated&&(n-=10,s.push({name:"Escalation",impact:"negative",points:-10,description:"Project is escalated"})),e.status==="confirmed"||e.status==="installing"?(n+=5,s.push({name:"Status",impact:"positive",points:5,description:`Project is ${e.status}`})):e.status==="completed"&&(n=100,s.length=0,s.push({name:"Status",impact:"positive",points:100,description:"Project completed"})),n=Math.max(0,Math.min(100,n));let p;return n>=80?p="healthy":n>=60?p="needs-attention":n>=40?p="at-risk":p="critical",{score:n,level:p,factors:s}}function di(e){switch(e){case"healthy":return"text-green-600";case"needs-attention":return"text-yellow-600";case"at-risk":return"text-orange-600";case"critical":return"text-red-600"}}function ju(e){switch(e){case"healthy":return"bg-green-100";case"needs-attention":return"bg-yellow-100";case"at-risk":return"bg-orange-100";case"critical":return"bg-red-100"}}function Ay(e){switch(e){case"healthy":return"Healthy";case"needs-attention":return"Needs Attention";case"at-risk":return"At Risk";case"critical":return"Critical"}}function Py(e,s,n){const r=[],a=new Date;e.forEach(i=>{if(i.status==="completed")return;const o=n(i.customerId),c=new Date(i.focDate),m=Math.floor((c.getTime()-a.getTime())/(1e3*60*60*24));m<0?r.push({id:`foc-overdue-${i.id}`,type:"foc_overdue",priority:"urgent",title:"FOC Date Passed",description:`${Math.abs(m)} day${Math.abs(m)!==1?"s":""} past FOC`,projectId:i.id,projectName:o,timestamp:i.focDate,actionLabel:"View Project",actionUrl:`/projects/${i.id}`}):m<=2&&m>=0&&r.push({id:`foc-approaching-${i.id}`,type:"foc_approaching",priority:"high",title:"FOC Date Approaching",description:m===0?"FOC is today!":`FOC in ${m} day${m!==1?"s":""}`,projectId:i.id,projectName:o,timestamp:i.focDate,actionLabel:"View Project",actionUrl:`/projects/${i.id}`}),i.isEscalated&&r.push({id:`escalated-${i.id}`,type:"escalated",priority:"urgent",title:"Escalated Project",description:i.escalationReason||"Requires immediate attention",projectId:i.id,projectName:o,timestamp:i.escalatedAt||i.updatedAt,actionLabel:"View Project",actionUrl:`/projects/${i.id}`});const j=new Date(i.lastCustomerContact),y=Math.floor((a.getTime()-j.getTime())/(1e3*60*60*24));y>5&&r.push({id:`no-contact-${i.id}`,type:"no_contact",priority:y>7?"high":"normal",title:"No Recent Contact",description:`${y} days since last customer contact`,projectId:i.id,projectName:o,timestamp:i.lastCustomerContact,actionLabel:"Log Communication",actionUrl:`/projects/${i.id}?tab=activity`}),i.communicationLog&&i.communicationLog.forEach(v=>{if(v.followUpRequired&&v.followUpDate){const g=new Date(v.followUpDate),p=Math.floor((g.getTime()-a.getTime())/(1e3*60*60*24));p<=1&&r.push({id:`follow-up-${v.id}`,type:"follow_up_due",priority:p<0?"high":"normal",title:"Follow-up Due",description:p<0?`Follow-up with ${v.contactName} is overdue`:p===0?`Follow-up with ${v.contactName} due today`:`Follow-up with ${v.contactName} due tomorrow`,projectId:i.id,projectName:o,timestamp:v.followUpDate,actionLabel:"View Activity",actionUrl:`/projects/${i.id}?tab=activity`})}}),i.tasks.forEach(v=>{if(!v.completed&&v.dueDate){const g=new Date(v.dueDate),p=Math.floor((g.getTime()-a.getTime())/(1e3*60*60*24));p<0&&r.push({id:`task-overdue-${v.id}`,type:"task_overdue",priority:"normal",title:"Task Overdue",description:`"${v.title}" is ${Math.abs(p)} day${Math.abs(p)!==1?"s":""} overdue`,projectId:i.id,projectName:o,timestamp:v.dueDate,actionLabel:"View Tasks",actionUrl:`/projects/${i.id}?tab=tasks`})}});const h=Oc(i);h.level==="critical"&&r.push({id:`health-${i.id}`,type:"low_health",priority:"high",title:"Critical Health Score",description:`Health score is ${h.score} - needs immediate attention`,projectId:i.id,projectName:o,timestamp:i.updatedAt,actionLabel:"View Project",actionUrl:`/projects/${i.id}`})}),s.forEach(i=>{if(i.requiresResponse&&(i.status==="open"||i.status==="pending")){const o=e.find(c=>c.id===i.projectId);if(o&&o.status!=="completed"){const c=n(o.customerId);r.push({id:`ticket-response-${i.id}`,type:"ticket_needs_response",priority:i.priority==="urgent"?"urgent":i.priority==="high"?"high":"normal",title:"Response Needed",description:i.subject,projectId:o.id,projectName:c,timestamp:i.updatedAt,actionLabel:"View Ticket",actionUrl:`/projects/${o.id}?tab=tickets`})}}});const l={urgent:0,high:1,normal:2};return r.sort((i,o)=>{const c=l[i.priority]-l[o.priority];return c!==0?c:new Date(o.timestamp).getTime()-new Date(i.timestamp).getTime()})}function Ey(e){switch(e){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"normal":return"text-blue-600 bg-blue-100"}}const Ry={foc_approaching:t.jsx(me,{className:"w-4 h-4"}),foc_overdue:t.jsx(me,{className:"w-4 h-4"}),ticket_needs_response:t.jsx(le,{className:"w-4 h-4"}),follow_up_due:t.jsx(Oe,{className:"w-4 h-4"}),escalated:t.jsx(te,{className:"w-4 h-4"}),task_overdue:t.jsx(Mn,{className:"w-4 h-4"}),low_health:t.jsx(Fn,{className:"w-4 h-4"}),no_contact:t.jsx(Ty,{className:"w-4 h-4"})};function My(){const e=Ve(),{state:s,getCustomer:n}=Se(),[r,a]=b.useState(!1),[l,i]=b.useState(()=>{const d=localStorage.getItem("dismissed-notifications");return d?new Set(JSON.parse(d)):new Set}),o=b.useRef(null),c=d=>{const x=n(d);return(x==null?void 0:x.companyName)||"Unknown Customer"},m=Py(s.projects,s.tickets,c),j=m.filter(d=>!l.has(d.id)),y=j.filter(d=>d.priority==="urgent").length,h=j.filter(d=>d.priority==="high").length;b.useEffect(()=>{function d(x){o.current&&!o.current.contains(x.target)&&a(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),b.useEffect(()=>{localStorage.setItem("dismissed-notifications",JSON.stringify([...l]))},[l]);const v=(d,x)=>{x.stopPropagation(),i(u=>new Set([...u,d]))},g=()=>{i(new Set(m.map(d=>d.id)))},p=d=>{d.actionUrl&&e(d.actionUrl),a(!1)},f=d=>{const x=new Date(d),w=Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60*24));return w===0?"Today":w===1?"Yesterday":w<7?`${w} days ago`:x.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>a(!r),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Notifications",children:[t.jsx(Ke,{className:"w-5 h-5"}),j.length>0&&t.jsx("span",{className:`absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] flex items-center justify-center text-xs font-bold rounded-full ${y>0?"bg-red-500 text-white":h>0?"bg-orange-500 text-white":"bg-blue-500 text-white"}`,children:j.length>99?"99+":j.length})]}),r&&t.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden z-50",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-200",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),j.length>0&&t.jsx("button",{onClick:g,className:"text-xs text-gray-500 hover:text-gray-700",children:"Dismiss all"})]}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:j.length===0?t.jsxs("div",{className:"py-12 text-center text-gray-500",children:[t.jsx(Ke,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"font-medium",children:"All caught up!"}),t.jsx("p",{className:"text-sm",children:"No notifications at this time."})]}):t.jsx("ul",{className:"divide-y divide-gray-100",children:j.slice(0,20).map(d=>t.jsx("li",{onClick:()=>p(d),className:"px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors group",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${Ey(d.priority)}`,children:Ry[d.type]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.projectName}),t.jsx("p",{className:"text-sm font-medium text-gray-700",children:d.title})]}),t.jsx("button",{onClick:x=>v(d.id,x),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 rounded transition-opacity","aria-label":"Dismiss",children:t.jsx(mt,{className:"w-3 h-3 text-gray-400"})})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:d.description}),t.jsxs("div",{className:"flex items-center justify-between mt-1",children:[t.jsx("span",{className:"text-xs text-gray-400",children:f(d.timestamp)}),d.actionLabel&&t.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.actionLabel,t.jsx(Lt,{className:"w-3 h-3"})]})]})]})]})},d.id))})}),j.length>20&&t.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200 text-center",children:t.jsxs("span",{className:"text-sm text-gray-500",children:["+",j.length-20," more notifications"]})})]})]})}const Oy={cxa:{canViewAllProjects:!1,canEditAllProjects:!1,canAssignProjects:!1,canDeleteProjects:!1,canManageTeam:!1,canViewReports:!1,canExportData:!1,canManageTickets:!0,canEscalate:!0,canChangeSettings:!1},senior_cxa:{canViewAllProjects:!0,canEditAllProjects:!0,canAssignProjects:!0,canDeleteProjects:!1,canManageTeam:!1,canViewReports:!0,canExportData:!0,canManageTickets:!0,canEscalate:!0,canChangeSettings:!1},manager:{canViewAllProjects:!0,canEditAllProjects:!0,canAssignProjects:!0,canDeleteProjects:!0,canManageTeam:!0,canViewReports:!0,canExportData:!0,canManageTickets:!0,canEscalate:!0,canChangeSettings:!0},admin:{canViewAllProjects:!0,canEditAllProjects:!0,canAssignProjects:!0,canDeleteProjects:!0,canManageTeam:!0,canViewReports:!0,canExportData:!0,canManageTickets:!0,canEscalate:!0,canChangeSettings:!0}},Us={emailNewAssignment:!0,emailTicketResponse:!0,emailEscalation:!0,emailFocReminder:!0,emailDailyDigest:!1,slackEnabled:!0,slackNewAssignment:!0,slackTicketResponse:!0,slackEscalation:!0,slackFocReminder:!1,slackMentions:!0,inAppNewAssignment:!0,inAppTicketResponse:!0,inAppEscalation:!0,inAppFocReminder:!0,inAppStatusChange:!0,inAppMentions:!0,pushUrgentOnly:!0,quietHoursEnabled:!1,quietHoursStart:"22:00",quietHoursEnd:"08:00",digestTime:"08:00"},re=[{id:"tm-1",name:"Sarah Chen",email:"sarah.chen@pilotfiber.com",role:"senior_cxa",phone:"212-555-1001",title:"Senior CX Associate",department:"Customer Experience",startDate:"2022-03-15",timezone:"America/New_York",notificationPreferences:{...Us,emailDailyDigest:!0},isActive:!0},{id:"tm-2",name:"Marcus Johnson",email:"marcus.johnson@pilotfiber.com",role:"cxa",phone:"212-555-1002",title:"CX Associate",department:"Customer Experience",startDate:"2023-06-01",timezone:"America/New_York",notificationPreferences:Us,isActive:!0},{id:"tm-3",name:"Emily Rodriguez",email:"emily.rodriguez@pilotfiber.com",role:"cxa",phone:"212-555-1003",title:"CX Associate",department:"Customer Experience",startDate:"2023-08-15",timezone:"America/New_York",notificationPreferences:{...Us,quietHoursEnabled:!0},isActive:!0},{id:"tm-4",name:"David Kim",email:"david.kim@pilotfiber.com",role:"cxa",phone:"212-555-1004",title:"CX Associate",department:"Customer Experience",startDate:"2024-01-08",timezone:"America/New_York",notificationPreferences:Us,isActive:!0},{id:"tm-5",name:"Alex Thompson",email:"alex.thompson@pilotfiber.com",role:"manager",phone:"212-555-1005",title:"CX Manager",department:"Customer Experience",startDate:"2021-09-01",timezone:"America/New_York",notificationPreferences:{...Us,emailEscalation:!0,inAppEscalation:!0},isActive:!0},{id:"tm-6",name:"Jessica Martinez",email:"jessica.martinez@pilotfiber.com",role:"admin",phone:"212-555-1006",title:"Director of Customer Experience",department:"Customer Experience",startDate:"2020-01-15",timezone:"America/New_York",notificationPreferences:{...Us,emailDailyDigest:!0,inAppStatusChange:!1},isActive:!0}],G=re[0];function $y(e){return Oy[e.role]}const yo={cxa:"CX Associate",senior_cxa:"Senior CX Associate",manager:"CX Manager",admin:"Administrator"};function Ly(){const e=Ve(),{state:s,getCustomer:n,getBuilding:r}=Se(),[a,l]=b.useState(""),[i,o]=b.useState(!1),[c,m]=b.useState(!1),j=b.useRef(null),y=b.useRef(null);b.useEffect(()=>{const f=d=>{j.current&&!j.current.contains(d.target)&&o(!1),y.current&&!y.current.contains(d.target)&&m(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const v=(()=>{if(!a.trim()||a.length<2)return[];const f=a.toLowerCase(),d=[];s.projects.forEach(u=>{var k;const w=n(u.customerId),N=r(u.buildingId);(u.serviceOrderId.toLowerCase().includes(f)||u.product.toLowerCase().includes(f)||u.serviceBandwidth.toLowerCase().includes(f)||(w==null?void 0:w.companyName.toLowerCase().includes(f))||(N==null?void 0:N.address.toLowerCase().includes(f))||((k=u.cxAssignee)==null?void 0:k.toLowerCase().includes(f)))&&d.push({type:"project",id:u.id,title:(w==null?void 0:w.companyName)||"Unknown Customer",subtitle:`${u.product}  ${(N==null?void 0:N.address)||""}`,status:u.status}),u.tasks.forEach(I=>{I.title.toLowerCase().includes(f)&&d.push({type:"task",id:I.id,projectId:u.id,title:I.title,subtitle:`${w==null?void 0:w.companyName}  ${I.section}`,status:I.completed?"completed":"pending"})})}),s.customers.forEach(u=>{if(u.companyName.toLowerCase().includes(f)||u.contacts.some(N=>N.name.toLowerCase().includes(f)||N.email.toLowerCase().includes(f))){const N=s.projects.filter(C=>C.customerId===u.id);N.length>0&&d.push({type:"customer",id:u.id,projectId:N[0].id,title:u.companyName,subtitle:`${N.length} project${N.length>1?"s":""}`})}});const x=new Set;return d.filter(u=>{const w=`${u.type}-${u.id}`;return x.has(w)?!1:(x.add(w),!0)}).slice(0,10)})(),g=f=>{l(""),o(!1),f.type==="task"&&f.projectId?e(`/projects/${f.projectId}?tab=tasks`):f.type==="customer"&&f.projectId?e(`/projects/${f.projectId}`):e(`/projects/${f.id}`)},p=f=>{switch(f){case"project":return t.jsx(Tt,{className:"w-4 h-4 text-gray-400"});case"customer":return t.jsx(Le,{className:"w-4 h-4 text-gray-400"});case"task":return t.jsx(Gt,{className:"w-4 h-4 text-gray-400"});default:return t.jsx(Tt,{className:"w-4 h-4 text-gray-400"})}};return t.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsx(Iy,{}),t.jsx("span",{className:"text-lg font-semibold text-pilot-secondary",children:"CX Onboarding"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative",ref:j,children:[t.jsx(_r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search or press K...",value:a,onChange:f=>l(f.target.value),onFocus:()=>o(!0),className:"pl-10 pr-16 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 w-80"}),!a&&t.jsx("kbd",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200",children:"K"}),a&&t.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(mt,{className:"w-4 h-4"})}),i&&a.length>=2&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:v.length===0?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx(_r,{className:"w-6 h-6 mx-auto mb-2 text-gray-300"}),t.jsxs("p",{className:"text-sm",children:['No results found for "',a,'"']})]}):t.jsx("ul",{children:v.map((f,d)=>t.jsx("li",{children:t.jsxs("button",{onClick:()=>g(f),className:"w-full px-4 py-3 flex items-start gap-3 hover:bg-gray-50 text-left border-b border-gray-100 last:border-0",children:[t.jsx("div",{className:"mt-0.5",children:p(f.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:f.title}),t.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded capitalize",children:f.type})]}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:f.subtitle})]}),f.status&&t.jsx(bt,{status:f.status,size:"sm"})]})},`${f.type}-${f.id}-${d}`))})})]}),t.jsx(My,{}),t.jsxs("div",{className:"relative",ref:y,children:[t.jsxs("button",{onClick:()=>m(!c),className:"flex items-center gap-2 hover:bg-gray-100 rounded-lg px-2 py-1.5 transition-colors",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-pilot-primary flex items-center justify-center text-sm font-semibold text-pilot-secondary",children:G.name.split(" ").map(f=>f[0]).join("")}),t.jsxs("div",{className:"hidden md:block text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:G.name}),t.jsx("p",{className:"text-xs text-gray-500",children:yo[G.role]})]}),t.jsx(ke,{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-180":""}`})]}),c&&t.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[t.jsxs("div",{className:"p-3 border-b border-gray-100",children:[t.jsx("p",{className:"font-medium text-gray-900",children:G.name}),t.jsx("p",{className:"text-sm text-gray-500",children:G.email})]}),t.jsxs("div",{className:"py-1",children:[t.jsxs("button",{onClick:()=>{e("/profile"),m(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[t.jsx(Le,{className:"w-4 h-4"}),"My Profile"]}),t.jsxs("button",{onClick:()=>{e("/profile"),m(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[t.jsx(Pl,{className:"w-4 h-4"}),"Settings"]})]}),t.jsx("div",{className:"border-t border-gray-100 py-1",children:t.jsxs("button",{onClick:()=>{alert("Logout functionality would go here")},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[t.jsx(ry,{className:"w-4 h-4"}),"Log Out"]})})]})]})]})]})}const _y=[{path:"/",icon:wh,label:"Dashboard"},{path:"/my-day",icon:kh,label:"My Day"},{path:"/projects",icon:Tc,label:"Projects"},{path:"/tasks",icon:Mn,label:"My Tasks"}],Fy=[{id:"all",icon:ty,label:"All Tickets",filter:""},{id:"mine",icon:Le,label:"My Tickets",filter:"assignee:mine"},{id:"unassigned",icon:vt,label:"Unassigned",filter:"assignee:none"},{id:"urgent",icon:se,label:"Urgent",filter:"priority:urgent"}],Uy=[{id:"billing",label:"Billing"},{id:"technical",label:"Technical"},{id:"scheduling",label:"Scheduling"},{id:"general",label:"General"},{id:"complaint",label:"Complaint"},{id:"change-request",label:"Change Request"}],By=[{path:"/calendar",icon:me,label:"Calendar"},{path:"/team",icon:Je,label:"Team Workload"},{path:"/reports",icon:$r,label:"Reports"},{path:"/playbooks",icon:xr,label:"Playbooks"}];function zy(){const{state:e}=Se(),s=$s(),[n,r]=b.useState(s.pathname.startsWith("/tickets")),[a,l]=b.useState(!1),i=e.tickets.filter(g=>g.status==="open"||g.status==="pending").length,o=e.projects.filter(g=>g.status!=="completed").length,c=e.projects.reduce((g,p)=>g+p.tasks.filter(f=>f.assignee===G.name&&!f.completed).length,0),m=g=>{switch(g){case"all":return e.tickets.filter(p=>p.status!=="closed").length;case"mine":return e.tickets.filter(p=>p.assignee===G.name&&p.status!=="closed").length;case"unassigned":return e.tickets.filter(p=>!p.assignee&&p.status!=="closed").length;case"urgent":return e.tickets.filter(p=>p.priority==="urgent"&&p.status!=="closed").length;default:return 0}},j=g=>e.tickets.filter(p=>p.category===g&&p.status!=="closed").length,y=g=>{switch(g){case"/tickets":return i;case"/projects":return o;case"/tasks":return c;default:return 0}},h=g=>{const f=new URLSearchParams(s.search).get("view")||"all";return s.pathname==="/tickets"&&f===g},v=g=>{const p=new URLSearchParams(s.search);return s.pathname==="/tickets"&&p.get("category")===g};return t.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[t.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:t.jsxs("ul",{className:"space-y-1",children:[_y.map(g=>{const p=y(g.path);return t.jsx("li",{children:t.jsxs(Qn,{to:g.path,className:({isActive:f})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${f?"bg-pilot-primary text-pilot-secondary font-semibold":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(g.icon,{className:"w-5 h-5"}),t.jsx("span",{className:"flex-1",children:g.label}),p>0&&t.jsx("span",{className:"bg-pilot-secondary text-white text-xs font-bold px-2 py-0.5 rounded-full",children:p})]})},g.path)}),t.jsxs("li",{children:[t.jsxs("button",{onClick:()=>r(!n),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${s.pathname==="/tickets"?"bg-pilot-primary text-pilot-secondary font-semibold":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(cl,{className:"w-5 h-5"}),t.jsx("span",{className:"flex-1 text-left",children:"Tickets"}),i>0&&t.jsx("span",{className:"bg-pilot-secondary text-white text-xs font-bold px-2 py-0.5 rounded-full mr-1",children:i}),n?t.jsx(ke,{className:"w-4 h-4"}):t.jsx(Lt,{className:"w-4 h-4"})]}),n&&t.jsxs("ul",{className:"ml-4 mt-1 space-y-0.5",children:[Fy.map(g=>{const p=m(g.id),f=h(g.id);return t.jsx("li",{children:t.jsxs(Qn,{to:`/tickets${g.id==="all"?"":`?view=${g.id}`}`,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors text-sm ${f?"bg-gray-100 text-gray-900 font-medium":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:[t.jsx(g.icon,{className:"w-4 h-4"}),t.jsx("span",{className:"flex-1",children:g.label}),p>0&&t.jsx("span",{className:"text-xs text-gray-400",children:p})]})},g.id)}),t.jsxs("li",{children:[t.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg text-gray-500 hover:bg-gray-50 hover:text-gray-700 transition-colors text-sm",children:[t.jsx(Rc,{className:"w-4 h-4"}),t.jsx("span",{className:"flex-1 text-left",children:"Categories"}),a?t.jsx(ke,{className:"w-3 h-3"}):t.jsx(Lt,{className:"w-3 h-3"})]}),a&&t.jsx("ul",{className:"ml-4 mt-0.5 space-y-0.5",children:Uy.map(g=>{const p=j(g.id),f=v(g.id);return t.jsx("li",{children:t.jsxs(Qn,{to:`/tickets?category=${g.id}`,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors text-xs ${f?"bg-gray-100 text-gray-900 font-medium":"text-gray-400 hover:bg-gray-50 hover:text-gray-600"}`,children:[t.jsx("span",{className:"flex-1",children:g.label}),p>0&&t.jsx("span",{className:"text-gray-300",children:p})]})},g.id)})})]})]})]}),By.map(g=>t.jsx("li",{children:t.jsxs(Qn,{to:g.path,className:({isActive:p})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${p?"bg-pilot-primary text-pilot-secondary font-semibold":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(g.icon,{className:"w-5 h-5"}),t.jsx("span",{className:"flex-1",children:g.label})]})},g.path))]})}),t.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-1",children:[t.jsxs("button",{onClick:()=>{window.dispatchEvent(new KeyboardEvent("keydown",{key:"?"}))},className:"w-full flex items-center gap-3 px-4 py-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors text-sm",children:[t.jsx(sy,{className:"w-4 h-4"}),t.jsx("span",{className:"flex-1 text-left",children:"Shortcuts"}),t.jsx("kbd",{className:"text-xs bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200",children:"?"})]}),t.jsxs(Qn,{to:"/settings",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",children:[t.jsx(Pl,{className:"w-5 h-5"}),t.jsx("span",{children:"Settings"})]})]})]})}function qy({children:e}){return t.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[t.jsx(Ly,{}),t.jsxs("div",{className:"flex flex-1",children:[t.jsx(zy,{}),t.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e})]})]})}const Hy={yellow:"bg-pilot-primary text-pilot-secondary",blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",gray:"bg-gray-100 text-gray-600"};function Ht({title:e,value:s,icon:n,trend:r,color:a="yellow"}){return t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:e}),t.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:s}),r&&t.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[r.value>=0?t.jsx(Is,{className:"w-4 h-4 text-green-500"}):t.jsx(Fr,{className:"w-4 h-4 text-red-500"}),t.jsxs("span",{className:`text-sm ${r.value>=0?"text-green-600":"text-red-600"}`,children:[r.value>0?"+":"",r.value,"%"]}),t.jsx("span",{className:"text-sm text-gray-500",children:r.label})]})]}),t.jsx("div",{className:`p-3 rounded-lg ${Hy[a]}`,children:n})]})})}function vo({deadline:e,className:s="",showLabel:n=!0}){const r=new Date,i=(new Date(e).getTime()-r.getTime())/(1e3*60*60);let o,c,m;if(i<0){const j=Math.abs(Math.floor(i));o=j<24?`${j}h overdue`:`${Math.floor(j/24)}d overdue`,c="text-red-600 bg-red-50",m=te}else i<=24?(o=i<1?`${Math.floor(i*60)}m remaining`:`${Math.floor(i)}h remaining`,c="text-yellow-700 bg-yellow-50",m=se):(o=`${Math.floor(i/24)}d remaining`,c="text-green-600 bg-green-50",m=Pe);return t.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-md ${c} ${s}`,children:[t.jsx(m,{className:"w-4 h-4"}),n&&t.jsx("span",{className:"text-sm font-medium",children:o})]})}function U({variant:e="primary",size:s="md",disabled:n=!1,children:r,className:a="",...l}){const i="inline-flex items-center justify-center rounded-full font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-pilot-primary focus:ring-offset-2",o={primary:"bg-black text-white hover:bg-gray-800 disabled:bg-gray-400",secondary:"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-100",danger:"bg-transparent text-red-600 hover:bg-red-50",link:"bg-transparent text-blue-600 hover:underline"},c={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},m=`${i} ${o[e]} ${c[s]} ${a}`;return t.jsx("button",{className:m,disabled:n,...l,children:r})}function $c({columns:e,data:s,onRowClick:n,className:r="",emptyMessage:a="No data available"}){return t.jsxs("div",{className:`rounded-lg overflow-hidden shadow-sm ${r}`,children:[t.jsx("div",{className:"rounded-t-lg overflow-hidden",style:{background:"#FFE200"},children:t.jsx("div",{className:"grid gap-4 px-6 py-4 text-sm font-bold",style:{color:"#18284F",gridTemplateColumns:e.map(l=>l.width||"1fr").join(" ")},children:e.map((l,i)=>t.jsx("div",{children:l.label},i))})}),t.jsx("div",{className:"bg-white rounded-b-lg",children:s.length===0?t.jsx("div",{className:"text-center py-12 text-gray-500",children:a}):s.map((l,i)=>t.jsx("div",{className:`
                grid gap-4 px-6 py-4 border-b border-gray-200
                last:border-b-0 text-sm
                ${n?"hover:bg-gray-50 cursor-pointer transition-colors":""}
              `,style:{gridTemplateColumns:e.map(o=>o.width||"1fr").join(" ")},onClick:()=>n==null?void 0:n(l),role:n?"button":void 0,tabIndex:n?0:void 0,onKeyDown:o=>o.key==="Enter"&&(n==null?void 0:n(l)),children:e.map((o,c)=>t.jsx("div",{className:"flex items-center",children:o.render?o.render(l):String(l[o.key]??"")},c))},i))})]})}function T({children:e,borderColor:s="",className:n="",onClick:r}){const l=`bg-white rounded-lg shadow p-6 ${s} ${n}`;return t.jsx("div",{className:l,onClick:r,children:e})}function Br({project:e,showDetails:s=!1,size:n="md"}){const[r,a]=b.useState(!1),{score:l,level:i,factors:o}=Oc(e),c={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},m={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},j=y=>{switch(y.impact){case"positive":return t.jsx(Is,{className:"w-3 h-3 text-green-500"});case"negative":return t.jsx(Fr,{className:"w-3 h-3 text-red-500"});default:return t.jsx(Lr,{className:"w-3 h-3 text-gray-400"})}};return s?t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>a(!r),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${ju(i)}`,children:t.jsx("span",{className:`text-lg font-bold ${di(i)}`,children:l})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:"Health Score"}),t.jsx("p",{className:`text-sm font-medium ${di(i)}`,children:Ay(i)})]})]}),r?t.jsx(ut,{className:"w-5 h-5 text-gray-400"}):t.jsx(ke,{className:"w-5 h-5 text-gray-400"})]}),r&&t.jsxs("div",{className:"border-t border-gray-200 p-3",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Score Breakdown"}),t.jsx("div",{className:"space-y-2",children:o.map((y,h)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[j(y),t.jsx("span",{className:"text-gray-700",children:y.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-500 text-xs",children:y.description}),y.points!==0&&t.jsxs("span",{className:`font-medium ${y.points>0?"text-green-600":"text-red-600"}`,children:[y.points>0?"+":"",y.points]})]})]},h))}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[t.jsx("span",{children:"Critical"}),t.jsx("span",{children:"Healthy"})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all duration-500 ${i==="healthy"?"bg-green-500":i==="needs-attention"?"bg-yellow-500":i==="at-risk"?"bg-orange-500":"bg-red-500"}`,style:{width:`${l}%`}})})]})]})]}):t.jsxs("span",{className:`inline-flex items-center gap-1.5 font-medium rounded-full ${c[n]} ${ju(i)} ${di(i)}`,children:[t.jsx(Fn,{className:m[n]}),l]})}function Wy(){const e=Ve(),{state:s,getCustomer:n,getBuilding:r}=Se(),a=s.projects.filter(v=>v.status!=="completed"),l=s.tickets.filter(v=>v.status==="open"||v.status==="pending"),i=s.projects.filter(v=>{if(!v.scheduledDate)return!1;const g=new Date(v.scheduledDate),p=new Date;return g.getDate()===p.getDate()&&g.getMonth()===p.getMonth()&&g.getFullYear()===p.getFullYear()}),o=s.projects.filter(v=>v.status==="completed"?!1:new Date(v.focDate)<new Date),c=s.projects.filter(v=>v.isEscalated&&v.status!=="completed"),m=a.map(v=>({project:v,health:Oc(v)})).filter(({health:v})=>v.level==="critical"||v.level==="at-risk").sort((v,g)=>v.health.score-g.health.score).slice(0,5),j=new Date;j.setDate(j.getDate()-7);const y=s.projects.filter(v=>new Date(v.createdAt)>=j&&v.status!=="completed").sort((v,g)=>new Date(g.createdAt).getTime()-new Date(v.createdAt).getTime()).slice(0,5),h=[{key:"customer",label:"Customer",width:"2fr",render:v=>{const g=n(v.customerId);return t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:g==null?void 0:g.companyName}),t.jsx("p",{className:"text-sm text-gray-500 font-mono",children:v.serviceOrderId})]})}},{key:"building",label:"Building",width:"2fr",render:v=>{const g=r(v.buildingId);return t.jsx("span",{className:"text-gray-700",children:g==null?void 0:g.address})}},{key:"status",label:"Status",width:"1fr",render:v=>t.jsx(bt,{status:v.status,size:"sm"})},{key:"foc",label:"FOC",width:"1fr",render:v=>t.jsx(vo,{deadline:v.focDate})}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's what's happening today."})]}),t.jsxs(U,{onClick:()=>e("/projects"),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsx(Ht,{title:"Active Projects",value:a.length,icon:t.jsx(Tc,{className:"w-6 h-6"}),color:"yellow"}),t.jsx(Ht,{title:"Open Tickets",value:l.length,icon:t.jsx(cl,{className:"w-6 h-6"}),color:"blue"}),t.jsx(Ht,{title:"Installing Today",value:i.length,icon:t.jsx(me,{className:"w-6 h-6"}),color:"green"}),t.jsx(Ht,{title:"Escalated",value:c.length,icon:t.jsx(hr,{className:"w-6 h-6"}),color:c.length>0?"red":"gray"}),t.jsx(Ht,{title:"Past FOC",value:o.length,icon:t.jsx(te,{className:"w-6 h-6"}),color:o.length>0?"red":"gray"})]}),m.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(Fn,{className:"w-5 h-5 text-orange-500"}),"Needs Attention"]}),t.jsxs("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:[m.length," project",m.length!==1?"s":""]})]}),t.jsx("div",{className:"grid grid-cols-5 gap-4",children:m.map(({project:v,health:g})=>{const p=n(v.customerId),f=g.factors.find(d=>d.impact==="negative");return t.jsxs("div",{onClick:()=>e(`/projects/${v.id}`),className:"p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors border border-gray-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("p",{className:"font-medium text-gray-900 text-sm truncate flex-1 mr-2",children:p==null?void 0:p.companyName}),t.jsx(Br,{project:v,size:"sm"})]}),t.jsx(bt,{status:v.status,size:"sm"}),f&&t.jsx("p",{className:"text-xs text-gray-500 mt-2 line-clamp-2",children:f.description})]},v.id)})})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsx("div",{className:"col-span-2",children:t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Handoffs"}),t.jsxs("button",{onClick:()=>e("/projects"),className:"text-sm text-blue-600 hover:underline flex items-center gap-1",children:["View all",t.jsx(ll,{className:"w-4 h-4"})]})]}),t.jsx($c,{columns:h,data:y,onRowClick:v=>e(`/projects/${v.id}`),emptyMessage:"No new handoffs in the last 7 days"})]})}),t.jsxs("div",{children:[t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(hr,{className:"w-5 h-5 text-red-500"}),"Escalated"]}),c.length>0&&t.jsxs("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:[c.length," active"]})]}),c.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(hr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No escalated projects"})]}):t.jsx("ul",{className:"space-y-3",children:c.slice(0,5).map(v=>{const g=n(v.customerId);return t.jsxs("li",{onClick:()=>e(`/projects/${v.id}`),className:"p-3 bg-red-50 border-l-4 border-red-500 rounded-lg cursor-pointer hover:bg-red-100 transition-colors",children:[t.jsx("p",{className:"font-medium text-gray-900",children:g==null?void 0:g.companyName}),v.escalationReason&&t.jsx("p",{className:"text-sm text-red-700 mt-1 line-clamp-2",children:v.escalationReason}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx(bt,{status:v.status,size:"sm"}),t.jsx("span",{className:"text-xs text-gray-500",children:v.escalatedBy})]})]},v.id)})})]}),t.jsxs(T,{className:"mt-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"FOC Alerts"}),o.length>0&&t.jsxs("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:[o.length," past FOC"]})]}),o.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(te,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No projects past FOC"})]}):t.jsx("ul",{className:"space-y-3",children:o.slice(0,5).map(v=>{const g=n(v.customerId);return t.jsxs("li",{onClick:()=>e(`/projects/${v.id}`),className:"p-3 bg-red-50 rounded-lg cursor-pointer hover:bg-red-100 transition-colors",children:[t.jsx("p",{className:"font-medium text-gray-900",children:g==null?void 0:g.companyName}),t.jsxs("div",{className:"flex items-center justify-between mt-1",children:[t.jsx(bt,{status:v.status,size:"sm"}),t.jsx(vo,{deadline:v.focDate})]})]},v.id)})})]}),t.jsxs(T,{className:"mt-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Open Tickets"}),t.jsxs("button",{onClick:()=>e("/tickets"),className:"text-sm text-blue-600 hover:underline flex items-center gap-1",children:["View all",t.jsx(ll,{className:"w-4 h-4"})]})]}),l.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(cl,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"All caught up!"})]}):t.jsx("ul",{className:"space-y-3",children:l.slice(0,3).map(v=>t.jsxs("li",{onClick:()=>e(`/projects/${v.projectId}?tab=tickets`),className:`p-3 rounded-lg cursor-pointer transition-colors ${v.status==="open"?"bg-blue-50 border-l-4 border-blue-500 hover:bg-blue-100":"bg-yellow-50 border-l-4 border-yellow-500 hover:bg-yellow-100"}`,children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:v.subject}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-600",children:[t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${v.status==="open"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:v.status}),v.requiresResponse&&t.jsx("span",{className:"text-red-600 text-xs",children:"Response needed"})]})]},v.id))})]})]})]})]})}const Ah={"standard-on-net":{id:"standard-on-net",name:"Standard On-Net",description:"Standard installation in existing network building",leadTimeDays:10,color:"bg-blue-100 text-blue-800",taskTemplates:[{id:"std-1",title:"Check sales order email for details",section:"Sales Hand Off"},{id:"std-2",title:"Confirm all customer details and fill out the Description section",section:"Sales Hand Off"},{id:"std-3",title:"Mark yourself as the CXA for the subscriber in Flight Deck",section:"Sales Hand Off"},{id:"std-4",title:"Check if customer is on ground floor or space is retail/fitness (requires survey)",section:"Survey Required",conditional:!0},{id:"std-5",title:"Add survey to install calendar (Mon/Wed/Fri at 9am or 11am)",section:"Survey Required",conditional:!0},{id:"std-6",title:"Create a CX-FO request in Site Tracker",section:"Survey Required",conditional:!0},{id:"std-7",title:"Complete the Riser Diagram & Survey Request form",section:"Survey Required",conditional:!0},{id:"std-8",title:"Coordinate access with the customer (if needed)",section:"Survey Required",conditional:!0},{id:"std-9",title:"Send reminder to customer the day before by 9:30am",section:"Survey Required",conditional:!0},{id:"std-10",title:"PE confirms install can be scheduled in Slack thread and CX-FO request",section:"Survey Required",conditional:!0,assignee:"PE"},{id:"std-11",title:"Share SOW with customer/building for approval (if needed)",section:"Survey Required",conditional:!0},{id:"std-12",title:"SOW is approved",section:"Survey Required",conditional:!0},{id:"std-13",title:"Attach SOW to the install card",section:"Survey Required",conditional:!0},{id:"std-14",title:"Mark CX-FO project in Site Tracker as Complete after PE moves to Closeout",section:"Survey Required",conditional:!0},{id:"std-15",title:"Verify port availability",section:"Scheduling"},{id:"std-16",title:"Propose install date to customer",section:"Scheduling"},{id:"std-17",title:"Customer confirms install date",section:"Scheduling"},{id:"std-18",title:"Add install to calendar",section:"Scheduling"},{id:"std-19",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"std-20",title:"Assign IP address",section:"Network Provisioning",assignee:"Network Ops"},{id:"std-21",title:"Send reminder to customer the day before by 9:30am",section:"Installation"},{id:"std-22",title:"Dispatch crew",section:"Installation"},{id:"std-23",title:"Receive install report",section:"Installation"},{id:"std-24",title:"Verify service is active",section:"Post-Install"},{id:"std-25",title:"Send customer survey",section:"Post-Install"}],approvals:[]},"new-build":{id:"new-build",name:"New Build",description:"New building construction installation",leadTimeDays:21,color:"bg-amber-100 text-amber-800",requiresSurvey:!0,taskTemplates:[{id:"nb-1",title:"Check sales order email for details",section:"Sales Hand Off"},{id:"nb-2",title:"Confirm all customer details and fill out the Description section",section:"Sales Hand Off"},{id:"nb-3",title:"Mark yourself as the CXA for the subscriber in Flight Deck",section:"Sales Hand Off"},{id:"nb-4",title:"Check if customer is on ground floor or space is retail/fitness (requires survey)",section:"New Build"},{id:"nb-5",title:"Add survey to install calendar (Mon/Wed/Fri at 9am or 11am) and change install type to Survey",section:"New Build"},{id:"nb-6",title:"Create a CX-FO request in Site Tracker",section:"New Build"},{id:"nb-7",title:"Complete the Riser Diagram & Survey Request form",section:"New Build"},{id:"nb-8",title:"Coordinate access with the customer (if needed)",section:"New Build"},{id:"nb-9",title:"Send reminder to customer the day before by 9:30am",section:"New Build"},{id:"nb-10",title:"PE confirms install can be scheduled in Slack thread and CX-FO request",section:"New Build",assignee:"PE"},{id:"nb-11",title:"Share SOW with customer/building for approval (if needed)",section:"New Build"},{id:"nb-12",title:"SOW is approved",section:"New Build"},{id:"nb-13",title:"Attach SOW to the install card",section:"New Build"},{id:"nb-14",title:"Mark CX-FO project in Site Tracker as Complete after PE moves to Closeout",section:"New Build"},{id:"nb-15",title:"If customer requests after-hours but building doesn't require it, request more information",section:"After Hours Process",conditional:!0},{id:"nb-16",title:"Ask customer for two available dates (Mon-Thu only) for after-hours install",section:"After Hours Process",conditional:!0},{id:"nb-17",title:"Complete the After Hours Install Request form",section:"After Hours Process",conditional:!0},{id:"nb-18",title:"Verify port availability",section:"Scheduling"},{id:"nb-19",title:"Propose install date to customer",section:"Scheduling"},{id:"nb-20",title:"Customer confirms install date",section:"Scheduling"},{id:"nb-21",title:"Add install to calendar",section:"Scheduling"},{id:"nb-22",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"nb-23",title:"Assign IP address",section:"Network Provisioning",assignee:"Network Ops"},{id:"nb-24",title:"Send reminder to customer the day before by 9:30am",section:"Installation"},{id:"nb-25",title:"Dispatch crew",section:"Installation"},{id:"nb-26",title:"Receive install report",section:"Installation"},{id:"nb-27",title:"Verify service is active",section:"Post-Install"},{id:"nb-28",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"nb-appr-1",name:"SOW Approval",role:"Customer/Building",required:!1}]},"after-hours":{id:"after-hours",name:"After Hours",description:"Installation requiring after-hours access",leadTimeDays:12,color:"bg-gray-700 text-white",taskTemplates:[{id:"ah-1",title:"Check sales order email for details",section:"Sales Hand Off"},{id:"ah-2",title:"Confirm all customer details and fill out the Description section",section:"Sales Hand Off"},{id:"ah-3",title:"Mark yourself as the CXA for the subscriber in Flight Deck",section:"Sales Hand Off"},{id:"ah-4",title:"Verify building requires after-hours install (or customer request)",section:"After Hours Process"},{id:"ah-5",title:"Ask customer for two available dates (Mon-Thu only)",section:"After Hours Process"},{id:"ah-6",title:"Verify no other after-hours installs scheduled for those days",section:"After Hours Process"},{id:"ah-7",title:"Complete the After Hours Install Request form",section:"After Hours Process"},{id:"ah-8",title:"Submit after-hours access request to building",section:"After Hours Process"},{id:"ah-9",title:"Receive building approval for after-hours access",section:"After Hours Process"},{id:"ah-10",title:"Verify port availability",section:"Scheduling"},{id:"ah-11",title:"Confirm after-hours install date with customer",section:"Scheduling"},{id:"ah-12",title:"Add install to calendar (after-hours slot)",section:"Scheduling"},{id:"ah-13",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"ah-14",title:"Assign IP address",section:"Network Provisioning",assignee:"Network Ops"},{id:"ah-15",title:"Confirm crew availability for after-hours",section:"Installation"},{id:"ah-16",title:"Send reminder to customer the day before",section:"Installation"},{id:"ah-17",title:"Dispatch crew",section:"Installation"},{id:"ah-18",title:"Receive install report",section:"Installation"},{id:"ah-19",title:"Verify service is active",section:"Post-Install"},{id:"ah-20",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"ah-appr-1",name:"After Hours Access Approval",role:"Building Management",required:!0}]},"contract-labor":{id:"contract-labor",name:"Contract Labor Required",description:"Installation requiring external contractor",leadTimeDays:15,color:"bg-orange-100 text-orange-800",requiresContractLabor:!0,taskTemplates:[{id:"cl-1",title:"Check sales order email for details",section:"Sales Hand Off"},{id:"cl-2",title:"Confirm all customer details and fill out the Description section",section:"Sales Hand Off"},{id:"cl-3",title:"Mark yourself as the CXA for the subscriber in Flight Deck",section:"Sales Hand Off"},{id:"cl-4",title:"Request contractor quote",section:"Contractor Coordination",assignee:"Operations"},{id:"cl-5",title:"Review contractor quote",section:"Contractor Coordination"},{id:"cl-6",title:"Approve contractor cost",section:"Contractor Coordination",assignee:"Manager"},{id:"cl-7",title:"Schedule contractor availability",section:"Contractor Coordination"},{id:"cl-8",title:"Verify port availability",section:"Scheduling"},{id:"cl-9",title:"Coordinate install date with contractor & customer",section:"Scheduling"},{id:"cl-10",title:"Confirm install date with all parties",section:"Scheduling"},{id:"cl-11",title:"Add install to calendar",section:"Scheduling"},{id:"cl-12",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"cl-13",title:"Assign IP address",section:"Network Provisioning",assignee:"Network Ops"},{id:"cl-14",title:"Send reminder to customer and contractor",section:"Installation"},{id:"cl-15",title:"Dispatch / confirm contractor",section:"Installation"},{id:"cl-16",title:"Receive install report",section:"Installation"},{id:"cl-17",title:"Verify service is active",section:"Post-Install"},{id:"cl-18",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"cl-appr-1",name:"Contractor Cost Approval",role:"Operations Manager",required:!0}]},montgomery:{id:"montgomery",name:"Montgomery",description:"Montgomery building installation",leadTimeDays:12,color:"bg-purple-100 text-purple-800",taskTemplates:[{id:"mont-1",title:"Check sales order email for details",section:"Sales Hand Off"},{id:"mont-2",title:"Confirm all customer details and fill out the Description section",section:"Sales Hand Off"},{id:"mont-3",title:"Mark yourself as the CXA for the subscriber in Flight Deck",section:"Sales Hand Off"},{id:"mont-4",title:"Submit Montgomery building access request",section:"Building Access"},{id:"mont-5",title:"Receive building approval",section:"Building Access"},{id:"mont-6",title:"Verify port availability",section:"Scheduling"},{id:"mont-7",title:"Propose install date to customer",section:"Scheduling"},{id:"mont-8",title:"Customer confirms install date",section:"Scheduling"},{id:"mont-9",title:"Add install to calendar",section:"Scheduling"},{id:"mont-10",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"mont-11",title:"Assign IP address",section:"Network Provisioning",assignee:"Network Ops"},{id:"mont-12",title:"Send reminder to customer the day before",section:"Installation"},{id:"mont-13",title:"Dispatch crew",section:"Installation"},{id:"mont-14",title:"Receive install report",section:"Installation"},{id:"mont-15",title:"Verify service is active",section:"Post-Install"},{id:"mont-16",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"mont-appr-1",name:"Building Access Approval",role:"Building Management",required:!0}]},coex:{id:"coex",name:"Coex",description:"Coexistence / co-location installation",leadTimeDays:20,color:"bg-cyan-100 text-cyan-800",requiresEngineering:!0,taskTemplates:[{id:"coex-1",title:"Check sales order email for details",section:"Sales Hand Off"},{id:"coex-2",title:"Confirm all customer details",section:"Sales Hand Off"},{id:"coex-3",title:"Engineering site survey",section:"Engineering",assignee:"Engineering"},{id:"coex-4",title:"Design coex solution",section:"Engineering",assignee:"Engineering"},{id:"coex-5",title:"Engineering approval",section:"Engineering",assignee:"Engineering Manager"},{id:"coex-6",title:"Order special equipment",section:"Engineering"},{id:"coex-7",title:"Verify equipment received",section:"Engineering"},{id:"coex-8",title:"Schedule install with customer",section:"Scheduling"},{id:"coex-9",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"coex-10",title:"Assign IP address",section:"Network Provisioning",assignee:"Network Ops"},{id:"coex-11",title:"Dispatch crew",section:"Installation"},{id:"coex-12",title:"Receive install report",section:"Installation"},{id:"coex-13",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"coex-appr-1",name:"Engineering Design Approval",role:"Engineering Manager",required:!0}]},"dark-fiber":{id:"dark-fiber",name:"Dark Fiber",description:"Unlit fiber service delivery",leadTimeDays:30,color:"bg-gray-900 text-white",requiresEngineering:!0,taskTemplates:[{id:"df-1",title:"Review sales order details",section:"Sales Hand Off"},{id:"df-2",title:"Engineering fiber path review",section:"Engineering",assignee:"Engineering"},{id:"df-3",title:"Verify fiber availability",section:"Engineering"},{id:"df-4",title:"Create splice plan",section:"Engineering",assignee:"Engineering"},{id:"df-5",title:"Engineering approval",section:"Engineering",assignee:"Engineering Manager"},{id:"df-6",title:"Schedule fiber splicing",section:"Scheduling"},{id:"df-7",title:"Complete A-side termination",section:"Installation"},{id:"df-8",title:"Complete Z-side termination",section:"Installation"},{id:"df-9",title:"OTDR testing",section:"Testing",assignee:"Engineering"},{id:"df-10",title:"Customer acceptance testing",section:"Testing"},{id:"df-11",title:"Receive install report",section:"Post-Install"},{id:"df-12",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"df-appr-1",name:"Fiber Path Approval",role:"Engineering Manager",required:!0},{id:"df-appr-2",name:"Customer Acceptance",role:"Customer",required:!0}]},wavelength:{id:"wavelength",name:"Wavelength",description:"Wavelength / DWDM service",leadTimeDays:45,color:"bg-indigo-100 text-indigo-800",requiresEngineering:!0,requiresSpecialEquipment:!0,taskTemplates:[{id:"wl-1",title:"Review sales order details",section:"Sales Hand Off"},{id:"wl-2",title:"Engineering wavelength design",section:"Engineering",assignee:"Engineering"},{id:"wl-3",title:"Verify DWDM capacity",section:"Engineering"},{id:"wl-4",title:"Order transponder equipment",section:"Equipment"},{id:"wl-5",title:"Engineering approval",section:"Engineering",assignee:"Engineering Manager"},{id:"wl-6",title:"Verify equipment received",section:"Equipment"},{id:"wl-7",title:"Schedule transponder installation",section:"Scheduling"},{id:"wl-8",title:"A-side transponder install",section:"Installation"},{id:"wl-9",title:"Z-side transponder install",section:"Installation"},{id:"wl-10",title:"Wavelength turn-up",section:"Network Provisioning",assignee:"Network Ops"},{id:"wl-11",title:"End-to-end testing",section:"Testing"},{id:"wl-12",title:"Customer acceptance testing",section:"Testing"},{id:"wl-13",title:"Receive install report",section:"Post-Install"},{id:"wl-14",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"wl-appr-1",name:"Wavelength Design Approval",role:"Engineering Manager",required:!0},{id:"wl-appr-2",name:"Equipment Order Approval",role:"Operations Manager",required:!0},{id:"wl-appr-3",name:"Customer Acceptance",role:"Customer",required:!0}]},"ethernet-transport":{id:"ethernet-transport",name:"Ethernet Transport",description:"Point-to-point Ethernet service",leadTimeDays:20,color:"bg-emerald-100 text-emerald-800",requiresEngineering:!0,taskTemplates:[{id:"et-1",title:"Review sales order details",section:"Sales Hand Off"},{id:"et-2",title:"Engineering circuit design",section:"Engineering",assignee:"Engineering"},{id:"et-3",title:"Verify path availability",section:"Engineering"},{id:"et-4",title:"Engineering approval",section:"Engineering",assignee:"Engineering Manager"},{id:"et-5",title:"Create network provisioning ticket",section:"Network Provisioning",assignee:"Network Ops"},{id:"et-6",title:"A-side handoff configuration",section:"Installation"},{id:"et-7",title:"Z-side handoff configuration",section:"Installation"},{id:"et-8",title:"End-to-end circuit testing",section:"Testing"},{id:"et-9",title:"Customer acceptance testing",section:"Testing"},{id:"et-10",title:"Receive install report",section:"Post-Install"},{id:"et-11",title:"Send customer survey",section:"Post-Install"}],approvals:[{id:"et-appr-1",name:"Circuit Design Approval",role:"Engineering Manager",required:!0}]},"ip-transit":{id:"ip-transit",name:"IP Transit",description:"IP Transit / Internet service",leadTimeDays:15,color:"bg-rose-100 text-rose-800",taskTemplates:[{id:"ip-1",title:"Review sales order details",section:"Sales Hand Off"},{id:"ip-2",title:"Verify cross-connect availability",section:"Cross-Connect"},{id:"ip-3",title:"Request customer LOA",section:"Cross-Connect"},{id:"ip-4",title:"Submit cross-connect order",section:"Cross-Connect"},{id:"ip-5",title:"Assign IP block",section:"Network Provisioning",assignee:"Network Ops"},{id:"ip-6",title:"Configure BGP session",section:"Network Provisioning",assignee:"Network Ops"},{id:"ip-7",title:"Verify cross-connect complete",section:"Installation"},{id:"ip-8",title:"BGP session testing",section:"Testing"},{id:"ip-9",title:"Traffic verification",section:"Testing"},{id:"ip-10",title:"Receive install report",section:"Post-Install"},{id:"ip-11",title:"Send customer survey",section:"Post-Install"}],approvals:[]}};function we({label:e,value:s,onChange:n,options:r,error:a,required:l=!1,disabled:i=!1,className:o="",...c}){return t.jsxs("div",{className:`flex flex-col gap-1.5 ${o}`,children:[e&&t.jsxs("label",{className:"text-sm font-semibold text-gray-700",children:[e,l&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("select",{value:s,onChange:m=>n==null?void 0:n(m.target.value),disabled:i,className:`
          px-4 py-2 border rounded-lg transition-all bg-white
          focus:outline-none focus:ring-2 focus:ring-yellow-400
          disabled:bg-gray-100 disabled:cursor-not-allowed
          ${a?"border-red-500":"border-gray-300"}
        `,...c,children:r.map(m=>t.jsx("option",{value:m.value,children:m.label},m.value))}),a&&t.jsx("span",{className:"text-sm text-red-600",children:a})]})}function Lc({type:e,size:s="md",className:n=""}){const r=Ah[e],a={sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"};return t.jsx("span",{className:`inline-flex items-center rounded-full font-medium ${a[s]} ${r.color} ${n}`,children:r.name})}function Ph({group:e,size:s="md",showIcon:n=!0,clickable:r=!0,className:a=""}){const l={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-sm gap-1.5",lg:"px-3 py-1.5 text-sm gap-2"},i={sm:"w-3 h-3",md:"w-3.5 h-3.5",lg:"w-4 h-4"},o=t.jsxs(t.Fragment,{children:[n&&t.jsx(Cs,{className:i[s]}),t.jsx("span",{className:"truncate max-w-[150px]",children:e.name})]}),c=`inline-flex items-center rounded-full font-medium text-white ${l[s]} ${a}`;return r?t.jsx(wc,{to:`/groups/${e.id}`,className:`${c} hover:opacity-90 transition-opacity`,style:{backgroundColor:e.color},title:e.description||e.name,children:o}):t.jsx("span",{className:c,style:{backgroundColor:e.color},title:e.description||e.name,children:o})}const Vy={standard:null,silver:jy,gold:Cc,platinum:Zf};function _c({tier:e,size:s="md",showLabel:n=!0,className:r=""}){if(e==="standard")return null;const a=uh[e],l=Vy[e],i={sm:"px-1.5 py-0.5 text-xs gap-1",md:"px-2 py-1 text-sm gap-1.5",lg:"px-3 py-1.5 text-sm gap-2"},o={sm:"w-3 h-3",md:"w-3.5 h-3.5",lg:"w-4 h-4"};return t.jsxs("span",{className:`inline-flex items-center rounded-full font-medium ${a.bgColor} ${a.color} ${i[s]} ${r}`,title:`${a.label} VIP - ${a.firstResponseHours}h response time`,children:[l&&t.jsx(l,{className:o[s]}),n&&t.jsx("span",{children:a.label})]})}function Gy({tier:e}){if(e==="standard")return null;const s=uh[e];return t.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[t.jsxs("p",{className:"font-medium",children:[s.label," VIP Benefits:"]}),t.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-gray-500",children:[t.jsxs("li",{children:[s.firstResponseHours,"h first response SLA"]}),s.leadTimeReductionDays>0&&t.jsxs("li",{children:[s.leadTimeReductionDays," days faster lead time"]}),s.priorityScheduling&&t.jsx("li",{children:"Priority scheduling"}),s.dedicatedSupport&&t.jsx("li",{children:"Dedicated support contact"}),s.executiveEscalation&&t.jsx("li",{children:"Executive escalation path"})]})]})}const Ky=[{value:"standard-on-net",label:"Standard On-Net"},{value:"new-build",label:"New Build"},{value:"contract-labor",label:"Contract Labor"},{value:"montgomery",label:"Montgomery"},{value:"coex",label:"Co-Ex"},{value:"after-hours",label:"After Hours"},{value:"dark-fiber",label:"Dark Fiber"},{value:"wavelength",label:"Wavelength"},{value:"ethernet-transport",label:"Ethernet Transport"},{value:"ip-transit",label:"IP Transit"}],Yy=[{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],Qy=[{value:"dynamic",label:"Dynamic"},{value:"static",label:"Static"},{value:"bgp",label:"BGP"}],Xy=[{value:"commercial",label:"Commercial"},{value:"residential",label:"Residential"},{value:"mdu",label:"MDU"},{value:"data-center",label:"Data Center"}];function Eh({isOpen:e,onClose:s,onProjectCreated:n}){const{state:r,dispatch:a}=Se(),[l,i]=b.useState({projectType:"standard-on-net",customerId:"",newCustomerName:"",buildingId:"",newBuildingAddress:"",serviceOrderId:"",priority:"normal",product:"Dedicated Internet",serviceBandwidth:"1 Gbps",ipType:"dynamic",mrc:0,nrc:0,focDate:"",cxAssignee:"",salesRep:"",buildingType:"commercial"}),[o,c]=b.useState({}),m=(h,v)=>{i(g=>({...g,[h]:v})),c(g=>({...g,[h]:""}))},j=()=>{const h={};return!l.customerId&&!l.newCustomerName&&(h.customer="Select an existing customer or enter a new customer name"),!l.buildingId&&!l.newBuildingAddress&&(h.building="Select an existing building or enter a new address"),l.serviceOrderId||(h.serviceOrderId="Service Order ID is required"),l.focDate||(h.focDate="FOC Date is required"),l.salesRep||(h.salesRep="Sales Rep is required"),c(h),Object.keys(h).length===0},y=h=>{if(h.preventDefault(),!j())return;let v=l.customerId;!v&&l.newCustomerName&&(v=`cust-${Date.now()}`);let g=l.buildingId;!g&&l.newBuildingAddress&&(g=`bldg-${Date.now()}`);const p=`proj-${Date.now()}`,f=new Date().toISOString(),d=[{id:`ready-${p}-1`,label:"Customer contact confirmed",completed:!1,critical:!0},{id:`ready-${p}-2`,label:"Install date scheduled",completed:!1,critical:!0},{id:`ready-${p}-3`,label:"Customer confirmed install date",completed:!1,critical:!0},{id:`ready-${p}-4`,label:"Building access instructions available",completed:!1},{id:`ready-${p}-5`,label:"Device assigned",completed:!1},{id:`ready-${p}-6`,label:"Install crew assigned",completed:!1},{id:`ready-${p}-7`,label:"No active blockers",completed:!0,critical:!0},{id:`ready-${p}-8`,label:"FOC date confirmed",completed:!0}],x=[{id:`task-${p}-1`,title:"Check sales order email for details",section:"Sales Hand Off",completed:!1},{id:`task-${p}-2`,title:"Confirm all customer details",section:"Sales Hand Off",completed:!1},{id:`task-${p}-3`,title:"Mark yourself as the CXA in Flight Deck",section:"Sales Hand Off",completed:!1},{id:`task-${p}-4`,title:"Verify port availability",section:"Scheduling",completed:!1},{id:`task-${p}-5`,title:"Propose install date to customer",section:"Scheduling",completed:!1},{id:`task-${p}-6`,title:"Create network provisioning ticket",section:"Network Provisioning",completed:!1}],u={id:p,projectType:l.projectType,customerId:v||l.customerId,buildingId:g||l.buildingId,serviceOrderId:l.serviceOrderId,status:"new",priority:l.priority,handoffDate:f,handoffEmailId:`email-${Date.now()}`,salesRep:l.salesRep,cxAssignee:l.cxAssignee||void 0,focDate:new Date(l.focDate).toISOString(),product:l.product,ipType:l.ipType,serviceBandwidth:l.serviceBandwidth,mrc:l.mrc,nrc:l.nrc,buildingOnNet:!0,buildingType:l.buildingType,quotedLeadTime:14,surveyRequired:!1,afterHoursRequired:l.projectType==="after-hours",riserDiagramRequired:!1,serviceType:`${l.serviceBandwidth} ${l.product}`,staticIp:l.ipType==="static"||l.ipType==="bgp",customerOwnRouter:!1,isWholesale:!1,tasks:x,readinessTasks:d,approvals:[],slaDeadline:new Date(l.focDate).toISOString(),lastCustomerContact:f,internalNotes:[],activityLog:[{id:`act-${p}-1`,projectId:p,type:"created",description:"Project created from new project form",author:l.cxAssignee||"System",createdAt:f}],communicationLog:[],blockers:[],isEscalated:!1,createdAt:f,updatedAt:f};a({type:"ADD_PROJECT",payload:u}),n&&n(p),s()};return e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:s}),t.jsx("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"New Project"}),t.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded",children:t.jsx(mt,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Type"}),t.jsx("select",{value:l.projectType,onChange:h=>m("projectType",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Ky.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),t.jsx("select",{value:l.priority,onChange:h=>m("priority",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Yy.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),t.jsxs("select",{value:l.customerId,onChange:h=>m("customerId",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"Select existing customer..."}),r.customers.map(h=>t.jsx("option",{value:h.id,children:h.companyName},h.id))]}),!l.customerId&&t.jsx("input",{type:"text",placeholder:"Or enter new customer name...",value:l.newCustomerName,onChange:h=>m("newCustomerName",h.target.value),className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),o.customer&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.customer})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Building"}),t.jsxs("select",{value:l.buildingId,onChange:h=>m("buildingId",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"Select existing building..."}),r.buildings.map(h=>t.jsxs("option",{value:h.id,children:[h.address,", ",h.city]},h.id))]}),!l.buildingId&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"text",placeholder:"Or enter new building address...",value:l.newBuildingAddress,onChange:h=>m("newBuildingAddress",h.target.value),className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),t.jsx("select",{value:l.buildingType,onChange:h=>m("buildingType",h.target.value),className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Xy.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))})]}),o.building&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.building})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Order ID *"}),t.jsx("input",{type:"text",value:l.serviceOrderId,onChange:h=>m("serviceOrderId",h.target.value),placeholder:"e.g., so-12345",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),o.serviceOrderId&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.serviceOrderId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FOC Date *"}),t.jsx("input",{type:"date",value:l.focDate,onChange:h=>m("focDate",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),o.focDate&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.focDate})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),t.jsx("input",{type:"text",value:l.product,onChange:h=>m("product",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bandwidth"}),t.jsx("input",{type:"text",value:l.serviceBandwidth,onChange:h=>m("serviceBandwidth",h.target.value),placeholder:"e.g., 1 Gbps",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Type"}),t.jsx("select",{value:l.ipType,onChange:h=>m("ipType",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Qy.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRC ($)"}),t.jsx("input",{type:"number",value:l.mrc,onChange:h=>m("mrc",parseInt(h.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NRC ($)"}),t.jsx("input",{type:"number",value:l.nrc,onChange:h=>m("nrc",parseInt(h.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Rep *"}),t.jsx("input",{type:"text",value:l.salesRep,onChange:h=>m("salesRep",h.target.value),placeholder:"Sales rep name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),o.salesRep&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.salesRep})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CX Assignee"}),t.jsxs("select",{value:l.cxAssignee,onChange:h=>m("cxAssignee",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"Unassigned"}),re.map(h=>t.jsx("option",{value:h.name,children:h.name},h.id))]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx(U,{type:"button",variant:"secondary",onClick:s,children:"Cancel"}),t.jsx(U,{type:"submit",children:"Create Project"})]})]})]})})]}):null}function Rh({building:e,showIcon:s=!1,className:n=""}){const{openDrawer:r}=xh(),a=l=>{l.preventDefault(),l.stopPropagation(),r(e)};return t.jsxs("button",{onClick:a,className:`text-left hover:text-blue-600 hover:underline cursor-pointer transition-colors inline-flex items-center gap-1 ${n}`,children:[s&&t.jsx(Pc,{className:"w-3.5 h-3.5 flex-shrink-0"}),t.jsx("span",{children:e.address})]})}function Qt(e,s){return e.vipTierOverride?e.vipTierOverride:s!=null&&s.vipTier?s.vipTier:"standard"}function Jy(e,s){if(s){const r=s.split("@")[1];if(r&&!r.includes("gmail")&&!r.includes("yahoo")&&!r.includes("hotmail")&&!r.includes("outlook"))return`https://www.linkedin.com/company/${r.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"")}`}return`https://www.linkedin.com/company/${e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}`}const Nu=[{value:"new",label:"New"},{value:"reviewing",label:"Reviewing"},{value:"scheduled",label:"Scheduled"},{value:"confirmed",label:"Confirmed"},{value:"installing",label:"Installing"},{value:"completed",label:"Completed"}];function Zy(){var Bn;const e=Ve(),[s,n]=bc(),{state:r,getCustomer:a,getBuilding:l,getProjectGroup:i,dispatch:o}=Se(),c=(R,V)=>{o({type:"UPDATE_PROJECT_STATUS",payload:{projectId:R,status:V}})},[m,j]=b.useState("all"),[y,h]=b.useState("all"),[v,g]=b.useState("all"),[p,f]=b.useState("all"),[d,x]=b.useState("all"),[u,w]=b.useState("all"),[N,C]=b.useState("all"),[k,I]=b.useState("all"),[z,_]=b.useState(new Set),[D,Q]=b.useState(!1),[F,K]=b.useState(!1),[pe,De]=b.useState(!1);b.useEffect(()=>{const R=s.get("customer");R&&I(R)},[s]);const J=Array.from(new Set(r.projects.map(R=>R.cxAssignee).filter(Boolean))),P=r.projects.filter(R=>{const V=a(R.customerId),E=Qt(R,V);return!(m==="my"&&R.cxAssignee!==G.name||y!=="all"&&R.status!==y||v!=="all"&&R.priority!==v||p!=="all"&&R.projectType!==p||d!=="all"&&R.cxAssignee!==d||k!=="all"&&R.customerId!==k||u!=="all"&&(u==="none"&&R.projectGroupId||u!=="none"&&R.projectGroupId!==u)||N!=="all"&&(N==="vip-only"&&E==="standard"||N!=="vip-only"&&E!==N))}).sort((R,V)=>{const E=a(R.customerId),W=a(V.customerId),ce=Qt(R,E)==="standard"?0:Qt(R,E)==="silver"?1:Qt(R,E)==="gold"?2:3,Te=Qt(V,W)==="standard"?0:Qt(V,W)==="silver"?1:Qt(V,W)==="gold"?2:3;return Te!==ce?Te-ce:new Date(V.updatedAt).getTime()-new Date(R.updatedAt).getTime()}),B=r.projects.filter(R=>R.cxAssignee===G.name).length,O=()=>{z.size===P.length?_(new Set):_(new Set(P.map(R=>R.id)))},X=R=>{const V=new Set(z);V.has(R)?V.delete(R):V.add(R),_(V)},ne=R=>{z.forEach(V=>{o({type:"UPDATE_PROJECT_STATUS",payload:{projectId:V,status:R}})}),_(new Set),Q(!1)},tt=R=>{z.forEach(V=>{o({type:"UPDATE_PROJECT_ASSIGNEE",payload:{projectId:V,cxAssignee:R}})}),_(new Set),K(!1)},st=()=>{const R=P.filter(E=>z.has(E.id)),V=Kt(R);nt(V,"projects-export.csv"),_(new Set)},Kt=R=>{const V=["Company","Address","Product","Bandwidth","Status","FOC Date","Assignee","Group","Escalated"],E=R.map(W=>{const ce=a(W.customerId),Te=l(W.buildingId),Ls=W.projectGroupId?i(W.projectGroupId):null;return[(ce==null?void 0:ce.companyName)||"",(Te==null?void 0:Te.address)||"",W.product,W.serviceBandwidth,W.status,new Date(W.focDate).toLocaleDateString(),W.cxAssignee||"Unassigned",(Ls==null?void 0:Ls.name)||"",W.isEscalated?"Yes":"No"]});return[V,...E].map(W=>W.map(ce=>`"${ce}"`).join(",")).join(`
`)},nt=(R,V)=>{const E=new Blob([R],{type:"text/csv"}),W=URL.createObjectURL(E),ce=document.createElement("a");ce.href=W,ce.download=V,ce.click(),URL.revokeObjectURL(W)},It=[{value:"all",label:"All Statuses"},{value:"new",label:"New"},{value:"reviewing",label:"Reviewing"},{value:"scheduled",label:"Scheduled"},{value:"confirmed",label:"Confirmed"},{value:"installing",label:"Installing"},{value:"completed",label:"Completed"}],M=[{value:"all",label:"All Priorities"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],H=[{value:"all",label:"All Types"},...Object.values(Ah).map(R=>({value:R.id,label:R.name}))],Y=[{value:"all",label:"All Assignees"},...J.map(R=>({value:R,label:R}))],oe=[{value:"all",label:"All Groups"},{value:"none",label:"No Group"},...r.projectGroups.map(R=>({value:R.id,label:R.name}))],xe=[{value:"all",label:"All Customers"},...r.customers.map(R=>({value:R.id,label:R.companyName}))],Ne=k!=="all"?(Bn=r.customers.find(R=>R.id===k))==null?void 0:Bn.companyName:null,rt=[{value:"all",label:"All VIP Levels"},{value:"vip-only",label:"VIP Only"},{value:"platinum",label:"Platinum"},{value:"gold",label:"Gold"},{value:"silver",label:"Silver"},{value:"standard",label:"Standard"}],Yt=[{key:"select",label:"",width:"40px",render:R=>t.jsx("div",{onClick:V=>V.stopPropagation(),children:t.jsx("button",{onClick:()=>X(R.id),className:"p-1 hover:bg-gray-100 rounded",children:z.has(R.id)?t.jsx(Mn,{className:"w-5 h-5 text-pilot-secondary"}):t.jsx(ci,{className:"w-5 h-5 text-gray-400"})})})},{key:"customer",label:"Customer",width:"2fr",render:R=>{const V=a(R.customerId),E=R.blockers.filter(ce=>!ce.resolvedAt).length,W=Qt(R,V);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ce=>{ce.stopPropagation(),V&&e(`/customers/${V.id}`)},className:"font-medium text-gray-900 hover:text-pilot-secondary hover:underline",children:V==null?void 0:V.companyName}),t.jsx(_c,{tier:W,size:"sm",showLabel:!1}),R.isEscalated&&t.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:t.jsx(te,{className:"w-3 h-3"})}),E>0&&t.jsxs("span",{className:"px-1.5 py-0.5 bg-amber-100 text-amber-700 text-xs font-medium rounded",children:[E," blocker",E>1?"s":""]})]}),t.jsx("p",{className:"text-sm text-gray-500",children:R.cxAssignee||"Unassigned"})]})}},{key:"type",label:"Type",width:"1.5fr",render:R=>t.jsx(Lc,{type:R.projectType,size:"sm"})},{key:"group",label:"Group",width:"1.5fr",render:R=>{if(!R.projectGroupId)return t.jsx("span",{className:"text-gray-400 text-sm",children:""});const V=i(R.projectGroupId);return V?t.jsx("div",{onClick:E=>E.stopPropagation(),children:t.jsx(Ph,{group:V,size:"sm",showIcon:!1})}):t.jsx("span",{className:"text-gray-400 text-sm",children:""})}},{key:"building",label:"Building",width:"2fr",render:R=>{const V=l(R.buildingId);return V?t.jsxs("div",{onClick:E=>E.stopPropagation(),children:[t.jsx(Rh,{building:V,className:"text-gray-700"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[V.city,", ",V.state]})]}):t.jsx("span",{className:"text-gray-400",children:"Unknown"})}},{key:"service",label:"Service",width:"1.5fr",render:R=>t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-700",children:R.product}),t.jsx("p",{className:"text-sm text-gray-500",children:R.serviceBandwidth})]})},{key:"foc",label:"FOC Date",width:"1fr",render:R=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(se,{className:"w-3.5 h-3.5 text-gray-400"}),t.jsx("span",{className:"text-gray-700",children:new Date(R.focDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})},{key:"status",label:"Status",width:"1.5fr",render:R=>t.jsx("div",{onClick:V=>V.stopPropagation(),children:t.jsx("select",{value:R.status,onChange:V=>c(R.id,V.target.value),className:"text-sm border border-gray-200 rounded px-2 py-1 bg-white focus:outline-none focus:ring-2 focus:ring-pilot-primary cursor-pointer",children:Nu.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))})})},{key:"health",label:"Health",width:"80px",render:R=>t.jsx(Br,{project:R,size:"sm"})}],At=y!=="all"||v!=="all"||p!=="all"||d!=="all"||u!=="all"||N!=="all"||k!=="all",Rl=()=>{h("all"),g("all"),f("all"),x("all"),w("all"),C("all"),I("all"),n({})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),t.jsxs("p",{className:"text-gray-600",children:[P.length," project",P.length!==1?"s":"",At&&" (filtered)"]})]}),t.jsxs(U,{onClick:()=>De(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg w-fit",children:[t.jsxs("button",{onClick:()=>j("all"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="all"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Je,{className:"w-4 h-4"}),"All Projects"]}),t.jsxs("button",{onClick:()=>j("my"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="my"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Le,{className:"w-4 h-4"}),"My Projects",B>0&&t.jsx("span",{className:"bg-pilot-primary text-pilot-secondary text-xs px-1.5 py-0.5 rounded-full",children:B})]})]}),Ne&&t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("span",{className:"text-blue-700",children:["Showing projects for ",t.jsx("span",{className:"font-semibold",children:Ne})]})}),t.jsx("button",{onClick:()=>{I("all"),n({})},className:"text-sm text-blue-600 hover:underline",children:"Show all projects"})]}),t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow flex-wrap",children:[t.jsx(Un,{className:"w-5 h-5 text-gray-400"}),t.jsx(we,{options:xe,value:k,onChange:R=>{I(R),n(R==="all"?{}:{customer:R})},className:"w-48"}),t.jsx(we,{options:H,value:p,onChange:R=>f(R),className:"w-48"}),t.jsx(we,{options:It,value:y,onChange:R=>h(R),className:"w-40"}),t.jsx(we,{options:M,value:v,onChange:R=>g(R),className:"w-40"}),t.jsx(we,{options:Y,value:d,onChange:R=>x(R),className:"w-44"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Cs,{className:"w-4 h-4 text-gray-400"}),t.jsx(we,{options:oe,value:u,onChange:R=>w(R),className:"w-44"})]}),t.jsx(we,{options:rt,value:N,onChange:R=>C(R),className:"w-40"}),At&&t.jsx("button",{onClick:Rl,className:"text-sm text-blue-600 hover:underline",children:"Clear filters"})]}),z.size>0&&t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-pilot-secondary text-white rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:O,className:"p-1 hover:bg-pilot-primary/20 rounded",children:z.size===P.length?t.jsx(Mn,{className:"w-5 h-5"}):t.jsx(ci,{className:"w-5 h-5"})}),t.jsxs("span",{className:"font-medium",children:[z.size," selected"]})]}),t.jsx("div",{className:"h-6 w-px bg-white/30"}),t.jsxs("div",{className:"flex items-center gap-2 relative",children:[t.jsx("button",{onClick:()=>Q(!D),className:"flex items-center gap-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded text-sm",children:"Change Status"}),D&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg py-1 z-10 min-w-[150px]",children:Nu.map(R=>t.jsx("button",{onClick:()=>ne(R.value),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:R.label},R.value))})]}),t.jsxs("div",{className:"flex items-center gap-2 relative",children:[t.jsxs("button",{onClick:()=>K(!F),className:"flex items-center gap-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded text-sm",children:[t.jsx(Ur,{className:"w-4 h-4"}),"Assign"]}),F&&t.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg py-1 z-10 min-w-[150px]",children:[t.jsx("button",{onClick:()=>tt(""),className:"w-full text-left px-4 py-2 text-sm text-gray-500 hover:bg-gray-100",children:"Unassigned"}),re.map(R=>t.jsx("button",{onClick:()=>tt(R.name),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:R.name},R.id))]})]}),t.jsxs("button",{onClick:st,className:"flex items-center gap-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded text-sm",children:[t.jsx(Sc,{className:"w-4 h-4"}),"Export CSV"]}),t.jsx("div",{className:"flex-1"}),t.jsx("button",{onClick:()=>_(new Set),className:"text-sm hover:underline",children:"Clear selection"})]}),z.size===0&&P.length>0&&t.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:t.jsxs("button",{onClick:O,className:"flex items-center gap-1 hover:text-gray-700",children:[t.jsx(ci,{className:"w-4 h-4"}),"Select all ",P.length," projects"]})}),t.jsx($c,{columns:Yt,data:P,onRowClick:R=>e(`/projects/${R.id}`),emptyMessage:"No projects match your filters"}),t.jsx(Eh,{isOpen:pe,onClose:()=>De(!1),onProjectCreated:R=>e(`/projects/${R}`)})]})}function ev({tasks:e,onToggle:s,onAssigneeChange:n,onDueDateChange:r,readonly:a=!1,groupBySection:l=!0,editable:i=!1}){const o=e.filter(v=>v.completed).length,c=e.length>0?o/e.length*100:0,m=e.reduce((v,g)=>{const p=g.section||"General";return v[p]||(v[p]=[]),v[p].push(g),v},{}),j=Object.keys(m),y=v=>{const g=new Date(v);if(isNaN(g.getTime()))return{text:"Invalid date",className:"text-gray-400 bg-gray-50"};g.setHours(0,0,0,0);const p=new Date;p.setHours(0,0,0,0);const f=Math.round((g.getTime()-p.getTime())/(1e3*60*60*24));return f<0?{text:`${Math.abs(f)}d overdue`,className:"text-red-600 bg-red-50"}:f===0?{text:"Due today",className:"text-orange-600 bg-orange-50"}:f===1?{text:"Due tomorrow",className:"text-yellow-600 bg-yellow-50"}:f<=7?{text:`Due in ${f}d`,className:"text-gray-600 bg-gray-100"}:{text:g.toLocaleDateString("en-US",{month:"short",day:"numeric"}),className:"text-gray-500 bg-gray-50"}},h=v=>t.jsx(tv,{task:v,readonly:a,editable:i,onToggle:s,onAssigneeChange:n,onDueDateChange:r,formatDueDate:y},v.id);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[o," of ",e.length," tasks completed"]}),t.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${c}%`}})})]}),l&&j.length>1?t.jsx("div",{className:"space-y-6",children:j.map(v=>{const g=m[v],p=g.filter(d=>d.completed).length,f=p===g.length;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h4",{className:`text-sm font-semibold uppercase tracking-wide ${f?"text-green-600":"text-gray-700"}`,children:v}),t.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${f?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[p,"/",g.length]})]}),t.jsx("ul",{className:"space-y-1",children:g.map(h)})]},v)})}):t.jsx("ul",{className:"space-y-2",children:e.map(h)})]})}function tv({task:e,readonly:s,editable:n,onToggle:r,onAssigneeChange:a,onDueDateChange:l,formatDueDate:i}){const[o,c]=b.useState(!1),[m,j]=b.useState(!1),y=b.useRef(null),h=b.useRef(null);b.useEffect(()=>{function p(f){y.current&&!y.current.contains(f.target)&&c(!1),h.current&&!h.current.contains(f.target)&&j(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const v=p=>{a==null||a(e.id,p),c(!1)},g=p=>{l==null||l(e.id,p.target.value),j(!1)};return t.jsxs("li",{className:`
      flex items-start gap-3 p-3 rounded-lg transition-colors
      ${e.completed?"bg-gray-50":"bg-white"}
    `,children:[t.jsx("button",{onClick:()=>!s&&(r==null?void 0:r(e.id,!e.completed)),disabled:s,className:`flex-shrink-0 mt-0.5 ${s?"cursor-default":"cursor-pointer hover:opacity-70"}`,children:e.completed?t.jsx(He,{className:"w-5 h-5 text-green-500"}):t.jsx(Js,{className:"w-5 h-5 text-gray-300"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"flex items-start justify-between gap-2",children:t.jsx("span",{className:`${e.completed?"text-gray-500 line-through":"text-gray-900"}`,children:e.title})}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[n?t.jsxs("div",{className:"relative",ref:y,children:[t.jsxs("button",{onClick:()=>c(!o),className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors",children:[t.jsx(Le,{className:"w-3 h-3 text-gray-400"}),t.jsx("span",{className:e.assignee?"text-gray-700":"text-gray-400",children:e.assignee||"Assign"}),t.jsx(ke,{className:"w-3 h-3 text-gray-400"})]}),o&&t.jsxs("div",{className:"absolute z-10 mt-1 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1",children:[t.jsx("button",{onClick:()=>v(""),className:"w-full px-3 py-1.5 text-left text-xs hover:bg-gray-50 text-gray-400",children:"Unassigned"}),re.map(p=>t.jsx("button",{onClick:()=>v(p.name),className:`w-full px-3 py-1.5 text-left text-xs hover:bg-gray-50 ${e.assignee===p.name?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:p.name},p.id))]})]}):e.assignee?t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(Le,{className:"w-3 h-3"}),e.assignee]}):null,n?t.jsxs("div",{className:"relative",ref:h,children:[t.jsxs("button",{onClick:()=>j(!m),className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded border transition-colors ${e.dueDate&&!e.completed?`border-transparent ${i(e.dueDate).className}`:"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[t.jsx(me,{className:"w-3 h-3"}),t.jsx("span",{className:e.dueDate?"":"text-gray-400",children:e.dueDate?i(e.dueDate).text:"Set date"})]}),m&&t.jsx("div",{className:"absolute z-10 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 p-2",children:t.jsx("input",{type:"date",value:e.dueDate||"",onChange:g,className:"text-sm border border-gray-200 rounded px-2 py-1"})})]}):e.dueDate&&!e.completed?t.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded ${i(e.dueDate).className}`,children:[t.jsx(me,{className:"w-3 h-3"}),i(e.dueDate).text]}):null]})]})]})}function sv({building:e,className:s=""}){const n={gpon:"G-PON",xgs:"XGS-PON","gpon-xgs":"GPON + XGS","fixed-wireless":"Fixed Wireless",mixed:"Mixed (G-PON/XGS)"};return t.jsx(T,{className:s,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-3 bg-pilot-primary rounded-lg",children:t.jsx(Gt,{className:"w-6 h-6 text-pilot-secondary"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:e.address}),t.jsxs("p",{className:"text-sm text-gray-600",children:[e.city,", ",e.state," ",e.zip]}),t.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Deployment"}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:n[e.deploymentType]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Recommended Device"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 font-mono",children:e.recommendedDevice})]})]}),e.installNotes.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wide flex items-center gap-1",children:[t.jsx(vt,{className:"w-3 h-3"}),"Install Notes"]}),t.jsx("ul",{className:"mt-2 space-y-1",children:e.installNotes.map((r,a)=>t.jsx("li",{className:"text-sm text-amber-700 bg-amber-50 px-3 py-1.5 rounded",children:r},a))})]}),e.accessInstructions&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wide flex items-center gap-1",children:[t.jsx(Nh,{className:"w-3 h-3"}),"Access Instructions"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-700 bg-gray-50 px-3 py-2 rounded",children:e.accessInstructions})]})]})]})})}const nv={email:t.jsx(le,{className:"w-4 h-4"}),phone:t.jsx(Oe,{className:"w-4 h-4"}),internal:t.jsx(Xe,{className:"w-4 h-4"}),"customer-request":t.jsx(Dc,{className:"w-4 h-4"})},rv={open:"bg-blue-100 text-blue-700",pending:"bg-yellow-100 text-yellow-700",resolved:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-500"},av={open:t.jsx(Js,{className:"w-3 h-3"}),pending:t.jsx(vt,{className:"w-3 h-3"}),resolved:t.jsx(He,{className:"w-3 h-3"}),closed:t.jsx(He,{className:"w-3 h-3"})};function lv(e){const s=new Date(e),r=new Date().getTime()-s.getTime(),a=Math.floor(r/(1e3*60)),l=Math.floor(r/(1e3*60*60)),i=Math.floor(r/(1e3*60*60*24));return a<60?`${a}m ago`:l<24?`${l}h ago`:i<7?`${i}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function iv({tickets:e,onMarkRead:s,onSelectTicket:n}){const r=e.filter(o=>o.status==="open"||o.status==="pending"),a=e.filter(o=>o.status==="resolved"||o.status==="closed"),l=o=>{!o.isRead&&s&&s(o.id),n&&n(o)},i=o=>t.jsx("div",{onClick:()=>l(o),className:`
        p-4 border-b last:border-b-0 cursor-pointer transition-colors hover:bg-gray-50
        ${o.isRead?"":"bg-blue-50/50"}
      `,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${o.type==="email"?"bg-blue-100 text-blue-600":o.type==="phone"?"bg-green-100 text-green-600":o.type==="internal"?"bg-purple-100 text-purple-600":"bg-orange-100 text-orange-600"}`,children:nv[o.type]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[!o.isRead&&t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0"}),t.jsx("h4",{className:`font-medium truncate ${o.isRead?"text-gray-700":"text-gray-900"}`,children:o.subject})]}),o.from&&t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:["From: ",o.from]})]}),t.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:t.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full ${rv[o.status]}`,children:[av[o.status],o.status]})})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:o.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx(se,{className:"w-3 h-3"}),lv(o.updatedAt)]}),o.assignee&&t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx(Le,{className:"w-3 h-3"}),o.assignee]}),o.requiresResponse&&o.status==="open"&&t.jsx("span",{className:"text-red-600 font-medium",children:"Response needed"})]}),o.notes&&o.notes.length>0&&t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[o.notes.length," note",o.notes.length!==1?"s":""]})]})]})},o.id);return e.length===0?t.jsx(T,{children:t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(le,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"font-medium",children:"No tickets yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Tickets will appear here when communications begin."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Open"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(o=>o.status==="open").length})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e.filter(o=>o.status==="pending").length})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(o=>o.status==="resolved"||o.status==="closed").length})]})]}),r.length>0&&t.jsxs(T,{className:"overflow-hidden",children:[t.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b",children:t.jsxs("h3",{className:"font-semibold text-gray-900",children:["Open Tickets (",r.length,")"]})}),t.jsx("div",{className:"divide-y",children:r.map(i)})]}),a.length>0&&t.jsxs(T,{className:"overflow-hidden",children:[t.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b",children:t.jsxs("h3",{className:"font-semibold text-gray-500",children:["Resolved (",a.length,")"]})}),t.jsx("div",{className:"divide-y",children:a.map(i)})]})]})}const ov={created:{icon:Qe,color:"text-blue-600",bgColor:"bg-blue-100"},status_change:{icon:vh,color:"text-purple-600",bgColor:"bg-purple-100"},task_completed:{icon:Pe,color:"text-green-600",bgColor:"bg-green-100"},task_assigned:{icon:Ur,color:"text-blue-600",bgColor:"bg-blue-100"},email_sent:{icon:le,color:"text-cyan-600",bgColor:"bg-cyan-100"},email_received:{icon:le,color:"text-teal-600",bgColor:"bg-teal-100"},call_logged:{icon:Oe,color:"text-indigo-600",bgColor:"bg-indigo-100"},note_added:{icon:Tt,color:"text-gray-600",bgColor:"bg-gray-100"},schedule_set:{icon:me,color:"text-green-600",bgColor:"bg-green-100"},schedule_changed:{icon:me,color:"text-yellow-600",bgColor:"bg-yellow-100"},blocker_added:{icon:te,color:"text-red-600",bgColor:"bg-red-100"},blocker_resolved:{icon:Mn,color:"text-green-600",bgColor:"bg-green-100"},escalated:{icon:Wf,color:"text-red-600",bgColor:"bg-red-100"},de_escalated:{icon:qf,color:"text-green-600",bgColor:"bg-green-100"},assignee_changed:{icon:Ur,color:"text-blue-600",bgColor:"bg-blue-100"}};function cv(e){const s=new Date(e),r=new Date().getTime()-s.getTime(),a=Math.floor(r/(1e3*60)),l=Math.floor(r/(1e3*60*60)),i=Math.floor(r/(1e3*60*60*24));return a<1?"Just now":a<60?`${a}m ago`:l<24?`${l}h ago`:i<7?`${i}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function dv({activities:e,maxItems:s=10}){const n=[...e].sort((r,a)=>new Date(a.createdAt).getTime()-new Date(r.createdAt).getTime()).slice(0,s);return n.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(vh,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No activity yet"})]}):t.jsx("div",{className:"flow-root",children:t.jsx("ul",{className:"-mb-8",children:n.map((r,a)=>{const l=ov[r.type],i=l.icon,o=a===n.length-1;return t.jsx("li",{children:t.jsxs("div",{className:"relative pb-8",children:[!o&&t.jsx("span",{className:"absolute left-4 top-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}),t.jsxs("div",{className:"relative flex space-x-3",children:[t.jsx("div",{children:t.jsx("span",{className:`h-8 w-8 rounded-full ${l.bgColor} flex items-center justify-center`,children:t.jsx(i,{className:`h-4 w-4 ${l.color}`})})}),t.jsxs("div",{className:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-700",children:r.description}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:r.author})]}),t.jsx("div",{className:"whitespace-nowrap text-right text-xs text-gray-500",children:cv(r.createdAt)})]})]})]})},r.id)})})})}function Mh({value:e,onChange:s,placeholder:n,rows:r=3,className:a="",autoFocus:l=!1}){const[i,o]=b.useState(!1),[c,m]=b.useState(0),[j,y]=b.useState([]),[h,v]=b.useState(-1),g=b.useRef(null),p=b.useRef(null),f=b.useCallback((w,N)=>{let C=N-1;for(;C>=0;){const k=w[C];if(k==="@")return C;if(k===" "||k===`
`)return-1;C--}return-1},[]),d=w=>{const N=w.target.value,C=w.target.selectionStart;s(N);const k=f(N,C);if(k>=0){const I=N.slice(k+1,C).toLowerCase(),z=re.filter(_=>_.isActive&&(_.name.toLowerCase().includes(I)||_.name.toLowerCase().split(" ").some(D=>D.startsWith(I))));z.length>0?(y(z),v(k),o(!0),m(0)):o(!1)}else o(!1)},x=w=>{if(!g.current||h<0)return;const N=g.current.selectionStart,C=e.slice(0,h),k=e.slice(N),I=`${C}@${w.name} ${k}`;s(I),o(!1),setTimeout(()=>{if(g.current){const z=h+w.name.length+2;g.current.setSelectionRange(z,z),g.current.focus()}},0)},u=w=>{i&&(w.key==="ArrowDown"?(w.preventDefault(),m(N=>Math.min(N+1,j.length-1))):w.key==="ArrowUp"?(w.preventDefault(),m(N=>Math.max(N-1,0))):w.key==="Enter"||w.key==="Tab"?j.length>0&&(w.preventDefault(),x(j[c])):w.key==="Escape"&&o(!1))};return b.useEffect(()=>{const w=N=>{p.current&&!p.current.contains(N.target)&&g.current&&!g.current.contains(N.target)&&o(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:g,value:e,onChange:d,onKeyDown:u,placeholder:n,rows:r,autoFocus:l,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary resize-none ${a}`}),i&&j.length>0&&t.jsxs("div",{ref:p,className:"absolute z-50 w-64 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[j.map((w,N)=>t.jsxs("button",{type:"button",onClick:()=>x(w),className:`w-full text-left px-3 py-2 flex items-center gap-2 ${N===c?"bg-pilot-primary/10 text-pilot-secondary":"hover:bg-gray-50"}`,children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-pilot-secondary text-white flex items-center justify-center text-xs font-medium",children:w.name.split(" ").map(C=>C[0]).join("")}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:w.name}),t.jsx("p",{className:"text-xs text-gray-500 truncate",children:w.title})]})]},w.id)),t.jsxs("div",{className:"px-3 py-1.5 text-xs text-gray-400 border-t border-gray-100",children:["Use ",t.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 rounded",children:"Tab"})," or ",t.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 rounded",children:"Enter"})," to select"]})]})]})}function Oh(e){const s=/@([A-Za-z]+ [A-Za-z]+)/g,n=[];let r;for(;(r=s.exec(e))!==null;){const a=r[1],l=re.find(i=>i.name===a);l&&n.push(l.id)}return[...new Set(n)]}function $h({text:e,className:s=""}){const n=e.split(/(@[A-Za-z]+ [A-Za-z]+)/g);return t.jsx("span",{className:s,children:n.map((r,a)=>{if(r.startsWith("@")){const l=r.slice(1),i=re.find(o=>o.name===l);if(i)return t.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 bg-blue-100 text-blue-700 rounded font-medium text-sm",title:`${i.title} - ${i.email}`,children:["@",i.name]},a)}return t.jsx("span",{children:r},a)})})}function uv(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}function wu({notes:e,onAddNote:s,onDeleteNote:n,onTogglePin:r}){const[a,l]=b.useState(""),[i,o]=b.useState(!1),c=j=>{if(j.preventDefault(),a.trim()){const y=Oh(a.trim());s(a.trim(),y.length>0?y:void 0),l(""),o(!1)}},m=[...e].sort((j,y)=>j.isPinned&&!y.isPinned?-1:!j.isPinned&&y.isPinned?1:new Date(y.createdAt).getTime()-new Date(j.createdAt).getTime());return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(ol,{className:"w-5 h-5"}),"Internal Notes"]}),!i&&t.jsxs(U,{variant:"secondary",size:"sm",onClick:()=>o(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Add Note"]})]}),i&&t.jsxs("form",{onSubmit:c,className:"mb-4",children:[t.jsx(Mh,{value:a,onChange:l,placeholder:"Add a note... Use @ to mention team members",rows:3,autoFocus:!0}),t.jsxs("div",{className:"flex justify-between items-center mt-2",children:[t.jsx("span",{className:"text-xs text-gray-400",children:"Type @ to mention someone"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{variant:"secondary",size:"sm",onClick:()=>{o(!1),l("")},children:"Cancel"}),t.jsx(U,{size:"sm",type:"submit",disabled:!a.trim(),children:"Save Note"})]})]})]}),m.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(ol,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No internal notes yet"}),t.jsx("p",{className:"text-sm",children:"Add notes for your team to see"})]}):t.jsx("ul",{className:"space-y-3",children:m.map(j=>t.jsxs("li",{className:`p-3 rounded-lg border ${j.isPinned?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap flex-1",children:t.jsx($h,{text:j.content})}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>r(j.id),className:`p-1 rounded hover:bg-gray-200 transition-colors ${j.isPinned?"text-yellow-600":"text-gray-400"}`,title:j.isPinned?"Unpin":"Pin",children:t.jsx(uy,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>n(j.id),className:"p-1 rounded hover:bg-red-100 text-gray-400 hover:text-red-600 transition-colors",title:"Delete",children:t.jsx(El,{className:"w-4 h-4"})})]})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[j.author,"  ",uv(j.createdAt)]})]},j.id))})]})}const jo={waiting_customer:"Waiting on Customer",waiting_permit:"Waiting on Permit",waiting_equipment:"Waiting on Equipment",waiting_scheduling:"Waiting on Scheduling",waiting_internal:"Waiting on Internal Team",waiting_vendor:"Waiting on Vendor",waiting_joe:"Waiting on Joe",technical_issue:"Technical Issue",other:"Other"},mv=Object.entries(jo).map(([e,s])=>({value:e,label:s}));function bu(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function pv(e){const s=new Date(e);return Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60*24))}function hv({blockers:e,onAddBlocker:s,onResolveBlocker:n}){const[r,a]=b.useState(!1),[l,i]=b.useState("waiting_customer"),[o,c]=b.useState(""),m=h=>{h.preventDefault(),o.trim()&&(s(l,o.trim()),c(""),i("waiting_customer"),a(!1))},j=e.filter(h=>!h.resolvedAt),y=e.filter(h=>h.resolvedAt);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(vt,{className:"w-5 h-5"}),"Blockers",j.length>0&&t.jsxs("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-0.5 rounded-full",children:[j.length," active"]})]}),!r&&t.jsxs(U,{variant:"secondary",size:"sm",onClick:()=>a(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Add Blocker"]})]}),r&&t.jsxs("form",{onSubmit:m,className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1 block",children:"Type"}),t.jsx(we,{options:mv,value:l,onChange:h=>i(h)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1 block",children:"Description"}),t.jsx("textarea",{value:o,onChange:h=>c(h.target.value),placeholder:"What's blocking this project?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary resize-none",rows:2})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[t.jsx(U,{variant:"secondary",size:"sm",onClick:()=>{a(!1),c("")},children:"Cancel"}),t.jsx(U,{size:"sm",type:"submit",disabled:!o.trim(),children:"Add Blocker"})]})]}),j.length===0&&y.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Pe,{className:"w-8 h-8 mx-auto mb-2 text-green-300"}),t.jsx("p",{children:"No blockers"})]}):t.jsxs("div",{className:"space-y-4",children:[j.length>0&&t.jsx("ul",{className:"space-y-2",children:j.map(h=>{const v=pv(h.createdAt);return t.jsx("li",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-xs font-medium text-red-700 bg-red-100 px-2 py-0.5 rounded",children:jo[h.type]}),t.jsx("p",{className:"text-sm text-gray-700 mt-2",children:h.description}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[t.jsx(se,{className:"w-3 h-3"}),t.jsxs("span",{children:["Added ",bu(h.createdAt)," (",v,"d ago) by ",h.createdBy]})]})]}),t.jsx(U,{variant:"secondary",size:"sm",onClick:()=>n(h.id),children:"Resolve"})]})},h.id)})}),y.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Resolved"}),t.jsx("ul",{className:"space-y-2",children:y.slice(0,3).map(h=>t.jsxs("li",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg opacity-60",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pe,{className:"w-4 h-4 text-green-500"}),t.jsx("span",{className:"text-xs text-gray-500",children:jo[h.type]})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1 line-through",children:h.description}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Resolved ",bu(h.resolvedAt)," by ",h.resolvedBy]})]},h.id))})]})]})]})}const xv=[{id:"intro-1",name:"Welcome - New Customer",category:"intro",subject:"Welcome to Pilot Fiber - {{companyName}} Installation",body:`Hi {{contactName}},

Welcome to Pilot Fiber! I'm {{cxName}} and I'll be your dedicated point of contact throughout your installation process.

Here's what happens next:
1. We'll review your service order and building requirements
2. I'll reach out to schedule your installation appointment
3. Our technician will complete the installation at the scheduled time

Your service details:
- Service: {{product}} - {{bandwidth}}
- Location: {{address}}
- Target Install Date: {{focDate}}

Please don't hesitate to reach out if you have any questions. I'm here to make this process as smooth as possible.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","cxName","product","bandwidth","address","focDate"]},{id:"intro-2",name:"Welcome - Wholesale/Carrier",category:"intro",subject:"Pilot Fiber Installation - {{companyName}} / {{endUserCompany}}",body:`Hi {{contactName}},

Thank you for choosing Pilot Fiber. I'm {{cxName}} and I'll be coordinating the installation for your end user.

End User Details:
- Company: {{endUserCompany}}
- Location: {{address}}
- Service: {{product}} - {{bandwidth}}

Please confirm the end user contact for scheduling coordination, or let me know if you'd prefer we work directly through you.

Target Install Date: {{focDate}}

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","cxName","endUserCompany","product","bandwidth","address","focDate"]},{id:"schedule-1",name:"Schedule Request",category:"scheduling",subject:"Schedule Your Pilot Fiber Installation - {{companyName}}",body:`Hi {{contactName}},

We're ready to schedule your Pilot Fiber installation at {{address}}.

Available time slots:
- Morning: 9:00 AM - 12:00 PM
- Afternoon: 12:00 PM - 5:00 PM

The installation typically takes 1-2 hours. A technician will need access to:
{{accessRequirements}}

Please reply with your preferred date and time slot, and we'll get you on the calendar.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","address","accessRequirements","cxName"]},{id:"schedule-2",name:"After Hours Schedule Request",category:"scheduling",subject:"After Hours Installation - {{companyName}}",body:`Hi {{contactName}},

Based on your building's requirements, your installation will need to be scheduled during after-hours (typically 6 PM - 10 PM or weekends).

Location: {{address}}
Service: {{product}} - {{bandwidth}}

Please let me know which of the following works best for you:
- Weekday evening (6 PM - 10 PM)
- Saturday morning (8 AM - 12 PM)
- Saturday afternoon (12 PM - 4 PM)

Note: After-hours installations may require building management coordination. Please confirm if you need assistance with this.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","address","product","bandwidth","cxName"]},{id:"confirm-1",name:"Installation Confirmed",category:"confirmation",subject:"Installation Confirmed - {{scheduledDate}} - {{companyName}}",body:`Hi {{contactName}},

Great news! Your Pilot Fiber installation is confirmed:

Date: {{scheduledDate}}
Time: {{scheduledTime}}
Location: {{address}}

What to expect:
- Our technician will arrive during your scheduled window
- Installation typically takes 1-2 hours
- Please ensure access to the telecom room/IDF

Someone will need to be on-site to provide access and sign off on the installation.

If you need to reschedule, please let me know at least 24 hours in advance.

See you soon!
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","scheduledDate","scheduledTime","address","cxName"]},{id:"confirm-2",name:"Installation Reminder - 1 Day",category:"confirmation",subject:"Reminder: Pilot Fiber Installation Tomorrow - {{companyName}}",body:`Hi {{contactName}},

This is a friendly reminder that your Pilot Fiber installation is scheduled for tomorrow:

Date: {{scheduledDate}}
Time: {{scheduledTime}}
Location: {{address}}

Please remember:
- Someone must be on-site to provide access
- Have your router ready if you're providing your own equipment
- Our technician will call when they're on their way

If anything has changed, please let me know ASAP.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","scheduledDate","scheduledTime","address","cxName"]},{id:"followup-1",name:"Follow-up - No Response",category:"follow_up",subject:"Following Up - Pilot Fiber Installation - {{companyName}}",body:`Hi {{contactName}},

I wanted to follow up on my previous email regarding your Pilot Fiber installation.

We're ready to get you connected at {{address}}. Please let me know your availability so we can schedule your installation.

Your service details:
- Service: {{product}} - {{bandwidth}}
- Target Date: {{focDate}}

Is there anything holding you up or any questions I can answer?

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","address","product","bandwidth","focDate","cxName"]},{id:"followup-2",name:"Follow-up - Post-Install Check-in",category:"follow_up",subject:"How's Everything Working? - {{companyName}}",body:`Hi {{contactName}},

It's been a few days since your Pilot Fiber installation, and I wanted to check in.

How's everything working? Is your internet performing as expected?

If you have any questions or are experiencing any issues, please don't hesitate to reach out. We're here to help!

For technical support, you can also reach our NOC at support@pilotfiber.com or (212) 555-0199.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","cxName"]},{id:"delay-1",name:"Delay Notification - General",category:"delay",subject:"Update on Your Pilot Fiber Installation - {{companyName}}",body:`Hi {{contactName}},

I wanted to give you an update on your Pilot Fiber installation at {{address}}.

Unfortunately, we've encountered a delay: {{delayReason}}

New estimated timeline: {{newEstimate}}

I apologize for any inconvenience this may cause. We're working to resolve this as quickly as possible, and I'll keep you updated on our progress.

Please don't hesitate to reach out if you have any questions.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","address","delayReason","newEstimate","cxName"]},{id:"delay-2",name:"Reschedule Required",category:"delay",subject:"Reschedule Needed - Pilot Fiber Installation - {{companyName}}",body:`Hi {{contactName}},

I'm reaching out because we need to reschedule your installation that was planned for {{originalDate}}.

Reason: {{rescheduleReason}}

I'd like to get you rescheduled as soon as possible. Please let me know your availability for the following dates:
{{availableDates}}

Again, I apologize for any inconvenience. We'll make sure your rescheduled installation goes smoothly.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","originalDate","rescheduleReason","availableDates","cxName"]},{id:"complete-1",name:"Installation Complete",category:"completion",subject:"Welcome to Pilot Fiber! Installation Complete - {{companyName}}",body:`Hi {{contactName}},

Congratulations! Your Pilot Fiber installation is complete, and you're now connected to NYC's fastest fiber network.

Installation Summary:
- Service: {{product}} - {{bandwidth}}
- Location: {{address}}
- Device Installed: {{device}}
- Completed: {{completedDate}}

Important Information:
- For technical support: support@pilotfiber.com or (212) 555-0199
- Your first bill will arrive within 30 days
- Service agreement and welcome packet will be emailed separately

Thank you for choosing Pilot Fiber! If you have any questions, I'm always here to help.

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","product","bandwidth","address","device","completedDate","cxName"]},{id:"complete-2",name:"Survey Request",category:"completion",subject:"How Did We Do? - {{companyName}}",body:`Hi {{contactName}},

Now that your Pilot Fiber installation is complete, we'd love to hear about your experience.

Would you take 2 minutes to complete a brief survey?
{{surveyLink}}

Your feedback helps us improve our service and ensures we're delivering the best possible experience.

Thank you for choosing Pilot Fiber!

Best regards,
{{cxName}}
Pilot Fiber Customer Experience`,variables:["companyName","contactName","surveyLink","cxName"]}],gv=e=>xv.filter(s=>s.category===e),fv={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};function yv({isOpen:e,onClose:s,title:n,children:r,footer:a,className:l="",size:i="md"}){return b.useEffect(()=>{const o=c=>{c.key==="Escape"&&e&&s()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,s]),e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 animate-fadeIn",onClick:s,children:t.jsxs("div",{className:`bg-white rounded-lg shadow-2xl ${fv[i]} w-full max-h-[90vh] overflow-y-auto animate-scaleIn ${l}`,onClick:o=>o.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:t.jsx(mt,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"p-6",children:r}),a&&t.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:a})]})}):null}const ku={intro:"Introduction",scheduling:"Scheduling",confirmation:"Confirmation",follow_up:"Follow-up",delay:"Delay",completion:"Completion"};function xa(e,s){let n=e;return Object.entries(s).forEach(([r,a])=>{n=n.replace(new RegExp(`{{${r}}}`,"g"),a||`[${r}]`)}),n=n.replace(/{{(\w+)}}/g,"[$1]"),n}function vv({isOpen:e,onClose:s,variables:n={}}){const[r,a]=b.useState("intro"),[l,i]=b.useState(null),[o,c]=b.useState(null),m=gv(r),j=async h=>{if(!l)return;const v=xa(h==="subject"?l.subject:l.body,n);await navigator.clipboard.writeText(v),c(h),setTimeout(()=>c(null),2e3)},y=()=>{i(null),s()};return t.jsxs(yv,{isOpen:e,onClose:y,title:"Email Templates",size:"lg",children:[t.jsxs("div",{className:"flex h-[500px]",children:[t.jsxs("div",{className:"w-64 border-r border-gray-200 pr-4 overflow-y-auto",children:[t.jsx("div",{className:"space-y-1 mb-4",children:Object.keys(ku).map(h=>t.jsx("button",{onClick:()=>{a(h),i(null)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${r===h?"bg-pilot-primary text-pilot-secondary font-medium":"text-gray-600 hover:bg-gray-100"}`,children:ku[h]},h))}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Templates"}),t.jsx("ul",{className:"space-y-1",children:m.map(h=>t.jsx("li",{children:t.jsx("button",{onClick:()=>i(h),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${(l==null?void 0:l.id)===h.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:h.name})},h.id))})]})]}),t.jsx("div",{className:"flex-1 pl-4 overflow-y-auto",children:l?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Subject"}),t.jsxs("button",{onClick:()=>j("subject"),className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[o==="subject"?t.jsx(Ct,{className:"w-3 h-3"}):t.jsx(Cn,{className:"w-3 h-3"}),o==="subject"?"Copied!":"Copy"]})]}),t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:xa(l.subject,n)})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Body"}),t.jsxs("button",{onClick:()=>j("body"),className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[o==="body"?t.jsx(Ct,{className:"w-3 h-3"}):t.jsx(Cn,{className:"w-3 h-3"}),o==="body"?"Copied!":"Copy"]})]}),t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm whitespace-pre-wrap max-h-[300px] overflow-y-auto",children:xa(l.body,n)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 block",children:"Variables Used"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:l.variables.map(h=>t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${n[h]?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[h,": ",n[h]||"Not set"]},h))})]})]}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(le,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{children:"Select a template to preview"})]})})})]}),t.jsx("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:t.jsx(U,{variant:"secondary",onClick:y,children:"Close"})})]})}const Fc="http://localhost:3001/api";async function jv(e,s){try{const n=await fetch(`${Fc}/compose`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentText:e,context:s})});if(!n.ok)throw new Error(`API error: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to get completion:",n),{suggestion:"",confidence:0}}}async function Nv(e,s,n){try{const r=await fetch(`${Fc}/suggestions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scenario:e,variables:s,tone:n==null?void 0:n.tone,useCache:(n==null?void 0:n.useCache)??!0})});if(!r.ok)throw new Error(`API error: ${r.status}`);return await r.json()}catch(r){return console.error("Failed to get suggestions:",r),{suggestions:[],cached:!1}}}async function wv(){try{const e=await fetch(`${Fc}/suggestions/scenarios`);if(!e.ok)throw new Error(`API error: ${e.status}`);return(await e.json()).scenarios}catch(e){return console.error("Failed to get scenarios:",e),[{id:"intro",description:"Welcome email for new customer onboarding"},{id:"scheduling",description:"Request to schedule installation appointment"},{id:"confirmation",description:"Confirm scheduled installation date"},{id:"delay",description:"Notify customer of installation delay"},{id:"completion",description:"Post-installation follow-up and survey request"},{id:"follow_up",description:"General follow-up on outstanding items"}]}}function bv({context:e,debounceMs:s=300,minChars:n=10,enabled:r=!0}){const[a,l]=b.useState(null),[i,o]=b.useState(!1),[c,m]=b.useState(null),j=b.useRef(null),y=b.useRef(""),h=b.useRef(null);b.useEffect(()=>()=>{j.current&&clearTimeout(j.current),h.current&&h.current.abort()},[]);const v=b.useCallback(d=>{if(y.current=d,j.current&&clearTimeout(j.current),!r||d.trim().length<n){l(null),o(!1);return}const x=d.slice(-1);[".","!","?",`
`].includes(x)&&o(!0),j.current=window.setTimeout(async()=>{h.current&&h.current.abort(),h.current=new AbortController,o(!0),m(null);try{const u=await jv(d,e);y.current===d&&(u.suggestion&&u.confidence>.5?l(u.suggestion):l(null))}catch(u){u instanceof Error&&u.name!=="AbortError"&&(m("Failed to get suggestion"),l(null))}finally{o(!1)}},s)},[e,s,n,r]),g=b.useCallback(()=>{const d=a||"";return l(null),d},[a]),p=b.useCallback(()=>{l(null)},[]),f=b.useCallback(()=>{l(null),o(!1),m(null),j.current&&clearTimeout(j.current)},[]);return{suggestion:a,isLoading:i,error:c,fetchSuggestion:v,acceptSuggestion:g,dismissSuggestion:p,clearSuggestion:f}}function kv({value:e,onChange:s,context:n,placeholder:r="Start typing...",rows:a=6,className:l="",disabled:i=!1,aiEnabled:o=!0}){const c=b.useRef(null),m=b.useRef(null),[j,y]=b.useState(!1),{suggestion:h,isLoading:v,fetchSuggestion:g,acceptSuggestion:p,dismissSuggestion:f}=bv({context:n,enabled:o&&!i,debounceMs:400,minChars:15});b.useEffect(()=>{o&&!i&&g(e)},[e,o,i,g]),b.useEffect(()=>{if(h){y(!0);const w=setTimeout(()=>y(!1),3e3);return()=>clearTimeout(w)}},[h]);const d=w=>{if(h)if(w.key==="Tab"){w.preventDefault();const N=p();s(e+N)}else w.key==="Escape"?(w.preventDefault(),f()):w.key!=="Shift"&&w.key!=="Control"&&w.key!=="Alt"&&w.key!=="Meta"&&f()},x=w=>{s(w.target.value)},u=()=>e;return t.jsxs("div",{className:`relative ${l}`,children:[t.jsx("div",{ref:m,className:"absolute inset-0 pointer-events-none overflow-hidden whitespace-pre-wrap break-words px-3 py-2 text-sm",style:{visibility:"hidden"},"aria-hidden":"true",children:u()}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:c,value:e,onChange:x,onKeyDown:d,placeholder:r,rows:a,disabled:i,className:`
            w-full px-3 py-2 border border-gray-300 rounded-lg text-sm
            focus:outline-none focus:ring-2 focus:ring-pilot-primary
            resize-none transition-colors
            ${i?"bg-gray-50 cursor-not-allowed":"bg-white"}
          `,style:{caretColor:"black"}}),h&&!i&&t.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden","aria-hidden":"true",children:t.jsxs("div",{className:"px-3 py-2 text-sm whitespace-pre-wrap break-words",children:[t.jsx("span",{className:"invisible",children:e}),t.jsx("span",{className:"text-gray-400",children:h})]})})]}),t.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-2",children:[v&&t.jsx("div",{className:"flex items-center gap-1 text-gray-400",children:t.jsx(bh,{className:"w-3 h-3 animate-spin"})}),h&&j&&t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 rounded text-xs text-gray-500 animate-fade-in",children:[t.jsx("span",{children:"Press"}),t.jsx("kbd",{className:"px-1 bg-white border border-gray-200 rounded text-gray-600",children:"Tab"}),t.jsx("span",{children:"to accept"})]}),o&&!i&&t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${h?"bg-pilot-primary/20 text-pilot-secondary":"bg-gray-100 text-gray-400"}`,title:"AI Smart Compose enabled",children:[t.jsx(il,{className:"w-3 h-3"}),t.jsx("span",{className:"hidden sm:inline",children:"AI"})]})]}),h&&t.jsxs("div",{className:"sr-only",role:"status","aria-live":"polite",children:["Suggestion available: ",h,". Press Tab to accept."]})]})}const ga={friendly:{label:"Friendly",description:"Warm and approachable"},formal:{label:"Formal",description:"Professional and business-like"},urgent:{label:"Urgent",description:"Time-sensitive communication"}},Cv={"early-7":"7:00 AM","morning-9":"9:00 AM","morning-11":"11:00 AM","all-day":"All Day","after-hours":"6:00 PM"};function Sv({isOpen:e,onClose:s,project:n,customer:r,building:a}){const[l,i]=b.useState([]),[o,c]=b.useState("intro"),[m,j]=b.useState("friendly"),[y,h]=b.useState([]),[v,g]=b.useState(!1),[p,f]=b.useState(null),[d,x]=b.useState(""),[u,w]=b.useState(""),[N,C]=b.useState(""),[k,I]=b.useState(!1),[z,_]=b.useState(!1),[D,Q]=b.useState(!1),F=r.contacts.find(O=>O.isPrimary)||r.contacts[0],K={customerName:(F==null?void 0:F.name)||"",companyName:r.companyName,projectType:n.projectType,status:n.status,product:n.product,bandwidth:n.serviceBandwidth,scheduledDate:n.scheduledDate?new Date(n.scheduledDate).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):void 0,focDate:new Date(n.focDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),buildingAddress:a.address,cxName:G.name},pe={contactName:(F==null?void 0:F.name)||"Valued Customer",companyName:r.companyName,cxName:G.name,address:a.address,product:n.product,bandwidth:n.serviceBandwidth,focDate:K.focDate||"",scheduledDate:K.scheduledDate||"TBD",scheduledTime:n.scheduledSlot?Cv[n.scheduledSlot]:"TBD",device:n.device||"appropriate equipment",accessRequirements:a.accessInstructions||"Please coordinate access with building management"};b.useEffect(()=>{wv().then(i)},[]),b.useEffect(()=>{e&&(F!=null&&F.email)&&C(F.email)},[e,F]);const De=async()=>{g(!0);try{const O=await Nv(o,pe);if(h(O.suggestions),O.suggestions.length>0){const X=O.suggestions[0];f(X.id),x(X.subject),w(X.body)}}catch(O){console.error("Failed to load suggestions:",O)}finally{g(!1)}};b.useEffect(()=>{e&&De()},[e,o]);const J=O=>{f(O.id),x(O.subject),w(O.body)},P=async O=>{let X="";O==="subject"?X=d:O==="body"?X=u:X=`Subject: ${d}

${u}`,await navigator.clipboard.writeText(X),O==="subject"?(I(!0),setTimeout(()=>I(!1),2e3)):O==="body"?(_(!0),setTimeout(()=>_(!1),2e3)):(Q(!0),setTimeout(()=>Q(!1),2e3))},B=()=>{const O=`mailto:${N}?subject=${encodeURIComponent(d)}&body=${encodeURIComponent(u)}`;window.open(O,"_blank")};return e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(il,{className:"w-5 h-5 text-pilot-secondary"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Email Composer"})]}),t.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx(mt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsxs("div",{className:"w-72 border-r border-gray-200 flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-gray-100",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"EMAIL TYPE"}),t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:o,onChange:O=>c(O.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:l.map(O=>t.jsx("option",{value:O.id,children:O.description},O.id))}),t.jsx(ke,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),t.jsxs("div",{className:"p-4 border-b border-gray-100",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"TONE"}),t.jsx("div",{className:"flex gap-2",children:Object.keys(ga).map(O=>t.jsx("button",{onClick:()=>j(O),className:`flex-1 px-2 py-1.5 rounded text-xs font-medium transition-colors ${m===O?"bg-pilot-secondary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:ga[O].description,children:ga[O].label},O))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"text-xs font-medium text-gray-500",children:"SUGGESTIONS"}),t.jsx("button",{onClick:De,disabled:v,className:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Regenerate suggestions",children:t.jsx(hy,{className:`w-4 h-4 ${v?"animate-spin":""}`})})]}),v?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(bh,{className:"w-6 h-6 animate-spin text-gray-400"})}):y.length===0?t.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No suggestions available"}):t.jsx("div",{className:"space-y-2",children:y.map(O=>t.jsxs("button",{onClick:()=>J(O),className:`w-full text-left p-3 rounded-lg border transition-colors ${p===O.id?"border-pilot-secondary bg-pilot-primary/10":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs font-medium ${O.tone==="formal"?"bg-blue-100 text-blue-700":O.tone==="urgent"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ga[O.tone].label})}),t.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:O.subject}),t.jsxs("p",{className:"text-xs text-gray-500 line-clamp-2 mt-1",children:[O.body.slice(0,100),"..."]})]},O.id))})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TO"}),t.jsx("input",{type:"email",value:N,onChange:O=>C(O.target.value),placeholder:"recipient@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("label",{className:"text-xs font-medium text-gray-500",children:"SUBJECT"}),t.jsx("button",{onClick:()=>P("subject"),className:"flex items-center gap-1 text-xs text-gray-400 hover:text-gray-600",children:k?t.jsxs(t.Fragment,{children:[t.jsx(Ct,{className:"w-3 h-3 text-green-500"}),t.jsx("span",{className:"text-green-500",children:"Copied"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Cn,{className:"w-3 h-3"}),t.jsx("span",{children:"Copy"})]})})]}),t.jsx("input",{type:"text",value:d,onChange:O=>x(O.target.value),placeholder:"Email subject...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("label",{className:"text-xs font-medium text-gray-500",children:"MESSAGE"}),t.jsx("button",{onClick:()=>P("body"),className:"flex items-center gap-1 text-xs text-gray-400 hover:text-gray-600",children:z?t.jsxs(t.Fragment,{children:[t.jsx(Ct,{className:"w-3 h-3 text-green-500"}),t.jsx("span",{className:"text-green-500",children:"Copied"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Cn,{className:"w-3 h-3"}),t.jsx("span",{children:"Copy"})]})})]}),t.jsx(kv,{value:u,onChange:w,context:K,placeholder:"Compose your email...",rows:12,aiEnabled:!0})]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[t.jsxs("div",{className:"text-xs text-gray-400",children:[t.jsx(il,{className:"w-3 h-3 inline mr-1"}),"AI-powered suggestions  Press Tab to accept inline completions"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(U,{variant:"secondary",size:"sm",onClick:()=>P("all"),children:D?t.jsxs(t.Fragment,{children:[t.jsx(Ct,{className:"w-4 h-4 mr-1 text-green-500"}),"Copied!"]}):t.jsxs(t.Fragment,{children:[t.jsx(Cn,{className:"w-4 h-4 mr-1"}),"Copy All"]})}),t.jsxs(U,{size:"sm",onClick:B,children:[t.jsx(le,{className:"w-4 h-4 mr-1"}),"Open in Email",t.jsx(Zs,{className:"w-3 h-3 ml-1"})]})]})]})]})]})]})}):null}function Dv({project:e,onUpdateTask:s}){const[n,r]=b.useState(null),a=e.readinessTasks||[],l=a.filter(v=>v.completed),i=a.filter(v=>v.critical&&!v.completed),o=a.length>0?Math.round(l.length/a.length*100):0,c=i.length===0,m=v=>{s&&s(v.id,{completed:!v.completed})},j=(v,g)=>{s&&s(v,{assignee:g||void 0}),r(null)},y=(v,g)=>{s&&s(v,{dueDate:g||void 0})},h=v=>{if(!v)return null;const g=new Date(v),p=new Date,f=new Date(p);return f.setDate(f.getDate()+1),g.toDateString()===p.toDateString()?{label:"Today",className:"text-orange-600 bg-orange-50"}:g.toDateString()===f.toDateString()?{label:"Tomorrow",className:"text-blue-600 bg-blue-50"}:g<p?{label:"Overdue",className:"text-red-600 bg-red-50"}:{label:g.toLocaleDateString("en-US",{month:"short",day:"numeric"}),className:"text-gray-600 bg-gray-50"}};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Install Readiness"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all ${c?"bg-green-500":o>50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})}),t.jsxs("span",{className:`text-sm font-medium ${c?"text-green-600":"text-gray-600"}`,children:[o,"%"]})]})]}),!c&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[t.jsx(vt,{className:"w-4 h-4"}),t.jsxs("span",{className:"text-sm font-medium",children:[i.length," critical item",i.length>1?"s":""," incomplete"]})]})}),t.jsx("ul",{className:"space-y-2",children:a.map(v=>{const g=n===v.id,p=h(v.dueDate);return t.jsxs("li",{className:`rounded-lg border transition-colors ${v.completed?"bg-gray-50 border-gray-100":v.critical?"bg-white border-red-200":"bg-white border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 p-2",children:[t.jsx("button",{onClick:()=>m(v),className:"flex-shrink-0",disabled:!s,children:v.completed?t.jsx(He,{className:"w-5 h-5 text-green-500"}):t.jsx(Js,{className:`w-5 h-5 ${v.critical?"text-red-400":"text-gray-300"} hover:text-gray-400`})}),t.jsx("span",{className:`flex-1 text-sm ${v.completed?"line-through text-gray-500":"text-gray-900"}`,children:v.label}),v.critical&&!v.completed&&t.jsx("span",{className:"text-xs text-red-600 font-medium px-1.5 py-0.5 bg-red-50 rounded",children:"Required"}),p&&t.jsx("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${p.className}`,children:p.label}),v.assignee&&t.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[t.jsx(Le,{className:"w-3 h-3"}),v.assignee]}),s&&t.jsx("button",{onClick:()=>r(g?null:v.id),className:"p-1 hover:bg-gray-100 rounded",children:t.jsx(ke,{className:`w-4 h-4 text-gray-400 transition-transform ${g?"rotate-180":""}`})})]}),g&&s&&t.jsxs("div",{className:"px-9 pb-3 pt-1 border-t border-gray-100 flex gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Assignee"}),t.jsxs("select",{value:v.assignee||"",onChange:f=>j(v.id,f.target.value),className:"w-full text-sm border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"Unassigned"}),re.map(f=>t.jsx("option",{value:f.name,children:f.name},f.id))]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Due Date"}),t.jsx("input",{type:"date",value:v.dueDate?v.dueDate.split("T")[0]:"",onChange:f=>y(v.id,f.target.value?new Date(f.target.value).toISOString():""),className:"w-full text-sm border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-pilot-primary"})]})]})]},v.id)})}),c&&t.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[t.jsx(He,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium",children:"Ready for installation"})]})})]})}const Tv={call:t.jsx(Oe,{className:"w-4 h-4"}),email:t.jsx(le,{className:"w-4 h-4"}),meeting:t.jsx(Je,{className:"w-4 h-4"}),text:t.jsx(Xe,{className:"w-4 h-4"}),other:t.jsx(ay,{className:"w-4 h-4"})},Iv={call:"Phone Call",email:"Email",meeting:"Meeting",text:"Text Message",other:"Other"},Av={call:"bg-green-100 text-green-700",email:"bg-blue-100 text-blue-700",meeting:"bg-purple-100 text-purple-700",text:"bg-cyan-100 text-cyan-700",other:"bg-gray-100 text-gray-700"};function Pv({entries:e,onAddEntry:s}){const[n,r]=b.useState(!1),[a,l]=b.useState({type:"call",direction:"outbound",contactName:"",summary:"",notes:"",duration:0,followUpRequired:!1,followUpDate:""}),i=c=>{c.preventDefault(),!(!a.contactName||!a.summary)&&(s({type:a.type,direction:a.direction,contactName:a.contactName,summary:a.summary,notes:a.notes||void 0,duration:a.duration||void 0,followUpRequired:a.followUpRequired,followUpDate:a.followUpDate?new Date(a.followUpDate).toISOString():void 0}),l({type:"call",direction:"outbound",contactName:"",summary:"",notes:"",duration:0,followUpRequired:!1,followUpDate:""}),r(!1))},o=c=>{const m=new Date(c),y=Math.floor((new Date().getTime()-m.getTime())/(1e3*60*60*24));return y===0?`Today at ${m.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:y===1?`Yesterday at ${m.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:m.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(Oe,{className:"w-5 h-5"}),"Communication Log"]}),!n&&t.jsxs(U,{size:"sm",variant:"secondary",onClick:()=>r(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Log Communication"]})]}),n&&t.jsxs("form",{onSubmit:i,className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Type"}),t.jsx("select",{value:a.type,onChange:c=>l(m=>({...m,type:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Object.entries(Iv).map(([c,m])=>t.jsx("option",{value:c,children:m},c))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Direction"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>l(c=>({...c,direction:"outbound"})),className:`flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-sm border ${a.direction==="outbound"?"bg-pilot-primary text-pilot-secondary border-pilot-primary":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[t.jsx(xu,{className:"w-4 h-4"}),"Outbound"]}),t.jsxs("button",{type:"button",onClick:()=>l(c=>({...c,direction:"inbound"})),className:`flex-1 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-sm border ${a.direction==="inbound"?"bg-pilot-primary text-pilot-secondary border-pilot-primary":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[t.jsx(hu,{className:"w-4 h-4"}),"Inbound"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Contact Name *"}),t.jsx("input",{type:"text",value:a.contactName,onChange:c=>l(m=>({...m,contactName:c.target.value})),placeholder:"Who did you speak with?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Duration (minutes)"}),t.jsx("input",{type:"number",value:a.duration||"",onChange:c=>l(m=>({...m,duration:parseInt(c.target.value)||0})),placeholder:"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Summary *"}),t.jsx("input",{type:"text",value:a.summary,onChange:c=>l(m=>({...m,summary:c.target.value})),placeholder:"Brief summary of the communication",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Notes"}),t.jsx("textarea",{value:a.notes,onChange:c=>l(m=>({...m,notes:c.target.value})),placeholder:"Additional details...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary resize-none"})]}),t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.followUpRequired,onChange:c=>l(m=>({...m,followUpRequired:c.target.checked})),className:"w-4 h-4 rounded border-gray-300 text-pilot-primary focus:ring-pilot-primary"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Follow-up required"})]}),a.followUpRequired&&t.jsx("input",{type:"date",value:a.followUpDate,onChange:c=>l(m=>({...m,followUpDate:c.target.value})),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(U,{type:"button",variant:"secondary",size:"sm",onClick:()=>r(!1),children:"Cancel"}),t.jsx(U,{type:"submit",size:"sm",children:"Log Communication"})]})]}),!e||e.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Oe,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"text-sm",children:"No communications logged yet"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Click "Log Communication" to record a touchpoint'})]}):t.jsx("div",{className:"space-y-3",children:e.map(c=>t.jsx("div",{className:"p-3 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${Av[c.type]}`,children:Tv[c.type]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-gray-900",children:c.summary}),c.direction==="inbound"?t.jsxs("span",{className:"flex items-center gap-0.5 text-xs text-gray-500",children:[t.jsx(hu,{className:"w-3 h-3"}),"from"]}):t.jsxs("span",{className:"flex items-center gap-0.5 text-xs text-gray-500",children:[t.jsx(xu,{className:"w-3 h-3"}),"to"]}),t.jsx("span",{className:"text-sm text-gray-700",children:c.contactName})]}),c.notes&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.notes}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(se,{className:"w-3 h-3"}),o(c.createdAt)]}),c.duration&&t.jsxs("span",{children:[c.duration," min"]}),c.followUpRequired&&c.followUpDate&&t.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[t.jsx(Kf,{className:"w-3 h-3"}),"Follow-up: ",new Date(c.followUpDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),t.jsxs("span",{className:"text-gray-400",children:["by ",c.author]})]})]})]})},c.id))})]})}const Ev=[{value:"new",label:"New",icon:t.jsx(se,{className:"w-4 h-4"}),color:"text-blue-600"},{value:"reviewing",label:"Reviewing",icon:t.jsx(my,{className:"w-4 h-4"}),color:"text-yellow-600"},{value:"scheduled",label:"Scheduled",icon:t.jsx(me,{className:"w-4 h-4"}),color:"text-cyan-600"},{value:"confirmed",label:"Confirmed",icon:t.jsx(He,{className:"w-4 h-4"}),color:"text-green-600"},{value:"installing",label:"Installing",icon:t.jsx(As,{className:"w-4 h-4"}),color:"text-orange-600"},{value:"completed",label:"Completed",icon:t.jsx(He,{className:"w-4 h-4"}),color:"text-gray-600"}],Rv=[{value:"waiting_customer",label:"Waiting on Customer"},{value:"waiting_permit",label:"Waiting on Permit"},{value:"waiting_equipment",label:"Waiting on Equipment"},{value:"waiting_scheduling",label:"Waiting on Scheduling"},{value:"waiting_internal",label:"Waiting on Internal"},{value:"waiting_vendor",label:"Waiting on Vendor"},{value:"waiting_joe",label:"Waiting on Joe"},{value:"technical_issue",label:"Technical Issue"},{value:"other",label:"Other"}];function Mv({project:e,onLogCommunication:s,onAddNote:n,onAddBlocker:r,onChangeStatus:a,onToggleEscalation:l,onOpenEmailTemplates:i,onOpenAIComposer:o}){const[c,m]=b.useState("menu"),[j,y]=b.useState("call"),[h,v]=b.useState("outbound"),[g,p]=b.useState(""),[f,d]=b.useState(""),[x,u]=b.useState(""),[w,N]=b.useState("waiting_customer"),[C,k]=b.useState(""),I=()=>{!g||!f||(s(j,h,g,f),p(""),d(""),m("menu"))},z=()=>{if(!x)return;const J=Oh(x);n(x,J.length>0?J:void 0),u(""),m("menu")},_=()=>{C&&(r(w,C),k(""),m("menu"))},D=J=>{a(J),m("menu")},Q=()=>t.jsxs("div",{className:"space-y-1",children:[t.jsxs("button",{onClick:()=>m("log-comm"),className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(Oe,{className:"w-4 h-4 text-green-600"}),t.jsx("span",{className:"flex-1",children:"Log Communication"}),t.jsx(Lt,{className:"w-4 h-4 text-gray-400"})]}),t.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(le,{className:"w-4 h-4 text-blue-600"}),t.jsx("span",{className:"flex-1",children:"Email Templates"}),t.jsx(Lt,{className:"w-4 h-4 text-gray-400"})]}),o&&t.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(il,{className:"w-4 h-4 text-purple-600"}),t.jsx("span",{className:"flex-1",children:"AI Compose"}),t.jsx(Lt,{className:"w-4 h-4 text-gray-400"})]}),t.jsxs("button",{onClick:()=>m("add-note"),className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(ol,{className:"w-4 h-4 text-yellow-600"}),t.jsx("span",{className:"flex-1",children:"Add Note"}),t.jsx(Lt,{className:"w-4 h-4 text-gray-400"})]}),t.jsxs("button",{onClick:()=>m("add-blocker"),className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(hr,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"flex-1",children:"Add Blocker"}),t.jsx(Lt,{className:"w-4 h-4 text-gray-400"})]}),t.jsxs("button",{onClick:()=>m("change-status"),className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(He,{className:"w-4 h-4 text-cyan-600"}),t.jsx("span",{className:"flex-1",children:"Change Status"}),t.jsx(Lt,{className:"w-4 h-4 text-gray-400"})]}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsx("button",{onClick:l,className:`w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg hover:bg-gray-100 transition-colors ${e.isEscalated?"text-red-600":""}`,children:e.isEscalated?t.jsxs(t.Fragment,{children:[t.jsx(zf,{className:"w-4 h-4"}),t.jsx("span",{className:"flex-1",children:"De-escalate"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Hf,{className:"w-4 h-4 text-orange-600"}),t.jsx("span",{className:"flex-1",children:"Escalate"})]})})]}),F=()=>t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-sm",children:"Log Communication"}),t.jsx("button",{onClick:()=>m("menu"),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex gap-2",children:[{type:"call",icon:t.jsx(Oe,{className:"w-3.5 h-3.5"}),label:"Call"},{type:"email",icon:t.jsx(le,{className:"w-3.5 h-3.5"}),label:"Email"},{type:"meeting",icon:t.jsx(Je,{className:"w-3.5 h-3.5"}),label:"Meeting"},{type:"text",icon:t.jsx(Xe,{className:"w-3.5 h-3.5"}),label:"Text"}].map(({type:J,icon:P,label:B})=>t.jsxs("button",{onClick:()=>y(J),className:`flex-1 flex flex-col items-center gap-1 py-2 rounded-lg text-xs transition-colors ${j===J?"bg-pilot-primary text-pilot-secondary":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[P,B]},J))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>v("outbound"),className:`flex-1 py-1.5 text-xs rounded-lg border ${h==="outbound"?"bg-pilot-primary text-pilot-secondary border-pilot-primary":"bg-white text-gray-600 border-gray-300"}`,children:"Outbound"}),t.jsx("button",{onClick:()=>v("inbound"),className:`flex-1 py-1.5 text-xs rounded-lg border ${h==="inbound"?"bg-pilot-primary text-pilot-secondary border-pilot-primary":"bg-white text-gray-600 border-gray-300"}`,children:"Inbound"})]}),t.jsx("input",{type:"text",placeholder:"Contact name",value:g,onChange:J=>p(J.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),t.jsx("input",{type:"text",placeholder:"Quick summary",value:f,onChange:J=>d(J.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),t.jsx(U,{size:"sm",onClick:I,disabled:!g||!f,className:"w-full",children:"Log Communication"})]}),K=()=>t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-sm",children:"Add Note"}),t.jsx("button",{onClick:()=>m("menu"),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"w-4 h-4"})})]}),t.jsx(Mh,{placeholder:"Write a note... Use @ to mention",value:x,onChange:u,rows:3,className:"text-sm"}),t.jsx(U,{size:"sm",onClick:z,disabled:!x,className:"w-full",children:"Add Note"})]}),pe=()=>t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-sm",children:"Add Blocker"}),t.jsx("button",{onClick:()=>m("menu"),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"w-4 h-4"})})]}),t.jsx("select",{value:w,onChange:J=>N(J.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Rv.map(({value:J,label:P})=>t.jsx("option",{value:J,children:P},J))}),t.jsx("input",{type:"text",placeholder:"Describe the blocker...",value:C,onChange:J=>k(J.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),t.jsx(U,{size:"sm",onClick:_,disabled:!C,className:"w-full",children:"Add Blocker"})]}),De=()=>t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-sm",children:"Change Status"}),t.jsx("button",{onClick:()=>m("menu"),className:"text-gray-400 hover:text-gray-600",children:t.jsx(ha,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"space-y-1",children:Ev.map(({value:J,label:P,icon:B,color:O})=>t.jsxs("button",{onClick:()=>D(J),disabled:e.status===J,className:`w-full flex items-center gap-3 px-3 py-2 text-left text-sm rounded-lg transition-colors ${e.status===J?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-100"}`,children:[t.jsx("span",{className:O,children:B}),t.jsx("span",{className:"flex-1",children:P}),e.status===J&&t.jsx("span",{className:"text-xs text-gray-400",children:"Current"})]},J))})]});return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(As,{className:"w-5 h-5 text-pilot-primary"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Quick Actions"})]}),c==="menu"&&Q(),c==="log-comm"&&F(),c==="add-note"&&K(),c==="add-blocker"&&pe(),c==="change-status"&&De()]})}function Lh({isOpen:e,onClose:s,editGroup:n,defaultCustomerId:r,onGroupCreated:a}){const{state:l,dispatch:i}=Se(),[o,c]=b.useState({name:"",description:"",customerId:"",color:oi[0].value}),[m,j]=b.useState({});b.useEffect(()=>{c(n?{name:n.name,description:n.description||"",customerId:n.customerId,color:n.color}:{name:"",description:"",customerId:r||"",color:oi[0].value}),j({})},[n,r,e]);const y=(g,p)=>{c(f=>({...f,[g]:p})),j(f=>({...f,[g]:""}))},h=()=>{const g={};return o.name.trim()||(g.name="Group name is required"),o.customerId||(g.customerId="Please select a customer"),j(g),Object.keys(g).length===0},v=g=>{if(g.preventDefault(),!h())return;const p=new Date().toISOString();if(n){const f={...n,name:o.name.trim(),description:o.description.trim()||void 0,customerId:o.customerId,color:o.color,updatedAt:p};i({type:"UPDATE_PROJECT_GROUP",payload:f}),s()}else{const f={id:`group-${Date.now()}`,name:o.name.trim(),description:o.description.trim()||void 0,customerId:o.customerId,color:o.color,createdAt:p,updatedAt:p,createdBy:"Current User"};i({type:"ADD_PROJECT_GROUP",payload:f}),a==null||a(f.id),s()}};return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:s}),t.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Cs,{className:"w-5 h-5 text-gray-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Project Group":"Create Project Group"})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(mt,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:v,className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name *"}),t.jsx("input",{type:"text",value:o.name,onChange:g=>y("name",g.target.value),placeholder:"e.g., Q1 Multi-Site Rollout",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-500 ${m.name?"border-red-500":"border-gray-300"}`}),m.name&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:o.description,onChange:g=>y("description",g.target.value),placeholder:"Brief description of the project group...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer *"}),t.jsxs("select",{value:o.customerId,onChange:g=>y("customerId",g.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-500 ${m.customerId?"border-red-500":"border-gray-300"}`,children:[t.jsx("option",{value:"",children:"Select a customer..."}),l.customers.map(g=>t.jsx("option",{value:g.id,children:g.companyName},g.id))]}),m.customerId&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.customerId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:oi.map(g=>t.jsx("button",{type:"button",onClick:()=>y("color",g.value),className:`w-8 h-8 rounded-full transition-all ${o.color===g.value?"ring-2 ring-offset-2 ring-gray-400 scale-110":"hover:scale-105"}`,style:{backgroundColor:g.value},title:g.name},g.value))})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-200 flex justify-end gap-3",children:[t.jsx(U,{variant:"secondary",onClick:s,type:"button",children:"Cancel"}),t.jsx(U,{variant:"primary",type:"submit",children:n?"Save Changes":"Create Group"})]})]})]})]})}):null}function Ov(){const e=[],s=[{name:"Service Agreement - Acme Corp.pdf",category:"contract",description:"3-year service agreement for 1 Gbps Dedicated Internet",fileType:"pdf",fileSize:245760,uploadedBy:"Sarah Chen",daysAgo:45,projectId:"p1",customerId:"c1",tags:["signed","3-year"]},{name:"SOW_AcmeCorp_Installation.pdf",category:"sow",description:"Statement of Work for fiber installation",fileType:"pdf",fileSize:189440,uploadedBy:"Mike Rodriguez",daysAgo:40,projectId:"p1",customerId:"c1"},{name:"Building_Permit_123Main.pdf",category:"permit",description:"NYC DOB permit for fiber installation",fileType:"pdf",fileSize:102400,uploadedBy:"James Wilson",daysAgo:35,projectId:"p1",buildingId:"b1",tags:["approved","DOB"]},{name:"Install_Photo_MPOE.jpg",category:"install-photo",description:"MPOE installation completed",fileType:"jpg",fileSize:2097152,uploadedBy:"Install Tech 1",daysAgo:5,projectId:"p1",buildingId:"b1"},{name:"Install_Photo_Demarc.jpg",category:"install-photo",description:"Demarc point installation",fileType:"jpg",fileSize:1835008,uploadedBy:"Install Tech 1",daysAgo:5,projectId:"p1",buildingId:"b1"},{name:"Riser_Diagram_123Main.pdf",category:"riser-diagram",description:"Building riser diagram with fiber path",fileType:"pdf",fileSize:512e3,uploadedBy:"Engineering Team",daysAgo:60,buildingId:"b1",tags:["fiber-path","approved"]},{name:"Service Agreement - TechStartup.pdf",category:"contract",description:"2-year agreement for 500 Mbps service",fileType:"pdf",fileSize:220160,uploadedBy:"Sarah Chen",daysAgo:30,projectId:"p2",customerId:"c2",tags:["signed","2-year"]},{name:"Site_Survey_Report.pdf",category:"site-survey",description:"Pre-installation site survey findings",fileType:"pdf",fileSize:358400,uploadedBy:"Survey Team",daysAgo:25,projectId:"p2",buildingId:"b2"},{name:"Invoice_001234.pdf",category:"invoice",description:"Installation invoice - $2,500 NRC",fileType:"pdf",fileSize:81920,uploadedBy:"Billing",daysAgo:3,projectId:"p1",customerId:"c1",tags:["paid"]},{name:"Email_Thread_Scheduling.pdf",category:"correspondence",description:"Email correspondence about installation scheduling",fileType:"pdf",fileSize:143360,uploadedBy:"Sarah Chen",daysAgo:15,projectId:"p2",customerId:"c2"},{name:"MSA_GlobalRetail.pdf",category:"contract",description:"Master Service Agreement",fileType:"pdf",fileSize:409600,uploadedBy:"Legal",daysAgo:180,customerId:"c3",tags:["MSA","enterprise"]},{name:"Building_Access_Policy.pdf",category:"other",description:"Building access requirements and procedures",fileType:"pdf",fileSize:122880,uploadedBy:"Operations",daysAgo:90,buildingId:"b1"},{name:"Riser_Diagram_456Broadway.pdf",category:"riser-diagram",description:"Building riser diagram",fileType:"pdf",fileSize:491520,uploadedBy:"Engineering Team",daysAgo:120,buildingId:"b2"},{name:"Amendment_1_AcmeCorp.pdf",category:"contract",description:"Bandwidth upgrade amendment",fileType:"pdf",fileSize:163840,uploadedBy:"Sarah Chen",daysAgo:10,customerId:"c1",projectId:"p3",tags:["amendment","upgrade"]},{name:"Install_Completion_Report.pdf",category:"other",description:"Final installation completion report",fileType:"pdf",fileSize:286720,uploadedBy:"Operations",daysAgo:2,projectId:"p1"}],n=new Date;return s.forEach((r,a)=>{const l=new Date(n);l.setDate(l.getDate()-r.daysAgo),e.push({id:`doc-${a+1}`,name:r.name,category:r.category,description:r.description,fileUrl:`/documents/${r.name}`,fileType:r.fileType,fileSize:r.fileSize,uploadedBy:r.uploadedBy,uploadedAt:l.toISOString(),projectId:r.projectId,customerId:r.customerId,buildingId:r.buildingId,tags:r.tags,isArchived:!1})}),e}const $v=Ov();function Lv(e){return $v.filter(s=>s.projectId===e&&!s.isArchived)}function No(e){if(e===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(1))+" "+n[r]}const Uc={contract:Tt,sow:gu,permit:Yr,"install-photo":Yf,"riser-diagram":Ic,"site-survey":Xf,invoice:py,correspondence:le,other:gu};function _v({documents:e,title:s="Document Vault",compact:n=!1,onUpload:r}){const[a,l]=b.useState(""),[i,o]=b.useState("all"),[c,m]=b.useState("date"),[j,y]=b.useState(null),h=e.filter(g=>{var p,f;if(i!=="all"&&g.category!==i)return!1;if(a){const d=a.toLowerCase();return g.name.toLowerCase().includes(d)||((p=g.description)==null?void 0:p.toLowerCase().includes(d))||((f=g.tags)==null?void 0:f.some(x=>x.toLowerCase().includes(d)))}return!0}).sort((g,p)=>{switch(c){case"date":return new Date(p.uploadedAt).getTime()-new Date(g.uploadedAt).getTime();case"name":return g.name.localeCompare(p.name);case"size":return p.fileSize-g.fileSize;default:return 0}}),v=h.reduce((g,p)=>(g[p.category]||(g[p.category]=[]),g[p.category].push(p),g),{});return n?t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ts,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:s}),t.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full",children:e.length})]}),r&&t.jsxs(U,{size:"sm",variant:"secondary",onClick:r,children:[t.jsx(vu,{className:"w-4 h-4 mr-1"}),"Upload"]})]}),e.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(ts,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No documents yet"}),r&&t.jsx(U,{variant:"link",size:"sm",onClick:r,className:"mt-2",children:"Upload your first document"})]}):t.jsx("div",{className:"space-y-3",children:Object.entries(v).map(([g,p])=>{const f=al[g],d=Uc[g];return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(d,{className:`w-4 h-4 ${f.color}`}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:f.label}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",p.length,")"]})]}),t.jsxs("div",{className:"space-y-1 ml-6",children:[p.slice(0,3).map(x=>t.jsx(Cu,{document:x,compact:!0},x.id)),p.length>3&&t.jsxs("button",{className:"text-sm text-blue-600 hover:underline",children:["+",p.length-3," more"]})]})]},g)})})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ts,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:s}),t.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-sm font-medium rounded-full",children:[e.length," documents"]})]}),r&&t.jsxs(U,{onClick:r,children:[t.jsx(vu,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]}),t.jsx(T,{children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search documents...",value:a,onChange:g=>l(g.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsxs("select",{value:i,onChange:g=>o(g.target.value),className:"pl-9 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary appearance-none bg-white",children:[t.jsx("option",{value:"all",children:"All Categories"}),Object.entries(al).map(([g,p])=>t.jsx("option",{value:g,children:p.label},g))]}),t.jsx(ke,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),t.jsxs("select",{value:c,onChange:g=>m(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"date",children:"Newest First"}),t.jsx("option",{value:"name",children:"Name A-Z"}),t.jsx("option",{value:"size",children:"Largest First"})]})]})}),h.length===0?t.jsxs(T,{className:"text-center py-12",children:[t.jsx(ts,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:a||i!=="all"?"No documents match your filters":"No documents uploaded yet"})]}):t.jsx(T,{children:t.jsx("div",{className:"divide-y divide-gray-100",children:h.map(g=>t.jsx(Cu,{document:g,onSelect:()=>y(g)},g.id))})}),j&&t.jsx(Fv,{document:j,onClose:()=>y(null)})]})}function Cu({document:e,compact:s=!1,onSelect:n}){const r=al[e.category],a=Uc[e.category];return s?t.jsxs("div",{className:"flex items-center justify-between py-1 group",children:[t.jsx("button",{onClick:n,className:"flex items-center gap-2 text-sm text-gray-700 hover:text-blue-600",children:t.jsx("span",{className:"truncate max-w-[200px]",children:e.name})}),t.jsx("span",{className:"text-xs text-gray-400",children:No(e.fileSize)})]}):t.jsxs("div",{className:"flex items-center gap-4 py-3 hover:bg-gray-50 px-2 -mx-2 rounded-lg group",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${r.bgColor}`,children:t.jsx(a,{className:`w-5 h-5 ${r.color}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("button",{onClick:n,className:"font-medium text-gray-900 hover:text-blue-600 truncate block text-left",children:e.name}),t.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-0.5",children:[t.jsx("span",{className:`px-2 py-0.5 rounded ${r.bgColor} ${r.color}`,children:r.label}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(me,{className:"w-3 h-3"}),new Date(e.uploadedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Le,{className:"w-3 h-3"}),e.uploadedBy]}),t.jsx("span",{children:No(e.fileSize)})]}),e.tags&&e.tags.length>0&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(Rc,{className:"w-3 h-3 text-gray-400"}),e.tags.map(l=>t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:l},l))]})]}),t.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Preview",children:t.jsx(Jf,{className:"w-4 h-4"})}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Download",children:t.jsx(Sc,{className:"w-4 h-4"})}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"More",children:t.jsx(ly,{className:"w-4 h-4"})})]})]})}function Fv({document:e,onClose:s}){const n=al[e.category],r=Uc[e.category];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${n.bgColor}`,children:t.jsx(r,{className:`w-5 h-5 ${n.color}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),t.jsx("span",{className:`text-sm ${n.color}`,children:n.label})]})]}),t.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:""})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[e.description&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),t.jsx("p",{className:"text-gray-700",children:e.description})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"File Type"}),t.jsx("p",{className:"text-gray-700 uppercase",children:e.fileType})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"File Size"}),t.jsx("p",{className:"text-gray-700",children:No(e.fileSize)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Uploaded By"}),t.jsx("p",{className:"text-gray-700",children:e.uploadedBy})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Upload Date"}),t.jsx("p",{className:"text-gray-700",children:new Date(e.uploadedAt).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]})]}),e.tags&&e.tags.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(a=>t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded",children:a},a))})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-8 bg-gray-50 text-center",children:[t.jsx(Tt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"Document preview not available"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Click Download to view the full document"})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{className:"flex items-center gap-1 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:[t.jsx(Bf,{className:"w-4 h-4"}),"Archive"]}),t.jsxs("button",{className:"flex items-center gap-1 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg",children:[t.jsx(El,{className:"w-4 h-4"}),"Delete"]})]}),t.jsxs(U,{children:[t.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})})}const dl={onboarding:Ur,escalation:te,delay:se,vip:Cc,"post-install":Pe,"at-risk":Yr,custom:Th},_h={task:Pe,email:le,call:Ec,wait:Mc,decision:Ic,automation:As};function Uv({playbooks:e,executions:s,customers:n,projectId:r,onStartPlaybook:a,onCompleteStep:l,compact:i=!1}){const[o,c]=b.useState(null),[m,j]=b.useState(null),y=new Map(n.map(p=>[p.id,p])),h=r?s.filter(p=>p.projectId===r&&p.status==="in-progress"):s.filter(p=>p.status==="in-progress"),v=e.reduce((p,f)=>(p[f.category]||(p[f.category]=[]),p[f.category].push(f),p),{}),g=p=>{j(f=>f===p?null:p)};return i?t.jsxs(T,{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xr,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Playbooks"}),h.length>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:[h.length," active"]})]})}),h.length>0&&t.jsx("div",{className:"space-y-2 mb-4",children:h.map(p=>{var u;const f=e.find(w=>w.id===p.playbookId);if(!f)return null;const d=f.steps.findIndex(w=>w.id===p.currentStepId),x=p.stepCompletions.length/f.steps.length*100;return t.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"font-medium text-gray-900",children:f.name}),t.jsxs("span",{className:"text-xs text-blue-600",children:["Step ",d+1,"/",f.steps.length]})]}),t.jsx("div",{className:"h-1.5 bg-blue-200 rounded-full",children:t.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all",style:{width:`${x}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Next: ",(u=f.steps[d])==null?void 0:u.title]})]},p.id)})}),t.jsx("div",{className:"space-y-2",children:e.slice(0,3).map(p=>{const f=Ts[p.category],d=dl[p.category];return t.jsxs("button",{onClick:()=>a==null?void 0:a(p.id),className:"w-full flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg text-left transition-colors",children:[t.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${f.bgColor}`,children:t.jsx(d,{className:`w-4 h-4 ${f.color}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:p.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[p.steps.length," steps"]})]}),t.jsx(gr,{className:"w-4 h-4 text-gray-400"})]},p.id)})})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xr,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Automated Playbooks"})]})}),h.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(gr,{className:"w-5 h-5 text-blue-500"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Active Playbooks"})]}),t.jsx("div",{className:"space-y-4",children:h.map(p=>{const f=e.find(x=>x.id===p.playbookId);if(!f)return null;const d=y.get(p.customerId);return t.jsx(Bv,{execution:p,playbook:f,customerName:d==null?void 0:d.companyName,onCompleteStep:l},p.id)})})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(xr,{className:"w-5 h-5 text-gray-600"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Playbook Library"})]}),t.jsx("div",{className:"space-y-2",children:Object.entries(v).map(([p,f])=>{const d=Ts[p],x=dl[p],u=m===p;return t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>g(p),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${d.bgColor}`,children:t.jsx(x,{className:`w-4 h-4 ${d.color}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium text-gray-900",children:d.label}),t.jsxs("p",{className:"text-xs text-gray-500",children:[f.length," playbook(s)"]})]})]}),u?t.jsx(ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(ke,{className:"w-4 h-4 text-gray-400"})]}),u&&t.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50 space-y-2",children:f.map(w=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:w.name}),t.jsx("p",{className:"text-sm text-gray-500",children:w.description}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[t.jsxs("span",{children:[w.steps.length," steps"]}),t.jsx("span",{children:""}),t.jsx("span",{children:w.estimatedDuration}),t.jsx("span",{children:""}),t.jsxs("span",{children:["Used ",w.timesUsed,"x"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(U,{size:"sm",variant:"secondary",onClick:()=>c(w),children:"View"}),t.jsxs(U,{size:"sm",onClick:()=>a==null?void 0:a(w.id),children:[t.jsx(gr,{className:"w-4 h-4 mr-1"}),"Start"]})]})]},w.id))})]},p)})})]}),o&&t.jsx(zv,{playbook:o,onClose:()=>c(null),onStart:()=>{a==null||a(o.id),c(null)}})]})}function Bv({execution:e,playbook:s,customerName:n,onCompleteStep:r}){const[a,l]=b.useState(!1),i=Ts[s.category],o=dl[s.category],c=new Set(e.stepCompletions.map(y=>y.stepId)),m=s.steps.findIndex(y=>y.id===e.currentStepId),j=e.stepCompletions.length/s.steps.length*100;return t.jsxs("div",{className:`border rounded-lg overflow-hidden ${i.bgColor.replace("bg-","border-").replace("100","200")}`,children:[t.jsxs("button",{onClick:()=>l(!a),className:`w-full flex items-center justify-between p-4 ${i.bgColor} hover:bg-opacity-80 transition-colors`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg",children:t.jsx(o,{className:`w-5 h-5 ${i.color}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium text-gray-900",children:s.name}),n&&t.jsx("p",{className:"text-sm text-gray-600",children:n})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`text-sm font-medium ${i.color}`,children:["Step ",m+1," of ",s.steps.length]}),t.jsx("div",{className:"w-24 h-1.5 bg-white rounded-full mt-1",children:t.jsx("div",{className:`h-full rounded-full ${i.bgColor.replace("100","500")}`,style:{width:`${j}%`}})})]}),a?t.jsx(ut,{className:"w-4 h-4 text-gray-600"}):t.jsx(ke,{className:"w-4 h-4 text-gray-600"})]})]}),a&&t.jsx("div",{className:"p-4 bg-white",children:t.jsx("div",{className:"space-y-3",children:s.steps.map((y,h)=>{const v=c.has(y.id),g=y.id===e.currentStepId,p=_h[y.type];return t.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${g?"bg-blue-50 border border-blue-200":v?"bg-green-50":"bg-gray-50"}`,children:[t.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${v?"bg-green-500 text-white":g?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:v?t.jsx(Pe,{className:"w-4 h-4"}):t.jsx("span",{className:"text-sm font-medium",children:h+1})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(p,{className:"w-4 h-4 text-gray-400"}),t.jsx("p",{className:`font-medium ${v?"text-gray-500 line-through":"text-gray-900"}`,children:y.title})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:y.description})]}),g&&r&&t.jsx(U,{size:"sm",onClick:()=>r(e.id,y.id),children:"Complete"})]},y.id)})})})]})}function zv({playbook:e,onClose:s,onStart:n}){const r=Ts[e.category],a=dl[e.category];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:`flex items-center justify-between p-4 ${r.bgColor}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg",children:t.jsx(a,{className:`w-5 h-5 ${r.color}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),t.jsx("span",{className:`text-sm ${r.color}`,children:r.label})]})]}),t.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-white hover:bg-opacity-50 rounded-lg",children:""})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsx("p",{className:"text-gray-600",children:e.description}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.steps.length}),t.jsx("p",{className:"text-xs text-gray-500",children:"Steps"})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.estimatedDuration}),t.jsx("p",{className:"text-xs text-gray-500",children:"Duration"})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.timesUsed}),t.jsx("p",{className:"text-xs text-gray-500",children:"Times Used"})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Trigger Conditions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.triggerConditions.map((l,i)=>t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded",children:l},i))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Steps:"}),t.jsx("div",{className:"space-y-2",children:e.steps.map((l,i)=>{const o=_h[l.type];return t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-gray-200 rounded-full text-sm font-medium text-gray-600",children:i+1}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{className:"w-4 h-4 text-gray-400"}),t.jsx("p",{className:"font-medium text-gray-900",children:l.title}),l.isOptional&&t.jsx("span",{className:"text-xs text-gray-500",children:"(optional)"})]}),t.jsx("p",{className:"text-sm text-gray-500",children:l.description})]}),t.jsx(Lt,{className:"w-4 h-4 text-gray-300"})]},l.id)})})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200",children:[t.jsx(U,{variant:"secondary",onClick:s,children:"Cancel"}),t.jsxs(U,{onClick:n,children:[t.jsx(gr,{className:"w-4 h-4 mr-2"}),"Start Playbook"]})]})]})})}function an(e){return e.map((s,n)=>({...s,id:`step-${n+1}`}))}const rr=[{id:"playbook-1",name:"New Customer Welcome",description:"Standard onboarding flow for new customers from handoff to first contact",category:"onboarding",triggerConditions:["New project created","First project for customer"],estimatedDuration:"2-3 days",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-06-01T00:00:00Z",createdBy:"system",timesUsed:145,avgCompletionDays:2.3,steps:an([{order:1,type:"task",title:"Review Sales Handoff",description:"Review handoff notes and understand customer requirements",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:2,type:"email",title:"Send Welcome Email",description:"Introduce yourself and outline next steps",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:3,type:"wait",title:"Wait for Customer Response",description:"Allow time for customer to review and respond",waitHours:24,isOptional:!1,requiresApproval:!1},{order:4,type:"call",title:"Initial Discovery Call",description:"Confirm requirements and set expectations",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:5,type:"task",title:"Document Call Notes",description:"Update project with any new information from discovery call",assignTo:"owner",isOptional:!1,requiresApproval:!1}])},{id:"playbook-2",name:"Escalation Response",description:"Standard response process for escalated projects",category:"escalation",triggerConditions:["Project escalated","Customer complaint received"],estimatedDuration:"1-2 days",isActive:!0,createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-05-15T00:00:00Z",createdBy:"system",timesUsed:32,avgCompletionDays:1.5,steps:an([{order:1,type:"task",title:"Acknowledge Escalation",description:"Review escalation details and assign priority",assignTo:"manager",isOptional:!1,requiresApproval:!1},{order:2,type:"call",title:"Customer Callback",description:"Contact customer within 2 hours to acknowledge concern",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:3,type:"task",title:"Root Cause Analysis",description:"Identify cause of issue and document findings",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:4,type:"decision",title:"Resolution Path",description:"Determine appropriate resolution",decisionOptions:[{label:"Schedule priority install",nextStepId:"step-5a"},{label:"Provide compensation",nextStepId:"step-5b"},{label:"Technical solution",nextStepId:"step-5c"}],isOptional:!1,requiresApproval:!0},{order:5,type:"email",title:"Resolution Communication",description:"Send resolution details and timeline to customer",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:6,type:"task",title:"De-escalation Verification",description:"Confirm issue is resolved and de-escalate project",assignTo:"manager",isOptional:!1,requiresApproval:!0}])},{id:"playbook-3",name:"VIP Customer Treatment",description:"Enhanced service protocol for VIP tier customers",category:"vip",triggerConditions:["VIP customer project","Gold or Platinum tier"],estimatedDuration:"Ongoing",isActive:!0,createdAt:"2024-02-01T00:00:00Z",updatedAt:"2024-06-01T00:00:00Z",createdBy:"system",timesUsed:28,avgCompletionDays:0,steps:an([{order:1,type:"task",title:"Assign Dedicated Support",description:"Ensure project has senior CX assignee",assignTo:"manager",isOptional:!1,requiresApproval:!1},{order:2,type:"call",title:"Executive Introduction",description:"Personal call from CX lead to introduce dedicated support",assignTo:"manager",isOptional:!1,requiresApproval:!1},{order:3,type:"automation",title:"Enable Priority Scheduling",description:"Flag project for priority install slots",automationAction:"set_priority_flag",isOptional:!1,requiresApproval:!1},{order:4,type:"task",title:"Weekly Status Updates",description:"Set up weekly status update cadence",assignTo:"owner",isOptional:!1,requiresApproval:!1}])},{id:"playbook-4",name:"Post-Install Follow-up",description:"Standard follow-up sequence after successful installation",category:"post-install",triggerConditions:["Project completed","Install marked successful"],estimatedDuration:"7-14 days",isActive:!0,createdAt:"2024-01-20T00:00:00Z",updatedAt:"2024-04-20T00:00:00Z",createdBy:"system",timesUsed:89,avgCompletionDays:10,steps:an([{order:1,type:"automation",title:"Send NPS Survey",description:"Automatically trigger NPS survey email",automationAction:"send_nps_survey",isOptional:!1,requiresApproval:!1},{order:2,type:"wait",title:"Wait for Survey",description:"Allow 3 days for survey response",waitDays:3,isOptional:!1,requiresApproval:!1},{order:3,type:"call",title:"7-Day Check-in Call",description:"Call customer to verify service is working well",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:4,type:"task",title:"Request Testimonial",description:"If satisfaction is high, request testimonial for marketing",assignTo:"owner",isOptional:!0,requiresApproval:!1},{order:5,type:"task",title:"Handoff to Account Management",description:"Transfer customer relationship to AM team",assignTo:"owner",isOptional:!1,requiresApproval:!1}])},{id:"playbook-5",name:"Delay Mitigation",description:"Steps to take when a project is at risk of missing FOC",category:"delay",triggerConditions:["FOC approaching with blockers","Project past FOC"],estimatedDuration:"1-3 days",isActive:!0,createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-05-01T00:00:00Z",createdBy:"system",timesUsed:45,avgCompletionDays:2,steps:an([{order:1,type:"task",title:"Assess Delay Impact",description:"Determine how many days delay is expected",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:2,type:"call",title:"Proactive Customer Contact",description:"Inform customer of delay before they need to ask",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:3,type:"email",title:"Send Delay Notification",description:"Formal email with new timeline and reason",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:4,type:"task",title:"Update FOC Date",description:"Set realistic new FOC date in system",assignTo:"owner",isOptional:!1,requiresApproval:!1},{order:5,type:"decision",title:"Compensation Decision",description:"Determine if compensation is warranted",decisionOptions:[{label:"No compensation needed",nextStepId:"step-7"},{label:"Credit first month",nextStepId:"step-6a"},{label:"Waive NRC",nextStepId:"step-6b"}],isOptional:!1,requiresApproval:!0},{order:6,type:"email",title:"Send Compensation Offer",description:"If warranted, send compensation details",assignTo:"owner",isOptional:!0,requiresApproval:!0},{order:7,type:"task",title:"Schedule Priority Install",description:"Ensure project gets next available install slot",assignTo:"owner",isOptional:!1,requiresApproval:!1}])},{id:"playbook-6",name:"At-Risk Customer Recovery",description:"Intervention for customers showing churn risk indicators",category:"at-risk",triggerConditions:["Churn risk: High","Multiple escalations","Low NPS score"],estimatedDuration:"5-7 days",isActive:!0,createdAt:"2024-04-01T00:00:00Z",updatedAt:"2024-06-01T00:00:00Z",createdBy:"system",timesUsed:12,avgCompletionDays:5,steps:an([{order:1,type:"task",title:"Review Customer History",description:"Analyze all interactions and identify pain points",assignTo:"manager",isOptional:!1,requiresApproval:!1},{order:2,type:"call",title:"Executive Check-in",description:"Manager call to understand concerns directly",assignTo:"manager",isOptional:!1,requiresApproval:!1},{order:3,type:"task",title:"Develop Recovery Plan",description:"Create specific action plan addressing concerns",assignTo:"manager",isOptional:!1,requiresApproval:!0},{order:4,type:"email",title:"Send Recovery Proposal",description:"Present improvement plan to customer",assignTo:"manager",isOptional:!1,requiresApproval:!0},{order:5,type:"wait",title:"Implementation Period",description:"Execute recovery plan and monitor",waitDays:14,isOptional:!1,requiresApproval:!1},{order:6,type:"call",title:"Follow-up Assessment",description:"Verify improvement and gather feedback",assignTo:"manager",isOptional:!1,requiresApproval:!1}])}],Fh=[{id:"exec-1",playbookId:"playbook-1",projectId:"p1",customerId:"c1",startedAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),currentStepId:"step-4",status:"in-progress",stepCompletions:[{stepId:"step-1",completedAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),completedBy:"Sarah Chen"},{stepId:"step-2",completedAt:new Date(Date.now()-1.5*24*60*60*1e3).toISOString(),completedBy:"Sarah Chen"},{stepId:"step-3",completedAt:new Date(Date.now()-.5*24*60*60*1e3).toISOString(),completedBy:"system"}]},{id:"exec-2",playbookId:"playbook-4",projectId:"p5",customerId:"c5",startedAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),currentStepId:"step-3",status:"in-progress",stepCompletions:[{stepId:"step-1",completedAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),completedBy:"system"},{stepId:"step-2",completedAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),completedBy:"system"}]}];function qv(e){return Fh.filter(s=>s.projectId===e&&s.status==="in-progress")}function Hv(){var R,V;const{id:e}=Nc(),s=Ve(),[n]=bc(),{getProject:r,getCustomer:a,getBuilding:l,getProjectTickets:i,getProjectGroup:o,state:c,dispatch:m}=Se(),j=n.get("tab")||"overview",[y,h]=b.useState(j),[v,g]=b.useState(!1),[p,f]=b.useState(!1),[d,x]=b.useState(null),[u,w]=b.useState(qv(e)),N=r(e),C=N?a(N.customerId):null,k=N?l(N.buildingId):null,I=N?i(N.id):[],z=N!=null&&N.projectGroupId?o(N.projectGroupId):null;if(!N||!C||!k)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500",children:"Project not found"}),t.jsx(U,{variant:"link",onClick:()=>s("/projects"),children:"Back to Projects"})]});const _=(E,W)=>{m({type:"UPDATE_TASK",payload:{projectId:N.id,taskId:E,completed:W}})},D=E=>{m({type:"MARK_TICKET_READ",payload:E})},Q=E=>{m({type:"UPDATE_PROJECT_ASSIGNEE",payload:{projectId:N.id,cxAssignee:E}})},F=(E,W)=>{m({type:"UPDATE_TASK_ASSIGNEE",payload:{projectId:N.id,taskId:E,assignee:W}})},K=(E,W)=>{m({type:"UPDATE_TASK_DUE_DATE",payload:{projectId:N.id,taskId:E,dueDate:W}})},[pe,De]=b.useState(!1),[J,P]=b.useState(!1),B=(E,W)=>{m({type:"ADD_INTERNAL_NOTE",payload:{projectId:N.id,note:{id:`note-${Date.now()}`,content:E,author:G.name,createdAt:new Date().toISOString(),mentions:W}}})},O=E=>{m({type:"DELETE_INTERNAL_NOTE",payload:{projectId:N.id,noteId:E}})},X=E=>{m({type:"TOGGLE_NOTE_PIN",payload:{projectId:N.id,noteId:E}})},ne=(E,W)=>{m({type:"ADD_BLOCKER",payload:{projectId:N.id,blocker:{id:`block-${Date.now()}`,type:E,description:W,createdAt:new Date().toISOString(),createdBy:G.name}}})},tt=E=>{m({type:"RESOLVE_BLOCKER",payload:{projectId:N.id,blockerId:E,resolvedBy:G.name}})},st=()=>{const E=!N.isEscalated,W=E?prompt("Reason for escalation:"):void 0;E&&!W||m({type:"TOGGLE_ESCALATION",payload:{projectId:N.id,isEscalated:E,escalatedBy:E?G.name:void 0,reason:W||void 0}})},Kt=(E,W)=>{m({type:"UPDATE_CONTACT_ROLE",payload:{customerId:C.id,contactId:E,role:W,isPrimary:W==="primary"}})},nt=(E,W)=>{m({type:"UPDATE_READINESS_TASK",payload:{projectId:N.id,taskId:E,updates:W}})},It=E=>{m({type:"ADD_COMMUNICATION_LOG",payload:{projectId:N.id,entry:{...E,id:`comm-${Date.now()}`,author:G.name,createdAt:new Date().toISOString()}}})},M=E=>{m({type:"UPDATE_PROJECT_STATUS",payload:{projectId:N.id,status:E}})},H=E=>{x(E)},Y=()=>{var ce;if(!d)return;const E=rr.find(Te=>Te.id===d);if(!E)return;const W={id:`exec-${Date.now()}`,playbookId:d,projectId:N.id,customerId:N.customerId,startedAt:new Date().toISOString(),currentStepId:((ce=E.steps[0])==null?void 0:ce.id)||"",status:"in-progress",stepCompletions:[]};w(Te=>[...Te,W]),x(null)},oe=(E,W)=>{w(ce=>ce.map(Te=>{if(Te.id!==E)return Te;const Ls=rr.find(Ml=>Ml.id===Te.playbookId);if(!Ls)return Te;const Wh=Ls.steps.findIndex(Ml=>Ml.id===W),Qr=Ls.steps[Wh+1];return{...Te,currentStepId:(Qr==null?void 0:Qr.id)||"",status:Qr?"in-progress":"completed",stepCompletions:[...Te.stepCompletions,{stepId:W,completedAt:new Date().toISOString(),completedBy:G.name}]}}))},xe=(E,W,ce,Te)=>{m({type:"ADD_COMMUNICATION_LOG",payload:{projectId:N.id,entry:{id:`comm-${Date.now()}`,type:E,direction:W,contactName:ce,summary:Te,followUpRequired:!1,author:G.name,createdAt:new Date().toISOString()}}})},Ne=[{value:"",label:"Unassigned"},...re.map(E=>({value:E.name,label:E.name}))],rt=I.filter(E=>E.status==="open"||E.status==="pending"),Yt=I.filter(E=>!E.isRead),At=N.blockers.filter(E=>!E.resolvedAt).length,Rl=[{id:"overview",label:"Overview"},{id:"tickets",label:"Tickets",badge:rt.length||Yt.length},{id:"tasks",label:"Tasks",badge:N.tasks.filter(E=>!E.completed).length},{id:"activity",label:"Activity",badge:At},{id:"report",label:"Install Report"}],Bn={"early-7":"7:00 AM (Early)","morning-9":"9:00 AM","morning-11":"11:00 AM","all-day":"9 AM - 5 PM","after-hours":"6:00 PM (After Hours)"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("button",{onClick:()=>s("/projects"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(kc,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:C.companyName}),t.jsx(Lc,{type:N.projectType,size:"md"}),t.jsx(bt,{status:N.status}),t.jsx(_c,{tier:Qt(N,C),size:"md"}),N.priority!=="normal"&&t.jsx(bt,{type:"priority",status:N.priority}),N.isEscalated&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded",children:[t.jsx(te,{className:"w-3 h-3"}),"Escalated"]}),t.jsx(Br,{project:N,size:"md"}),z?t.jsx(Ph,{group:z,size:"md"}):t.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 text-xs font-medium rounded transition-colors",title:"Link to project group",children:[t.jsx(Ac,{className:"w-3 h-3"}),"Link to Group"]})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[t.jsx(Rh,{building:k,className:"text-gray-600"}),t.jsx("span",{className:"text-gray-300",children:"|"}),t.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-0.5 rounded text-gray-700",children:N.serviceOrderId})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[t.jsx(se,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-gray-500",children:"FOC:"}),t.jsx("span",{className:"font-medium text-gray-700",children:new Date(N.focDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),N.status!=="completed"&&t.jsx(vo,{deadline:N.focDate})]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(U,{variant:"secondary",onClick:()=>De(!0),children:[t.jsx(le,{className:"w-4 h-4 mr-1"}),"Email Templates"]}),t.jsxs(U,{variant:N.isEscalated?"danger":"secondary",onClick:st,children:[t.jsx(te,{className:"w-4 h-4 mr-1"}),N.isEscalated?"De-escalate":"Escalate"]})]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex gap-8",children:Rl.map(E=>t.jsxs("button",{onClick:()=>h(E.id),className:`
                pb-4 text-sm font-medium transition-colors relative
                ${y===E.id?"text-pilot-secondary border-b-2 border-pilot-primary":"text-gray-500 hover:text-gray-700"}
              `,children:[E.label,E.badge&&E.badge>0&&t.jsx("span",{className:"ml-2 bg-pilot-primary text-pilot-secondary text-xs px-2 py-0.5 rounded-full",children:E.badge})]},E.id))})}),y==="overview"&&t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Le,{className:"w-5 h-5"}),"Customer Information"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Company"}),t.jsx("p",{className:"font-medium",children:C.companyName}),N.isWholesale&&t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded mt-1",children:[t.jsx(yy,{className:"w-3 h-3"}),"Wholesale / Carrier"]})]}),t.jsxs("div",{className:"pt-2 border-t",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 block",children:"Contacts"}),t.jsx("div",{className:"space-y-3",children:C.contacts.map(E=>t.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("p",{className:"font-medium text-sm",children:E.name}),t.jsx("select",{value:E.role||"other",onChange:W=>Kt(E.id,W.target.value),className:"text-xs border border-gray-300 rounded px-1.5 py-0.5 bg-white focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:Object.entries(Df).map(([W,ce])=>t.jsx("option",{value:W,children:ce},W))})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-1",children:[t.jsx(le,{className:"w-3 h-3"}),t.jsx("a",{href:`mailto:${E.email}`,className:"hover:underline",children:E.email})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-0.5",children:[t.jsx(Oe,{className:"w-3 h-3"}),t.jsx("a",{href:`tel:${E.phone}`,className:"hover:underline",children:E.phone})]})]},E.id))})]}),N.thirdPartyItContact&&t.jsxs("div",{className:"pt-3 border-t",children:[t.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 flex items-center gap-1",children:[t.jsx(Sh,{className:"w-3 h-3"}),"Third-Party IT Contact"]}),t.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[t.jsx("p",{className:"font-medium text-sm",children:N.thirdPartyItContact.name}),N.thirdPartyItContact.company&&t.jsx("p",{className:"text-xs text-gray-600",children:N.thirdPartyItContact.company}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-1",children:[t.jsx(le,{className:"w-3 h-3"}),t.jsx("a",{href:`mailto:${N.thirdPartyItContact.email}`,className:"hover:underline",children:N.thirdPartyItContact.email})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-0.5",children:[t.jsx(Oe,{className:"w-3 h-3"}),t.jsx("a",{href:`tel:${N.thirdPartyItContact.phone}`,className:"hover:underline",children:N.thirdPartyItContact.phone})]})]})]}),N.isWholesale&&N.hasEndUserContact&&N.endUserContact&&t.jsxs("div",{className:"pt-3 border-t",children:[t.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 flex items-center gap-1",children:[t.jsx(Le,{className:"w-3 h-3"}),"End User Contact"]}),t.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[t.jsx("p",{className:"font-medium text-sm",children:N.endUserContact.name}),N.endUserContact.company&&t.jsx("p",{className:"text-xs text-gray-600",children:N.endUserContact.company}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-1",children:[t.jsx(le,{className:"w-3 h-3"}),t.jsx("a",{href:`mailto:${N.endUserContact.email}`,className:"hover:underline",children:N.endUserContact.email})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-0.5",children:[t.jsx(Oe,{className:"w-3 h-3"}),t.jsx("a",{href:`tel:${N.endUserContact.phone}`,className:"hover:underline",children:N.endUserContact.phone})]})]})]}),N.projectType==="montgomery"&&N.montgomeryContact&&t.jsxs("div",{className:"pt-3 border-t",children:[t.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 flex items-center gap-1",children:[t.jsx(Gt,{className:"w-3 h-3"}),"Montgomery Contact"]}),t.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[t.jsx("p",{className:"font-medium text-sm",children:N.montgomeryContact.name}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-1",children:[t.jsx(le,{className:"w-3 h-3"}),t.jsx("a",{href:`mailto:${N.montgomeryContact.email}`,className:"hover:underline",children:N.montgomeryContact.email})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-0.5",children:[t.jsx(Oe,{className:"w-3 h-3"}),t.jsx("a",{href:`tel:${N.montgomeryContact.phone}`,className:"hover:underline",children:N.montgomeryContact.phone})]})]})]}),N.projectType==="contract-labor"&&N.contractorContact&&t.jsxs("div",{className:"pt-3 border-t",children:[t.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 flex items-center gap-1",children:[t.jsx(Dy,{className:"w-3 h-3"}),"Contractor Contact"]}),t.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[t.jsx("p",{className:"font-medium text-sm",children:N.contractorContact.name}),t.jsx("p",{className:"text-xs text-gray-600",children:N.contractorContact.company}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-1",children:[t.jsx(le,{className:"w-3 h-3"}),t.jsx("a",{href:`mailto:${N.contractorContact.email}`,className:"hover:underline",children:N.contractorContact.email})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mt-0.5",children:[t.jsx(Oe,{className:"w-3 h-3"}),t.jsx("a",{href:`tel:${N.contractorContact.phone}`,className:"hover:underline",children:N.contractorContact.phone})]})]})]}),t.jsxs("div",{className:"pt-3 border-t",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 block",children:"VIP Status"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Customer Tier"}),t.jsxs("select",{value:C.vipTier||"standard",onChange:E=>m({type:"UPDATE_CUSTOMER_VIP_TIER",payload:{customerId:C.id,vipTier:E.target.value==="standard"?void 0:E.target.value}}),className:"text-sm border border-gray-300 rounded px-2 py-1 bg-white focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:[t.jsx("option",{value:"standard",children:"Standard"}),t.jsx("option",{value:"silver",children:"Silver"}),t.jsx("option",{value:"gold",children:"Gold"}),t.jsx("option",{value:"platinum",children:"Platinum"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Project Override"}),t.jsxs("select",{value:N.vipTierOverride||"inherit",onChange:E=>m({type:"UPDATE_PROJECT_VIP_OVERRIDE",payload:{projectId:N.id,vipTierOverride:E.target.value==="inherit"?void 0:E.target.value}}),className:"text-sm border border-gray-300 rounded px-2 py-1 bg-white focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:[t.jsx("option",{value:"inherit",children:"Inherit from Customer"}),t.jsx("option",{value:"standard",children:"Standard"}),t.jsx("option",{value:"silver",children:"Silver"}),t.jsx("option",{value:"gold",children:"Gold"}),t.jsx("option",{value:"platinum",children:"Platinum"})]})]})]})]}),t.jsxs("div",{className:"pt-3 border-t",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"CX Assignee"}),t.jsx(we,{options:Ne,value:N.cxAssignee||"",onChange:Q,className:"mt-1"})]})]})]}),t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Dh,{className:"w-5 h-5"}),"Service Details"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Product"}),t.jsx("p",{className:"font-medium",children:N.product})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Bandwidth"}),t.jsx("p",{className:"font-medium",children:N.serviceBandwidth})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"IP Type"}),t.jsx("p",{className:"font-medium uppercase",children:N.ipType})]})]}),N.numStaticIps&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"# Static IPs"}),t.jsx("p",{className:"font-medium",children:N.numStaticIps})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"MRC"}),t.jsxs("p",{className:"font-medium text-green-600",children:["$",N.mrc.toLocaleString(),"/mo"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"NRC"}),t.jsxs("p",{className:"font-medium",children:["$",N.nrc.toLocaleString()]})]})]}),N.device&&t.jsxs("div",{className:"pt-2 border-t",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Device"}),t.jsx("p",{className:"font-medium",children:N.device})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(jh,{className:`w-4 h-4 ${N.ipType==="static"||N.ipType==="bgp"?"text-green-500":"text-gray-300"}`}),t.jsx("span",{className:N.ipType==="static"||N.ipType==="bgp"?"text-gray-700":"text-gray-400",children:"Static IP"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xy,{className:`w-4 h-4 ${N.customerOwnRouter?"text-green-500":"text-gray-300"}`}),t.jsx("span",{className:N.customerOwnRouter?"text-gray-700":"text-gray-400",children:"Own Router"})]}),N.eeroRequired&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"eero Required"})]}),N.flightDeckUrl&&t.jsx("div",{className:"pt-2 border-t",children:t.jsxs("a",{href:N.flightDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline",children:[t.jsx(Zs,{className:"w-4 h-4"}),"View in Flight Deck"]})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(me,{className:"w-5 h-5"}),"Installation Schedule"]}),N.scheduledDate?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Date"}),t.jsx("p",{className:"font-medium text-sm",children:new Date(N.scheduledDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),N.scheduledSlot&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Slot"}),t.jsx("p",{className:"font-medium text-sm",children:Bn[N.scheduledSlot]})]})]}):t.jsxs("div",{className:"text-center py-4 text-gray-500",children:[t.jsx("p",{className:"text-sm",children:"Not yet scheduled"}),t.jsx(U,{variant:"link",size:"sm",className:"mt-1",children:"Schedule Install"})]})]}),t.jsx(T,{children:t.jsx(wu,{notes:N.internalNotes,onAddNote:B,onDeleteNote:O,onTogglePin:X})})]}),t.jsxs("div",{className:"col-span-3 lg:col-span-1 space-y-4",children:[t.jsx(Mv,{project:N,onLogCommunication:xe,onAddNote:B,onAddBlocker:ne,onChangeStatus:M,onToggleEscalation:st,onOpenEmailTemplates:()=>De(!0),onOpenAIComposer:()=>P(!0)}),t.jsx(Br,{project:N,showDetails:!0})]}),t.jsx(T,{className:"col-span-3 lg:col-span-2",children:t.jsx(Dv,{project:N,onUpdateTask:nt})}),t.jsx("div",{className:"col-span-3",children:t.jsx(sv,{building:k})}),t.jsx("div",{className:"col-span-3",children:t.jsx(_v,{documents:Lv(N.id),projectId:N.id,customerId:N.customerId,title:"Project Documents",onUpload:()=>console.log("Upload document")})}),t.jsx("div",{className:"col-span-3",children:t.jsx(Uv,{playbooks:rr,executions:u,customers:c.customers,projectId:N.id,onStartPlaybook:H,onCompleteStep:oe,compact:!0})})]}),y==="tickets"&&t.jsx(iv,{tickets:I,onMarkRead:D}),y==="tasks"&&t.jsxs(T,{children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Task Checklist"}),t.jsx(ev,{tasks:N.tasks,onToggle:_,onAssigneeChange:F,onDueDateChange:K,editable:!0})]}),y==="activity"&&t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsxs("div",{className:"col-span-2 space-y-6",children:[t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Fn,{className:"w-5 h-5"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Activity Timeline"})]}),t.jsx(dv,{activities:N.activityLog})]}),t.jsx(T,{children:t.jsx(Pv,{entries:N.communicationLog||[],onAddEntry:It})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(T,{children:t.jsx(wu,{notes:N.internalNotes,onAddNote:B,onDeleteNote:O,onTogglePin:X})}),t.jsx(T,{children:t.jsx(hv,{blockers:N.blockers,onAddBlocker:ne,onResolveBlocker:tt})})]})]}),y==="report"&&t.jsx(T,{children:N.installReport?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Tt,{className:"w-5 h-5"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Installation Report"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Installer"}),t.jsx("p",{className:"font-medium",children:N.installReport.installerName})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Completed"}),t.jsx("p",{className:"font-medium",children:new Date(N.installReport.completedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Device"}),t.jsx("p",{className:"font-medium font-mono",children:N.installReport.deviceInstalled})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Serial"}),t.jsx("p",{className:"font-medium font-mono",children:N.installReport.deviceSerial})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Power Status"}),t.jsx("p",{className:"font-medium capitalize",children:N.installReport.powerStatus})]})]}),N.installReport.notes&&t.jsxs("div",{className:"mt-4",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Notes"}),t.jsx("p",{className:"mt-1 text-gray-700 bg-gray-50 p-3 rounded",children:N.installReport.notes})]})]}):t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(Tt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"font-medium",children:"No installation report yet"}),t.jsx("p",{className:"text-sm mt-1",children:"The report will appear here after installation is complete."})]})}),t.jsx(vv,{isOpen:pe,onClose:()=>De(!1),variables:{contactName:((R=C.contacts.find(E=>E.isPrimary))==null?void 0:R.name)||((V=C.contacts[0])==null?void 0:V.name)||"",companyName:C.companyName,cxName:G.name,address:k.address,product:N.product,bandwidth:N.serviceBandwidth,focDate:new Date(N.focDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),scheduledDate:N.scheduledDate?new Date(N.scheduledDate).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}):"",scheduledTime:N.scheduledSlot?Bn[N.scheduledSlot]:"",device:N.device||"",accessRequirements:k.accessInstructions||"Please coordinate access with building management"}}),t.jsx(Sv,{isOpen:J,onClose:()=>P(!1),project:N,customer:C,building:k}),v&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:()=>g(!1)}),t.jsxs(T,{className:"relative max-w-md w-full p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Cs,{className:"w-5 h-5"}),"Link to Project Group"]}),c.projectGroups.filter(E=>E.customerId===N.customerId).length>0?t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Select an existing group or create a new one:"}),c.projectGroups.filter(E=>E.customerId===N.customerId).map(E=>t.jsxs("button",{onClick:()=>{m({type:"LINK_PROJECT_TO_GROUP",payload:{projectId:N.id,groupId:E.id}}),g(!1)},className:"w-full flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-left",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:E.color},children:t.jsx(Cs,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:E.name}),E.description&&t.jsx("p",{className:"text-sm text-gray-500 truncate",children:E.description})]})]},E.id))]}):t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["No existing groups for ",C.companyName,". Create a new group to link related projects together."]}),t.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[t.jsx(U,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),t.jsx(U,{onClick:()=>{g(!1),f(!0)},children:"Create New Group"})]})]})]})}),t.jsx(Lh,{isOpen:p,onClose:()=>f(!1),defaultCustomerId:N.customerId,onGroupCreated:E=>{m({type:"LINK_PROJECT_TO_GROUP",payload:{projectId:N.id,groupId:E}})}}),d&&(()=>{const E=rr.find(W=>W.id===d);return E?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[t.jsx("div",{className:"p-4 border-b border-gray-200",children:t.jsx("h3",{className:"font-semibold text-gray-900",children:"Start Playbook"})}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("p",{className:"text-gray-600",children:["You are about to start the ",t.jsx("strong",{children:E.name})," playbook for this project."]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:E.description}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[t.jsxs("span",{children:[E.steps.length," steps"]}),t.jsx("span",{children:""}),t.jsx("span",{children:E.estimatedDuration})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200",children:[t.jsx(U,{variant:"secondary",onClick:()=>x(null),children:"Cancel"}),t.jsx(U,{onClick:Y,children:"Start Playbook"})]})]})}):null})()]})}function Wv(){const{id:e}=Nc(),s=Ve(),{state:n,getProjectGroup:r,getProjectsInGroup:a,getCustomer:l,getBuilding:i,dispatch:o}=Se(),[c,m]=b.useState(!1),[j,y]=b.useState(!1),[h,v]=b.useState(!1),g=e?r(e):void 0,p=e?a(e):[],f=g?l(g.customerId):void 0,d=n.projects.filter(C=>C.customerId===(g==null?void 0:g.customerId)&&!C.projectGroupId);if(!g)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Cs,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Group not found"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"The project group you're looking for doesn't exist."}),t.jsx(U,{variant:"secondary",onClick:()=>s("/projects"),children:"Back to Projects"})]});const x=()=>{o({type:"DELETE_PROJECT_GROUP",payload:g.id}),s("/projects")},u=C=>{o({type:"LINK_PROJECT_TO_GROUP",payload:{projectId:C,groupId:void 0}})},w=C=>{o({type:"LINK_PROJECT_TO_GROUP",payload:{projectId:C,groupId:g.id}})},N={total:p.length,completed:p.filter(C=>C.status==="completed").length,inProgress:p.filter(C=>["scheduled","confirmed","installing"].includes(C.status)).length,pending:p.filter(C=>["new","reviewing"].includes(C.status)).length,escalated:p.filter(C=>C.isEscalated).length,totalMrc:p.reduce((C,k)=>C+k.mrc,0),totalNrc:p.reduce((C,k)=>C+k.nrc,0)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(kc,{className:"w-5 h-5 text-gray-600"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:g.color},children:t.jsx(Cs,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:g.name}),t.jsxs("p",{className:"text-gray-600",children:[f==null?void 0:f.companyName,"  ",p.length," linked project",p.length!==1?"s":""]})]})]}),g.description&&t.jsx("p",{className:"mt-2 text-gray-600 max-w-2xl",children:g.description})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(U,{variant:"secondary",onClick:()=>m(!0),children:[t.jsx(dy,{className:"w-4 h-4 mr-2"}),"Edit"]}),t.jsxs(U,{variant:"secondary",className:"text-red-600 hover:bg-red-50",onClick:()=>y(!0),children:[t.jsx(El,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[t.jsxs(T,{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Projects"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.total})]}),t.jsxs(T,{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:N.completed})]}),t.jsxs(T,{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N.inProgress})]}),t.jsxs(T,{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-gray-600",children:N.pending})]}),t.jsxs(T,{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total MRC"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",N.totalMrc.toLocaleString()]})]}),t.jsxs(T,{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total NRC"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",N.totalNrc.toLocaleString()]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Linked Projects"}),d.length>0&&t.jsxs(U,{variant:"secondary",onClick:()=>v(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Link Project"]})]}),p.length===0?t.jsxs(T,{className:"p-8 text-center",children:[t.jsx(Cs,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects linked yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Link projects to this group to track them together."}),d.length>0&&t.jsxs(U,{onClick:()=>v(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Link Project"]})]}):t.jsx("div",{className:"space-y-3",children:p.map(C=>{const k=i(C.buildingId);return t.jsx(T,{className:"p-4 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(wc,{to:`/projects/${C.id}`,className:"flex-1 flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-gray-900",children:C.product}),t.jsx(Lc,{type:C.projectType,size:"sm"}),C.isEscalated&&t.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:[t.jsx(te,{className:"w-3 h-3"}),"Escalated"]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{className:"w-3.5 h-3.5"}),(k==null?void 0:k.address)||"Unknown"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(se,{className:"w-3.5 h-3.5"}),"FOC: ",new Date(C.focDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"MRC"}),t.jsxs("p",{className:"font-medium",children:["$",C.mrc.toLocaleString()]})]}),t.jsx(bt,{status:C.status}),t.jsx(Br,{project:C,size:"sm"})]})]}),t.jsx("button",{onClick:I=>{I.stopPropagation(),u(C.id)},className:"ml-4 p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Unlink from group",children:t.jsx(Ch,{className:"w-4 h-4"})})]})},C.id)})}),t.jsx(Lh,{isOpen:c,onClose:()=>m(!1),editGroup:g}),j&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:()=>y(!1)}),t.jsxs(T,{className:"relative max-w-md w-full p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Project Group?"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:['This will delete the group "',g.name,'" and unlink all ',p.length," project",p.length!==1?"s":"",". The projects themselves will not be deleted."]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(U,{variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),t.jsx(U,{className:"bg-red-600 hover:bg-red-700",onClick:x,children:"Delete Group"})]})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:()=>v(!1)}),t.jsxs(T,{className:"relative max-w-lg w-full p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Link Projects to Group"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:['Select projects to link to "',g.name,'". Only unlinked projects for ',f==null?void 0:f.companyName," are shown."]}),d.length===0?t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No unlinked projects available for this customer."}):t.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:d.map(C=>{const k=i(C.buildingId);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:C.product}),t.jsx("p",{className:"text-sm text-gray-600",children:(k==null?void 0:k.address)||"Unknown address"})]}),t.jsxs(U,{variant:"secondary",onClick:()=>{w(C.id)},children:[t.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Link"]})]},C.id)})}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsx(U,{variant:"secondary",onClick:()=>v(!1),children:"Done"})})]})]})})]})}function Vv({customer:e,projects:s,showFilters:n=!0,maxItems:r}){const[a,l]=b.useState("all"),[i,o]=b.useState(new Set),[c,m]=b.useState(!1),j=[];s.forEach(f=>{const d=`${f.product} - ${f.serviceBandwidth}`;j.push({id:`proj-created-${f.id}`,type:"project_created",projectId:f.id,projectName:d,title:"Project Created",description:`New ${f.projectType.replace("-"," ")} project created`,author:f.cxAssignee||"System",createdAt:f.createdAt,icon:t.jsx(Tt,{className:"w-4 h-4"}),color:"text-blue-600 bg-blue-100"}),f.activityLog.forEach(x=>{j.push({id:x.id,type:"activity",projectId:f.id,projectName:d,title:Gv(x.type),description:x.description,author:x.author,createdAt:x.createdAt,icon:Kv(x.type),color:Yv(x.type),metadata:x.metadata})}),f.communicationLog&&f.communicationLog.forEach(x=>{j.push({id:x.id,type:"communication",projectId:f.id,projectName:d,title:`${x.direction==="outbound"?"Outbound":"Inbound"} ${Xv(x.type)}`,description:`${x.contactName}: ${x.summary}`,author:x.author,createdAt:x.createdAt,icon:Qv(x.type),color:x.direction==="outbound"?"text-green-600 bg-green-100":"text-purple-600 bg-purple-100"})}),f.internalNotes.forEach(x=>{j.push({id:x.id,type:"note",projectId:f.id,projectName:d,title:"Internal Note",description:x.content,author:x.author,createdAt:x.createdAt,icon:t.jsx(Xe,{className:"w-4 h-4"}),color:"text-yellow-600 bg-yellow-100"})})}),j.sort((f,d)=>new Date(d.createdAt).getTime()-new Date(f.createdAt).getTime());const y=a==="all"?j:j.filter(f=>f.type===a),h=r&&!c?y.slice(0,r):y,v=f=>{const d=new Set(i);d.has(f)?d.delete(f):d.add(f),o(d)},g=f=>{const d=new Date(f),x=new Date,u=x.getTime()-d.getTime(),w=u/(1e3*60*60),N=w/24;return w<1?`${Math.floor(u/6e4)}m ago`:w<24?`${Math.floor(w)}h ago`:N<7?`${Math.floor(N)}d ago`:d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:d.getFullYear()!==x.getFullYear()?"numeric":void 0})},p=[{value:"all",label:"All Events"},{value:"activity",label:"Activities"},{value:"communication",label:"Communications"},{value:"note",label:"Notes"},{value:"status_change",label:"Status Changes"}];return s.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(se,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No timeline events yet"}),t.jsx("p",{className:"text-sm",children:"Events will appear here as you interact with this customer"})]}):t.jsxs("div",{children:[n&&t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Un,{className:"w-4 h-4 text-gray-400"}),t.jsx("select",{value:a,onChange:f=>l(f.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 bg-white focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:p.map(f=>t.jsx("option",{value:f.value,children:f.label},f.value))}),t.jsxs("span",{className:"text-sm text-gray-500",children:[y.length," event",y.length!==1?"s":""]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),t.jsx("ul",{className:"space-y-4",children:h.map(f=>{const d=i.has(f.id),x=f.description.length>150;return t.jsxs("li",{className:"relative pl-10",children:[t.jsx("div",{className:`absolute left-0 w-8 h-8 rounded-full flex items-center justify-center ${f.color}`,children:f.icon}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"font-medium text-gray-900",children:f.title}),t.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:f.projectName})]}),t.jsx("div",{className:`mt-1 text-sm text-gray-600 ${!d&&x?"line-clamp-2":""}`,children:f.type==="note"?t.jsx($h,{text:f.description}):f.description}),x&&t.jsx("button",{onClick:()=>v(f.id),className:"text-xs text-blue-600 hover:underline mt-1 flex items-center gap-0.5",children:d?t.jsxs(t.Fragment,{children:[t.jsx(ut,{className:"w-3 h-3"}),"Show less"]}):t.jsxs(t.Fragment,{children:[t.jsx(ke,{className:"w-3 h-3"}),"Show more"]})})]}),t.jsx("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:g(f.createdAt)})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[t.jsx(Je,{className:"w-3 h-3"}),f.author]})]})]},f.id)})}),r&&y.length>r&&!c&&t.jsx("div",{className:"mt-4 text-center",children:t.jsxs("button",{onClick:()=>m(!0),className:"text-sm text-blue-600 hover:underline",children:["Show ",y.length-r," more events"]})})]})]})}function Gv(e){return{status_change:"Status Changed",task_completed:"Task Completed",note_added:"Note Added",blocker_added:"Blocker Added",blocker_resolved:"Blocker Resolved",escalated:"Project Escalated",de_escalated:"Project De-escalated",assigned:"Project Assigned",scheduled:"Install Scheduled",communication:"Communication Logged"}[e]||"Activity"}function Kv(e){switch(e){case"status_change":return t.jsx(He,{className:"w-4 h-4"});case"task_completed":return t.jsx(He,{className:"w-4 h-4"});case"blocker_added":case"blocker_resolved":return t.jsx(te,{className:"w-4 h-4"});case"escalated":case"de_escalated":return t.jsx(te,{className:"w-4 h-4"});case"scheduled":return t.jsx(me,{className:"w-4 h-4"});case"communication":return t.jsx(Xe,{className:"w-4 h-4"});default:return t.jsx(se,{className:"w-4 h-4"})}}function Yv(e){switch(e){case"status_change":return"text-cyan-600 bg-cyan-100";case"task_completed":return"text-green-600 bg-green-100";case"blocker_added":return"text-red-600 bg-red-100";case"blocker_resolved":return"text-green-600 bg-green-100";case"escalated":return"text-red-600 bg-red-100";case"de_escalated":return"text-green-600 bg-green-100";case"scheduled":return"text-cyan-600 bg-cyan-100";default:return"text-gray-600 bg-gray-100"}}function Qv(e){switch(e){case"call":return t.jsx(Oe,{className:"w-4 h-4"});case"email":return t.jsx(le,{className:"w-4 h-4"});case"meeting":return t.jsx(Je,{className:"w-4 h-4"});default:return t.jsx(Xe,{className:"w-4 h-4"})}}function Xv(e){return{call:"Call",email:"Email",meeting:"Meeting",text:"Text",other:"Communication"}[e]||"Communication"}const Jv={funding:Al,milestone:Sy,press:iy,leadership:Je,expansion:Gt,product:oy,partnership:ey,award:Vf,general:Tt},Zv={linkedin:fo,news:jh,"press-release":Tt,social:Je};function Su({alerts:e,onMarkRead:s,onDismiss:n,showDismissed:r=!1,compact:a=!1}){const[l,i]=b.useState(new Set),[o,c]=b.useState("all"),j=[...e.filter(p=>!(!r&&p.isDismissed||o!=="all"&&p.category!==o))].sort((p,f)=>p.isRead!==f.isRead?p.isRead?1:-1:new Date(f.publishedAt).getTime()-new Date(p.publishedAt).getTime()),y=p=>{const f=new Set(l);f.has(p)?f.delete(p):f.add(p),i(f)},h=p=>{const f=new Date(p),x=new Date().getTime()-f.getTime(),u=Math.floor(x/(1e3*60*60*24));return u===0?"Today":u===1?"Yesterday":u<7?`${u} days ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric"})},v=e.filter(p=>!p.isRead&&!p.isDismissed).length;if(e.length===0)return t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Ke,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No news alerts"}),t.jsx("p",{className:"text-sm",children:"News about this customer will appear here"})]});const g=Array.from(new Set(e.map(p=>p.category)));return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ke,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-medium text-gray-900",children:"News Alerts"}),v>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:[v," new"]})]}),!a&&g.length>1&&t.jsxs("select",{value:o,onChange:p=>c(p.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 bg-white focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:[t.jsx("option",{value:"all",children:"All Categories"}),g.map(p=>t.jsx("option",{value:p,children:iu[p].label},p))]})]}),t.jsx("ul",{className:"space-y-3",children:j.map(p=>{const f=iu[p.category],d=Jv[p.category],x=Zv[p.source],u=l.has(p.id);return t.jsx("li",{className:`border rounded-lg overflow-hidden transition-colors ${p.isRead?"bg-gray-50 border-gray-200":"bg-white border-blue-200 shadow-sm"}`,children:t.jsxs("div",{className:"p-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${f.bgColor}`,children:t.jsx(d,{className:`w-4 h-4 ${f.color}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${f.bgColor} ${f.color}`,children:f.label}),t.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[t.jsx(x,{className:"w-3 h-3"}),h(p.publishedAt)]}),!p.isRead&&t.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full",title:"Unread"})]}),t.jsx("h4",{className:`font-medium mt-1 ${p.isRead?"text-gray-700":"text-gray-900"}`,children:p.title}),!a&&t.jsx("p",{className:`text-sm mt-1 ${u?"":"line-clamp-2"} ${p.isRead?"text-gray-500":"text-gray-600"}`,children:p.summary})]})]}),!a&&p.summary.length>100&&t.jsx("button",{onClick:()=>y(p.id),className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-0.5 ml-11",children:u?t.jsxs(t.Fragment,{children:[t.jsx(ut,{className:"w-3 h-3"}),"Show less"]}):t.jsxs(t.Fragment,{children:[t.jsx(ke,{className:"w-3 h-3"}),"Show more"]})}),!a&&(p.suggestedAction||f.defaultAction)&&t.jsxs("div",{className:"mt-3 ml-11 flex items-start gap-2 p-2 bg-amber-50 border border-amber-200 rounded text-sm",children:[t.jsx(Kr,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),t.jsx("span",{className:"text-amber-800",children:p.suggestedAction||f.defaultAction})]}),t.jsxs("div",{className:"mt-3 flex items-center gap-2 ml-11",children:[p.sourceUrl&&t.jsxs("a",{href:p.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[t.jsx(Zs,{className:"w-3 h-3"}),"View Source"]}),!p.isRead&&s&&t.jsxs("button",{onClick:()=>s(p.id),className:"text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[t.jsx(Ct,{className:"w-3 h-3"}),"Mark Read"]}),!p.isDismissed&&n&&t.jsxs("button",{onClick:()=>n(p.id),className:"text-xs text-gray-500 hover:text-red-600 flex items-center gap-1",children:[t.jsx(mt,{className:"w-3 h-3"}),"Dismiss"]})]})]})},p.id)})}),j.length===0&&t.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No alerts match your filter"})]})}const Rt=e=>{const s=new Date;return s.setDate(s.getDate()-e),s.toISOString()},Uh=[{id:"news-001",customerId:"cust-001",category:"funding",title:"Acme Corp Closes $50M Series C Round",summary:"Acme Corp announced today it has raised $50 million in Series C funding led by Sequoia Capital. The company plans to use the funds to expand its product line and enter new markets.",source:"news",sourceUrl:"https://techcrunch.com/example",publishedAt:Rt(2),isRead:!1,isDismissed:!1,suggestedAction:"Great opportunity to discuss bandwidth upgrade for expansion"},{id:"news-002",customerId:"cust-001",category:"leadership",title:"Acme Corp Appoints New CTO",summary:"Dr. Jennifer Park joins Acme Corp as Chief Technology Officer, bringing 15 years of experience from Google and Microsoft.",source:"linkedin",sourceUrl:"https://linkedin.com/example",publishedAt:Rt(7),isRead:!0,isDismissed:!1,suggestedAction:"Reach out to introduce Pilot Fiber to new CTO"},{id:"news-003",customerId:"cust-002",category:"milestone",title:"TechStart Inc Reaches 1 Million Users",summary:"TechStart Inc celebrated a major milestone this week, announcing they have surpassed 1 million active users on their platform.",source:"press-release",publishedAt:Rt(1),isRead:!1,isDismissed:!1,suggestedAction:"Send congratulations and check if increased traffic requires bandwidth review"},{id:"news-004",customerId:"cust-002",category:"product",title:"TechStart Launches AI-Powered Analytics Suite",summary:"TechStart Inc has unveiled its new AI-powered analytics suite, featuring real-time data processing and predictive insights.",source:"news",publishedAt:Rt(14),isRead:!0,isDismissed:!1},{id:"news-005",customerId:"cust-003",category:"award",title:"Metro Design Studio Wins Best Agency Award",summary:"Metro Design Studio was named Best Creative Agency at the NYC Design Awards ceremony.",source:"social",publishedAt:Rt(3),isRead:!1,isDismissed:!1,suggestedAction:"Send congratulations gift or note"},{id:"news-006",customerId:"cust-003",category:"expansion",title:"Metro Design Opens Brooklyn Office",summary:"Metro Design Studio announced the opening of their second location in Brooklyn to better serve their growing client base.",source:"linkedin",publishedAt:Rt(10),isRead:!1,isDismissed:!1,suggestedAction:"Explore connectivity opportunity for new Brooklyn office"},{id:"news-007",customerId:"cust-005",category:"funding",title:"DataFlow Analytics Secures $100M Series D",summary:"DataFlow Analytics announced a $100M Series D round, valuing the company at $1.2 billion. The data analytics leader plans to double its engineering team.",source:"news",sourceUrl:"https://techcrunch.com/example",publishedAt:Rt(5),isRead:!1,isDismissed:!1,suggestedAction:"Schedule executive review meeting to discuss expansion needs"},{id:"news-008",customerId:"cust-005",category:"partnership",title:"DataFlow Partners with Salesforce",summary:"DataFlow Analytics and Salesforce announced a strategic partnership to integrate DataFlow's analytics directly into Salesforce CRM.",source:"press-release",publishedAt:Rt(8),isRead:!0,isDismissed:!1,suggestedAction:"Discuss potential increased data traffic from integration"},{id:"news-009",customerId:"cust-005",category:"expansion",title:"DataFlow Analytics Expands to 3 New Markets",summary:"DataFlow is opening offices in Chicago, Austin, and Seattle as part of their aggressive expansion strategy.",source:"news",publishedAt:Rt(21),isRead:!0,isDismissed:!0},{id:"news-010",customerId:"cust-006",category:"milestone",title:"Manhattan Media Group Celebrates 25 Years",summary:"Manhattan Media Group is celebrating its 25th anniversary with a gala event and special programming throughout the month.",source:"linkedin",publishedAt:Rt(4),isRead:!1,isDismissed:!1,suggestedAction:"Send anniversary congratulations"},{id:"news-011",customerId:"cust-006",category:"press",title:"Manhattan Media Featured in Ad Age",summary:'Ad Age profiled Manhattan Media Group in their "Agencies to Watch" issue, highlighting their innovative digital strategies.',source:"news",publishedAt:Rt(12),isRead:!0,isDismissed:!1}];function ej(e){return Uh.filter(s=>s.customerId===e)}function Bh(e){return Uh.filter(s=>s.customerId===e&&!s.isRead&&!s.isDismissed).length}function zh(e,s){const n=[];let r=100;const a=new Date,l=s.map(u=>new Date(u.lastCustomerContact)),i=l.length>0?Math.max(...l.map(u=>u.getTime())):a.getTime()-30*24*60*60*1e3,o=Math.floor((a.getTime()-i)/(1e3*60*60*24));if(o>14){const u=Math.min(25,(o-14)*3);r-=u,n.push({name:"Communication Gap",impact:"negative",points:-u,description:`No contact in ${o} days`,category:"engagement"})}else o>7?(r-=8,n.push({name:"Communication",impact:"negative",points:-8,description:`Last contact ${o} days ago`,category:"engagement"})):n.push({name:"Communication",impact:"positive",points:0,description:`Recent contact (${o} days ago)`,category:"engagement"});const c=Bh(e.id);c>3?(r-=10,n.push({name:"Unread Alerts",impact:"negative",points:-10,description:`${c} unread news alerts`,category:"engagement"})):c>0&&(r-=3,n.push({name:"News Alerts",impact:"neutral",points:-3,description:`${c} unread news alerts`,category:"engagement"}));const m=s.filter(u=>u.status!=="completed"),j=s.filter(u=>u.status==="completed");if(s.length===0)r-=15,n.push({name:"No Projects",impact:"negative",points:-15,description:"No projects on record",category:"project"});else if(j.length>0){const u=Math.min(10,j.length*3);r+=u,n.push({name:"Completed Projects",impact:"positive",points:u,description:`${j.length} successful project${j.length>1?"s":""}`,category:"project"})}const y=s.reduce((u,w)=>u+w.blockers.filter(N=>!N.resolvedAt).length,0);if(y>0){const u=Math.min(20,y*8);r-=u,n.push({name:"Active Blockers",impact:"negative",points:-u,description:`${y} blocker${y>1?"s":""} across projects`,category:"project"})}else m.length>0&&n.push({name:"Blockers",impact:"positive",points:0,description:"No active blockers",category:"project"});const h=s.filter(u=>u.isEscalated);if(h.length>0){const u=Math.min(30,h.length*15);r-=u,n.push({name:"Escalations",impact:"negative",points:-u,description:`${h.length} escalated project${h.length>1?"s":""}`,category:"risk"})}const v=s.filter(u=>new Date(u.focDate)<a&&u.status!=="completed");if(v.length>0){const u=Math.min(15,v.length*8);r-=u,n.push({name:"Delayed Projects",impact:"negative",points:-u,description:`${v.length} project${v.length>1?"s":""} past FOC date`,category:"project"})}const g=s.reduce((u,w)=>u+w.mrc,0);g>=5e3?(r+=10,n.push({name:"High Value",impact:"positive",points:10,description:`$${g.toLocaleString()}/mo MRC`,category:"revenue"})):g>=2e3&&(r+=5,n.push({name:"Good Value",impact:"positive",points:5,description:`$${g.toLocaleString()}/mo MRC`,category:"revenue"})),e.vipTier==="platinum"?(r+=10,n.push({name:"Platinum VIP",impact:"positive",points:10,description:"Strategic customer relationship",category:"revenue"})):e.vipTier==="gold"?(r+=7,n.push({name:"Gold VIP",impact:"positive",points:7,description:"Premium customer tier",category:"revenue"})):e.vipTier==="silver"&&(r+=4,n.push({name:"Silver VIP",impact:"positive",points:4,description:"Enhanced customer tier",category:"revenue"})),r=Math.max(0,Math.min(100,r));let p;r>=90?p="excellent":r>=75?p="good":r>=60?p="needs-attention":r>=40?p="at-risk":p="critical";let f="stable";const d=n.filter(u=>u.impact==="negative"),x=n.filter(u=>u.impact==="positive");return d.length>x.length+1?f="declining":x.length>d.length+1&&(f="improving"),{score:r,level:p,factors:n,trend:f}}function ui(e){switch(e){case"excellent":return"text-green-600";case"good":return"text-blue-600";case"needs-attention":return"text-yellow-600";case"at-risk":return"text-orange-600";case"critical":return"text-red-600"}}function Du(e){switch(e){case"excellent":return"bg-green-100";case"good":return"bg-blue-100";case"needs-attention":return"bg-yellow-100";case"at-risk":return"bg-orange-100";case"critical":return"bg-red-100"}}function Tu(e){switch(e){case"excellent":return"Excellent";case"good":return"Good";case"needs-attention":return"Needs Attention";case"at-risk":return"At Risk";case"critical":return"Critical"}}const tj={engagement:Xe,project:ts,revenue:Al,risk:te};function Iu({customer:e,projects:s,showDetails:n=!1,size:r="md"}){const[a,l]=b.useState(!1),{score:i,level:o,factors:c,trend:m}=zh(e,s),j={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},y={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},h=p=>{switch(p.impact){case"positive":return t.jsx(Is,{className:"w-3 h-3 text-green-500"});case"negative":return t.jsx(Fr,{className:"w-3 h-3 text-red-500"});default:return t.jsx(Lr,{className:"w-3 h-3 text-gray-400"})}},v=p=>{const f=tj[p];return t.jsx(f,{className:"w-3 h-3"})},g=m==="improving"?Is:m==="declining"?Fr:Lr;return n?t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${Du(o)}`,children:t.jsx("span",{className:`text-lg font-bold ${ui(o)}`,children:i})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:"Customer Health"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-sm font-medium ${ui(o)}`,children:Tu(o)}),t.jsxs("span",{className:`inline-flex items-center gap-0.5 text-xs ${m==="improving"?"text-green-600":m==="declining"?"text-red-600":"text-gray-500"}`,children:[t.jsx(g,{className:"w-3 h-3"}),m]})]})]})]}),a?t.jsx(ut,{className:"w-5 h-5 text-gray-400"}):t.jsx(ke,{className:"w-5 h-5 text-gray-400"})]}),a&&t.jsxs("div",{className:"border-t border-gray-200 p-3",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Health Factors"}),["engagement","project","revenue","risk"].map(p=>{const f=c.filter(d=>d.category===p);return f.length===0?null:t.jsxs("div",{className:"mb-3 last:mb-0",children:[t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mb-1",children:[v(p),t.jsx("span",{className:"capitalize",children:p})]}),t.jsx("div",{className:"space-y-1 ml-4",children:f.map((d,x)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[h(d),t.jsx("span",{className:"text-gray-700",children:d.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-500 text-xs",children:d.description}),d.points!==0&&t.jsxs("span",{className:`font-medium ${d.points>0?"text-green-600":"text-red-600"}`,children:[d.points>0?"+":"",d.points]})]})]},x))})]},p)}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[t.jsx("span",{children:"Critical"}),t.jsx("span",{children:"Excellent"})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all duration-500 ${o==="excellent"?"bg-green-500":o==="good"?"bg-blue-500":o==="needs-attention"?"bg-yellow-500":o==="at-risk"?"bg-orange-500":"bg-red-500"}`,style:{width:`${i}%`}})})]})]})]}):t.jsxs("span",{className:`inline-flex items-center gap-1.5 font-medium rounded-full ${j[r]} ${Du(o)} ${ui(o)}`,title:`Customer Health: ${Tu(o)} (${i})`,children:[t.jsx(Fn,{className:y[r]}),i]})}function sj(e,s){const n=[];let r=0;const a=new Date,l=zh(e,s);l.score<40?(r+=35,n.push({name:"Critical Health Score",weight:35,description:`Health score is ${l.score} (Critical)`,severity:"high"})):l.score<60?(r+=25,n.push({name:"Low Health Score",weight:25,description:`Health score is ${l.score} (At Risk)`,severity:"high"})):l.score<75&&(r+=10,n.push({name:"Health Needs Attention",weight:10,description:`Health score is ${l.score}`,severity:"medium"}));const i=s.map(p=>new Date(p.lastCustomerContact)),o=i.length>0?Math.max(...i.map(p=>p.getTime())):a.getTime()-60*24*60*60*1e3,c=Math.floor((a.getTime()-o)/(1e3*60*60*24));c>30?(r+=25,n.push({name:"No Recent Contact",weight:25,description:`No contact in ${c} days`,severity:"high"})):c>14&&(r+=15,n.push({name:"Communication Gap",weight:15,description:`Last contact ${c} days ago`,severity:"medium"}));const m=s.filter(p=>p.isEscalated);m.length>=2?(r+=20,n.push({name:"Multiple Escalations",weight:20,description:`${m.length} projects escalated`,severity:"high"})):m.length===1&&(r+=10,n.push({name:"Active Escalation",weight:10,description:"1 project escalated",severity:"medium"}));const j=s.filter(p=>new Date(p.focDate)<a&&p.status!=="completed");j.length>=2?(r+=15,n.push({name:"Multiple Delayed Projects",weight:15,description:`${j.length} projects past FOC date`,severity:"high"})):j.length===1&&(r+=8,n.push({name:"Project Delayed",weight:8,description:"1 project past FOC date",severity:"medium"}));const y=s.reduce((p,f)=>p+f.blockers.filter(d=>!d.resolvedAt).length,0);y>=3?(r+=15,n.push({name:"Multiple Blockers",weight:15,description:`${y} unresolved blockers`,severity:"high"})):y>=1&&(r+=8,n.push({name:"Active Blockers",weight:8,description:`${y} unresolved blocker${y>1?"s":""}`,severity:"medium"})),l.trend==="declining"&&(r+=10,n.push({name:"Declining Engagement",weight:10,description:"Relationship health is declining",severity:"medium"}));const h=s.filter(p=>p.status!=="completed");s.length>0&&h.length===0&&(r+=10,n.push({name:"No Active Projects",weight:10,description:"All projects completed, no new activity",severity:"low"})),r=Math.min(100,Math.max(0,r));let v;r>=70?v="critical":r>=50?v="high":r>=30?v="medium":r>=10?v="low":v="none";let g;switch(v){case"critical":g="Immediate executive outreach required. Schedule customer success call within 24 hours.";break;case"high":g="Priority attention needed. Reach out to understand concerns and develop retention plan.";break;case"medium":g="Monitor closely. Schedule proactive check-in call within the week.";break;case"low":g="Continue regular engagement. Consider sending satisfaction survey.";break;default:g="Customer relationship is healthy. Maintain current engagement level."}return{level:v,score:r,factors:n,recommendation:g}}function mi(e){switch(e){case"critical":return"text-red-700";case"high":return"text-orange-600";case"medium":return"text-yellow-600";case"low":return"text-blue-600";case"none":return"text-green-600"}}function Au(e){switch(e){case"critical":return"bg-red-100";case"high":return"bg-orange-100";case"medium":return"bg-yellow-100";case"low":return"bg-blue-100";case"none":return"bg-green-100"}}function pi(e){switch(e){case"critical":return"Critical Risk";case"high":return"High Risk";case"medium":return"Medium Risk";case"low":return"Low Risk";case"none":return"No Risk"}}const nj={critical:hr,high:te,medium:vt,low:Yr,none:Pe};function Pu({customer:e,projects:s,showDetails:n=!1,size:r="md"}){const[a,l]=b.useState(!1),{level:i,score:o,factors:c,recommendation:m}=sj(e,s),j=nj[i],y={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},h={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return i==="none"&&!n?null:n?t.jsxs("div",{className:`border rounded-lg overflow-hidden ${i==="critical"?"border-red-300 bg-red-50":i==="high"?"border-orange-300 bg-orange-50":"border-gray-200 bg-white"}`,children:[t.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center justify-between p-3 hover:bg-opacity-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${Au(i)}`,children:t.jsx(j,{className:`w-5 h-5 ${mi(i)}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:"Churn Risk"}),t.jsxs("p",{className:`text-sm font-medium ${mi(i)}`,children:[pi(i),i!=="none"&&t.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",o,"%)"]})]})]})]}),a?t.jsx(ut,{className:"w-5 h-5 text-gray-400"}):t.jsx(ke,{className:"w-5 h-5 text-gray-400"})]}),a&&t.jsxs("div",{className:"border-t border-gray-200 p-3 bg-white",children:[t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-50 border border-blue-200 rounded mb-3",children:[t.jsx(Kr,{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-blue-700 mb-0.5",children:"Recommended Action"}),t.jsx("p",{className:"text-sm text-blue-800",children:m})]})]}),c.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Risk Factors"}),t.jsx("div",{className:"space-y-2",children:c.map((v,g)=>t.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${v.severity==="high"?"bg-red-50":v.severity==="medium"?"bg-yellow-50":"bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${v.severity==="high"?"bg-red-500":v.severity==="medium"?"bg-yellow-500":"bg-gray-400"}`}),t.jsx("span",{className:"text-sm text-gray-700",children:v.name})]}),t.jsx("span",{className:"text-xs text-gray-500",children:v.description})]},g))})]}),c.length===0&&t.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"No risk factors identified"}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[t.jsx("span",{children:"Low Risk"}),t.jsx("span",{children:"High Risk"})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all duration-500 ${i==="critical"?"bg-red-500":i==="high"?"bg-orange-500":i==="medium"?"bg-yellow-500":i==="low"?"bg-blue-500":"bg-green-500"}`,style:{width:`${o}%`}})})]})]})]}):t.jsxs("span",{className:`inline-flex items-center gap-1.5 font-medium rounded-full ${y[r]} ${Au(i)} ${mi(i)}`,title:`Churn Risk: ${pi(i)}`,children:[t.jsx(j,{className:h[r]}),i!=="none"&&t.jsx("span",{children:pi(i)})]})}function rj(){const{id:e}=Nc(),s=Ve(),{state:n,dispatch:r,getBuilding:a}=Se(),[l,i]=b.useState("overview"),o=n.customers.find(u=>u.id===e),c=n.projects.filter(u=>u.customerId===e);if(!o)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500",children:"Customer not found"}),t.jsx(U,{variant:"link",onClick:()=>s("/customers"),children:"Back to Customers"})]});const m=o.contacts.find(u=>u.isPrimary)||o.contacts[0],j=c.filter(u=>u.status!=="completed"),y=c.filter(u=>u.status==="completed"),h=c.reduce((u,w)=>u+w.mrc,0),v=u=>{r({type:"UPDATE_CUSTOMER_VIP_TIER",payload:{customerId:o.id,vipTier:u}})},g=u=>{r({type:"UPDATE_CUSTOMER_LINKEDIN",payload:{customerId:o.id,linkedInUrl:u||void 0}})},p=Jy(o.companyName,m==null?void 0:m.email),f=ej(o.id),d=Bh(o.id),x=[{id:"overview",label:"Overview",icon:Gt},{id:"timeline",label:"Timeline",icon:Fn},{id:"news",label:"News",icon:Ke,badge:d},{id:"projects",label:"Projects",icon:ts,badge:c.length}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(kc,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.companyName}),t.jsx(_c,{tier:o.vipTier||"standard",size:"md"}),t.jsx(Iu,{customer:o,projects:c,size:"md"}),t.jsx(Pu,{customer:o,projects:c,size:"md"})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-gray-600",children:[t.jsxs("span",{children:[c.length," project",c.length!==1?"s":""]}),t.jsx("span",{className:"text-gray-300",children:"|"}),t.jsxs("span",{className:"text-green-600 font-medium",children:["$",h.toLocaleString(),"/mo MRC"]})]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[o.linkedInUrl&&t.jsxs("a",{href:o.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[t.jsx(fo,{className:"w-4 h-4"}),"LinkedIn"]}),t.jsxs(U,{onClick:()=>s(`/projects?customer=${o.id}`),children:[t.jsx(ts,{className:"w-4 h-4 mr-2"}),"View Projects"]})]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex gap-8",children:x.map(u=>t.jsxs("button",{onClick:()=>i(u.id),className:`
                pb-4 text-sm font-medium transition-colors relative flex items-center gap-2
                ${l===u.id?"text-pilot-secondary border-b-2 border-pilot-primary":"text-gray-500 hover:text-gray-700"}
              `,children:[t.jsx(u.icon,{className:"w-4 h-4"}),u.label,u.badge&&u.badge>0&&t.jsx("span",{className:"ml-1 bg-pilot-primary text-pilot-secondary text-xs px-2 py-0.5 rounded-full",children:u.badge})]},u.id))})}),l==="overview"&&t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsxs(T,{className:"col-span-2",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Le,{className:"w-5 h-5"}),"Contacts"]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.contacts.map(u=>t.jsxs("div",{className:`p-3 rounded-lg border ${u.isPrimary?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"font-medium text-gray-900",children:u.name}),u.isPrimary&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Primary"})]}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(le,{className:"w-3.5 h-3.5"}),t.jsx("a",{href:`mailto:${u.email}`,className:"hover:underline",children:u.email})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Oe,{className:"w-3.5 h-3.5"}),t.jsx("a",{href:`tel:${u.phone}`,className:"hover:underline",children:u.phone})]}),u.role&&t.jsxs("p",{className:"text-xs text-gray-500 capitalize mt-1",children:["Role: ",u.role.replace("_"," ")]})]})]},u.id))})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs(T,{children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"VIP Status"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"VIP Tier"}),t.jsxs("select",{value:o.vipTier||"standard",onChange:u=>v(u.target.value==="standard"?void 0:u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"standard",children:"Standard"}),t.jsx("option",{value:"silver",children:"Silver"}),t.jsx("option",{value:"gold",children:"Gold"}),t.jsx("option",{value:"platinum",children:"Platinum"})]})]}),o.vipTier&&t.jsx(Gy,{tier:o.vipTier})]})]}),t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(fo,{className:"w-5 h-5"}),"LinkedIn"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"url",value:o.linkedInUrl||"",onChange:u=>g(u.target.value),placeholder:"Enter LinkedIn URL...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"}),!o.linkedInUrl&&t.jsxs("button",{onClick:()=>g(p),className:"w-full text-left text-sm text-blue-600 hover:underline flex items-center gap-1",children:[t.jsx(Zs,{className:"w-3 h-3"}),"Suggest: ",p]}),o.linkedInUrl&&t.jsxs("a",{href:o.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center gap-1",children:[t.jsx(Zs,{className:"w-3 h-3"}),"Open LinkedIn"]})]})]})]}),t.jsx("div",{className:"col-span-3",children:t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-pilot-secondary",children:j.length}),t.jsx("p",{className:"text-sm text-gray-600",children:"Active Projects"})]}),t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-green-600",children:y.length}),t.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["$",h.toLocaleString()]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Revenue"})]}),t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c.length>0?Math.floor((new Date().getTime()-new Date(c.sort((u,w)=>new Date(u.createdAt).getTime()-new Date(w.createdAt).getTime())[0].createdAt).getTime())/(1e3*60*60*24)):0}),t.jsx("p",{className:"text-sm text-gray-600",children:"Days as Customer"})]}),t.jsx("div",{className:"col-span-1",children:t.jsx(Iu,{customer:o,projects:c,showDetails:!0})})]})}),t.jsx("div",{className:"col-span-3",children:t.jsx(Pu,{customer:o,projects:c,showDetails:!0})}),f.length>0&&t.jsx("div",{className:"col-span-3",children:t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(Ke,{className:"w-5 h-5"}),"Recent News",d>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:[d," new"]})]}),t.jsx(U,{variant:"link",size:"sm",onClick:()=>i("news"),children:"View All"})]}),t.jsx(Su,{alerts:f.slice(0,3),compact:!0})]})})]}),l==="timeline"&&t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(se,{className:"w-5 h-5"}),"Customer Timeline"]}),t.jsx(Vv,{customer:o,projects:c})]}),l==="news"&&t.jsx(T,{children:t.jsx(Su,{alerts:f,onMarkRead:u=>{console.log("Mark read:",u)},onDismiss:u=>{console.log("Dismiss:",u)}})}),l==="projects"&&t.jsx("div",{className:"space-y-4",children:c.length===0?t.jsxs(T,{className:"text-center py-12",children:[t.jsx(ts,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No projects yet"})]}):t.jsx("div",{className:"space-y-3",children:c.map(u=>{const w=a(u.buildingId);return t.jsx(T,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(`/projects/${u.id}`),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-medium text-gray-900",children:u.product}),t.jsx("span",{className:"text-sm text-gray-500",children:"-"}),t.jsx("span",{className:"text-sm text-gray-600",children:u.serviceBandwidth})]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[w==null?void 0:w.address,", ",w==null?void 0:w.city]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${u.status==="completed"?"bg-green-100 text-green-700":u.status==="installing"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:u.status}),t.jsxs("p",{className:"text-sm text-green-600 font-medium mt-1",children:["$",u.mrc.toLocaleString(),"/mo"]})]})]})},u.id)})})})]})}function aj(){const e=Ve(),{state:s,getCustomer:n,dispatch:r}=Se(),[a,l]=b.useState("all"),i=s.projects.flatMap(x=>{const u=n(x.customerId);return x.tasks.filter(w=>w.assignee===G.name).map(w=>({...w,project:x,customerName:(u==null?void 0:u.companyName)||"Unknown"}))}),o=new Date;o.setHours(0,0,0,0);const c=x=>{if(!x)return{status:"no-date",diffDays:1/0};const u=new Date(x);u.setHours(0,0,0,0);const w=Math.round((u.getTime()-o.getTime())/(1e3*60*60*24));return w<0?{status:"overdue",diffDays:w}:w===0?{status:"due-today",diffDays:w}:w<=7?{status:"upcoming",diffDays:w}:{status:"later",diffDays:w}},m=i.filter(x=>{if(a==="completed")return x.completed;if(x.completed)return!1;const{status:u}=c(x.dueDate);return a==="overdue"?u==="overdue":a==="due-today"?u==="due-today":a==="upcoming"?u==="upcoming"||u==="due-today":!0}).sort((x,u)=>{const w=c(x.dueDate),N=c(u.dueDate);return w.status==="overdue"&&N.status!=="overdue"?-1:N.status==="overdue"&&w.status!=="overdue"||!x.dueDate?1:u.dueDate?new Date(x.dueDate).getTime()-new Date(u.dueDate).getTime():-1}),j=i.filter(x=>!x.completed&&c(x.dueDate).status==="overdue").length,y=i.filter(x=>!x.completed&&c(x.dueDate).status==="due-today").length,h=i.filter(x=>!x.completed&&["upcoming","due-today"].includes(c(x.dueDate).status)).length,v=i.filter(x=>x.completed).length,g=i.filter(x=>!x.completed).length,p=x=>{r({type:"UPDATE_TASK",payload:{projectId:x.project.id,taskId:x.id,completed:!x.completed}})},f=x=>{if(!x)return null;const u=new Date(x),{status:w,diffDays:N}=c(x);return w==="overdue"?{text:`${Math.abs(N)}d overdue`,className:"text-red-600 bg-red-50"}:w==="due-today"?{text:"Due today",className:"text-orange-600 bg-orange-50"}:N===1?{text:"Due tomorrow",className:"text-yellow-600 bg-yellow-50"}:N<=7?{text:`Due in ${N}d`,className:"text-gray-600 bg-gray-100"}:{text:u.toLocaleDateString("en-US",{month:"short",day:"numeric"}),className:"text-gray-500 bg-gray-50"}},d=[{value:"all",label:"All Tasks",count:g},{value:"overdue",label:"Overdue",count:j},{value:"due-today",label:"Due Today",count:y},{value:"upcoming",label:"This Week",count:h},{value:"completed",label:"Completed",count:v}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Tasks"}),t.jsxs("p",{className:"text-gray-600",children:[g," task",g!==1?"s":""," assigned to you"]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>l("all"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Incomplete"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g})]}),t.jsx(Js,{className:"w-8 h-8 text-gray-200"})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>l("overdue"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Overdue"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:j})]}),t.jsx(vt,{className:"w-8 h-8 text-red-200"})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>l("due-today"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Due Today"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:y})]}),t.jsx(se,{className:"w-8 h-8 text-orange-200"})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>l("completed"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:v})]}),t.jsx(He,{className:"w-8 h-8 text-green-200"})]})})})]}),t.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:d.map(x=>t.jsxs("button",{onClick:()=>l(x.value),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${a===x.value?"border-pilot-primary text-pilot-secondary":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[x.label,x.count>0&&t.jsx("span",{className:`ml-2 px-1.5 py-0.5 text-xs rounded-full ${a===x.value?"bg-pilot-primary text-pilot-secondary":"bg-gray-100 text-gray-600"}`,children:x.count})]},x.value))}),t.jsx(T,{className:"p-0 overflow-hidden",children:m.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(He,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"font-medium",children:"No tasks"}),t.jsx("p",{className:"text-sm mt-1",children:a==="completed"?"You haven't completed any tasks yet":a==="overdue"?"No overdue tasks!":a==="due-today"?"No tasks due today":"No tasks assigned to you"})]}):t.jsx("ul",{className:"divide-y divide-gray-200",children:m.map(x=>{const u=f(x.dueDate);return t.jsx("li",{className:"hover:bg-gray-50",children:t.jsxs("div",{className:"flex items-start gap-3 p-4",children:[t.jsx("button",{onClick:()=>p(x),className:"flex-shrink-0 mt-0.5 hover:opacity-70",children:x.completed?t.jsx(He,{className:"w-5 h-5 text-green-500"}):t.jsx(Js,{className:"w-5 h-5 text-gray-300"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("span",{className:`${x.completed?"text-gray-500 line-through":"text-gray-900"}`,children:x.title}),u&&!x.completed&&t.jsxs("span",{className:`flex-shrink-0 inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded ${u.className}`,children:[t.jsx(me,{className:"w-3 h-3"}),u.text]})]}),t.jsxs("button",{onClick:()=>e(`/projects/${x.project.id}?tab=tasks`),className:"flex items-center gap-2 mt-1 text-sm text-gray-500 hover:text-blue-600",children:[t.jsx(Gt,{className:"w-3 h-3"}),t.jsx("span",{children:x.customerName}),t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"text-gray-400",children:x.section})]})]})]})},`${x.project.id}-${x.id}`)})})})]})}const lj=[{value:"email",label:"Email"},{value:"phone",label:"Phone Call"},{value:"internal",label:"Internal"},{value:"customer-request",label:"Customer Request"}],ij=[{value:"general",label:"General"},{value:"billing",label:"Billing"},{value:"technical",label:"Technical"},{value:"scheduling",label:"Scheduling"},{value:"complaint",label:"Complaint"},{value:"change-request",label:"Change Request"}],oj=[{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];function cj({isOpen:e,onClose:s,onTicketCreated:n,defaultProjectId:r,defaultCustomerId:a}){const{state:l,dispatch:i}=Se(),[o,c]=b.useState("email"),[m,j]=b.useState("general"),[y,h]=b.useState("normal"),[v,g]=b.useState(""),[p,f]=b.useState(""),[d,x]=b.useState(""),[u,w]=b.useState(r||""),[N,C]=b.useState(a||""),[k,I]=b.useState(G.name),[z,_]=b.useState(!0),D=()=>{c("email"),j("general"),h("normal"),g(""),f(""),x(""),w(r||""),C(a||""),I(G.name),_(!0)},Q=()=>{D(),s()},F=P=>{if(P.preventDefault(),!v.trim()||!p.trim())return;const B=new Date,O=Ea[y],X=new Date(B);X.setHours(X.getHours()+O.firstResponse);const ne=new Date(B);ne.setHours(ne.getHours()+O.resolution);const tt={id:`ticket-${Date.now()}`,projectId:u||void 0,customerId:N||void 0,type:o,category:m,status:"open",priority:y,subject:v.trim(),description:p.trim(),from:d.trim()||void 0,assignee:k,createdAt:B.toISOString(),updatedAt:B.toISOString(),isRead:!0,requiresResponse:z,firstResponseDue:X.toISOString(),resolutionDue:ne.toISOString(),replies:[],notes:[]};i({type:"ADD_TICKET",payload:tt}),n&&n(tt.id),Q()},K=[{value:"",label:"No linked project"},...l.projects.map(P=>{const B=l.customers.find(O=>O.id===P.customerId);return{value:P.id,label:`${(B==null?void 0:B.companyName)||"Unknown"} - ${P.serviceOrderId}`}})],pe=[{value:"",label:"Select customer..."},...l.customers.map(P=>({value:P.id,label:P.companyName}))],De=[{value:"",label:"Unassigned"},...re.map(P=>({value:P.name,label:P.name}))],J=P=>{if(w(P),P){const B=l.projects.find(O=>O.id===P);B&&C(B.customerId)}};return e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Q}),t.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"New Ticket"}),t.jsx("button",{onClick:Q,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(mt,{className:"w-5 h-5 text-gray-500"})})]}),t.jsx("form",{onSubmit:F,className:"flex-1 overflow-y-auto p-6",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsx(we,{options:lj,value:o,onChange:P=>c(P)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsx(we,{options:ij,value:m,onChange:P=>j(P)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),t.jsx(we,{options:oj,value:y,onChange:P=>h(P)})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:v,onChange:P=>g(P.target.value),placeholder:"Brief summary of the ticket",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From (Contact)"}),t.jsx("input",{type:"text",value:d,onChange:P=>x(P.target.value),placeholder:"Email or phone of the requester",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:p,onChange:P=>f(P.target.value),placeholder:"Full details of the ticket...",rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary resize-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link to Project"}),t.jsx(we,{options:K,value:u,onChange:J}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Link this ticket to an existing project"})]}),!u&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),t.jsx(we,{options:pe,value:N,onChange:C})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignee"}),t.jsx(we,{options:De,value:k,onChange:I})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"requiresResponse",checked:z,onChange:P=>_(P.target.checked),className:"w-4 h-4 text-pilot-secondary border-gray-300 rounded focus:ring-pilot-primary"}),t.jsx("label",{htmlFor:"requiresResponse",className:"text-sm text-gray-700",children:"Requires response from customer"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"SLA Targets (based on priority)"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"First Response:"}),t.jsxs("span",{className:"ml-2 font-medium",children:[Ea[y].firstResponse," hours"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Resolution:"}),t.jsxs("span",{className:"ml-2 font-medium",children:[Ea[y].resolution," hours"]})]})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsx(U,{variant:"secondary",onClick:Q,children:"Cancel"}),t.jsx(U,{onClick:F,disabled:!v.trim()||!p.trim(),children:"Create Ticket"})]})]})]}):null}const dj={email:t.jsx(le,{className:"w-4 h-4"}),phone:t.jsx(Oe,{className:"w-4 h-4"}),internal:t.jsx(Xe,{className:"w-4 h-4"}),"customer-request":t.jsx(Dc,{className:"w-4 h-4"})},uj={open:"bg-blue-100 text-blue-700",pending:"bg-yellow-100 text-yellow-700",resolved:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-500"},mj={low:"bg-gray-100 text-gray-600",normal:"bg-blue-100 text-blue-600",high:"bg-orange-100 text-orange-600",urgent:"bg-red-100 text-red-600"},fa={billing:"Billing",technical:"Technical",scheduling:"Scheduling",general:"General",complaint:"Complaint","change-request":"Change Request"},pj={open:t.jsx(Js,{className:"w-3 h-3"}),pending:t.jsx(vt,{className:"w-3 h-3"}),resolved:t.jsx(He,{className:"w-3 h-3"}),closed:t.jsx(He,{className:"w-3 h-3"})};function hj(e){const s=new Date(e),r=new Date().getTime()-s.getTime(),a=Math.floor(r/(1e3*60)),l=Math.floor(r/(1e3*60*60)),i=Math.floor(r/(1e3*60*60*24));return a<60?`${a}m ago`:l<24?`${l}h ago`:i===1?"Yesterday":i<7?`${i}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function wo(e){return e.status==="resolved"||e.status==="closed"?!1:e.firstRespondedAt?new Date(e.firstRespondedAt)>new Date(e.firstResponseDue):new Date>new Date(e.firstResponseDue)}function bo(e){return e.status==="resolved"||e.status==="closed"?e.resolvedAt?new Date(e.resolvedAt)>new Date(e.resolutionDue):!1:new Date>new Date(e.resolutionDue)}function xj(e){const s=wo(e),n=bo(e);if(s||n)return{text:"SLA Breached",color:"text-red-600 bg-red-50"};const r=new Date;if(!e.firstRespondedAt){const l=(new Date(e.firstResponseDue).getTime()-r.getTime())/(1e3*60*60);if(l<1)return{text:`Response: ${Math.round(l*60)}m`,color:"text-red-600 bg-red-50"};if(l<4)return{text:`Response: ${Math.round(l)}h`,color:"text-yellow-600 bg-yellow-50"}}if(e.status!=="resolved"&&e.status!=="closed"){const l=(new Date(e.resolutionDue).getTime()-r.getTime())/(1e3*60*60);if(l<4)return{text:`Resolve: ${Math.round(l)}h`,color:"text-yellow-600 bg-yellow-50"}}return{text:"On Track",color:"text-green-600 bg-green-50"}}function gj(){const{state:e,getProject:s,getCustomer:n,dispatch:r}=Se(),{openDrawer:a}=fh(),[l]=bc(),[i,o]=b.useState("all"),[c,m]=b.useState("all"),[j,y]=b.useState("all"),[h,v]=b.useState(!1);b.useEffect(()=>{const D=l.get("view"),Q=l.get("category");if(D)switch(D){case"mine":y(G.name),o("all"),m("all");break;case"unassigned":y("unassigned"),o("all"),m("all");break;case"urgent":o("all"),y("all"),m("all");break;default:o("all"),y("all"),m("all")}else Q?(m(Q),o("all"),y("all")):(o("all"),m("all"),y("all"))},[l]);const g=Array.from(new Set(e.tickets.map(D=>D.assignee).filter(Boolean))),p=e.tickets.filter(D=>(D.status==="open"||D.status==="pending")&&(wo(D)||bo(D))).length,f=l.get("view")==="urgent",d=e.tickets.filter(D=>f?D.priority==="urgent"&&D.status!=="closed":i==="open"?D.status==="open":i==="pending"?D.status==="pending":i==="resolved"?D.status==="resolved"||D.status==="closed":i==="needs-response"?D.requiresResponse&&D.status==="open":i==="sla-breached"?(D.status==="open"||D.status==="pending")&&(wo(D)||bo(D)):!0).filter(D=>c!=="all"?D.category===c:!0).filter(D=>j==="unassigned"?!D.assignee:j!=="all"?D.assignee===j:!0).sort((D,Q)=>new Date(Q.updatedAt).getTime()-new Date(D.updatedAt).getTime()),x=e.tickets.filter(D=>D.status==="open").length,u=e.tickets.filter(D=>D.status==="pending").length,w=e.tickets.filter(D=>D.requiresResponse&&D.status==="open").length,N=e.tickets.filter(D=>!D.isRead).length,C=[{value:"all",label:`All Tickets (${e.tickets.length})`},{value:"open",label:`Open (${x})`},{value:"pending",label:`Pending (${u})`},{value:"resolved",label:"Resolved"},{value:"needs-response",label:`Needs Response (${w})`},{value:"sla-breached",label:`SLA Breached (${p})`}],k=[{value:"all",label:"All Categories"},...Object.entries(fa).map(([D,Q])=>({value:D,label:Q}))],I=[{value:"all",label:"All Assignees"},{value:"unassigned",label:"Unassigned"},...g.map(D=>({value:D,label:D}))],z=D=>{r({type:"MARK_TICKET_READ",payload:D}),a(D)},_=()=>{const D=l.get("view"),Q=l.get("category");if(D)switch(D){case"mine":return"My Tickets";case"unassigned":return"Unassigned Tickets";case"urgent":return"Urgent Tickets";default:return"All Tickets"}return Q&&fa[Q]?`${fa[Q]} Tickets`:"Tickets"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:_()}),t.jsxs("p",{className:"text-gray-600",children:[d.length," ticket",d.length!==1?"s":"",N>0&&`  ${N} unread`,p>0&&t.jsxs("span",{className:"text-red-600 ml-2",children:[" ",p," SLA breached"]})]})]}),t.jsxs(U,{onClick:()=>v(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"New Ticket"]})]}),t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("open"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Open"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x})]}),t.jsx(Js,{className:"w-8 h-8 text-blue-200"})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("pending"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:u})]}),t.jsx(vt,{className:"w-8 h-8 text-yellow-200"})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("needs-response"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Needs Response"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:w})]}),t.jsx(se,{className:"w-8 h-8 text-red-200"})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("sla-breached"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"SLA Breached"}),t.jsx("p",{className:`text-2xl font-bold ${p>0?"text-red-600":"text-gray-400"}`,children:p})]}),t.jsx(te,{className:`w-8 h-8 ${p>0?"text-red-200":"text-gray-200"}`})]})})}),t.jsx("div",{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("resolved"),children:t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.tickets.filter(D=>D.status==="resolved"||D.status==="closed").length})]}),t.jsx(He,{className:"w-8 h-8 text-green-200"})]})})})]}),t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow",children:[t.jsx(Un,{className:"w-5 h-5 text-gray-400"}),t.jsx(we,{options:C,value:i,onChange:D=>o(D),className:"w-56"}),t.jsx(we,{options:k,value:c,onChange:D=>m(D),className:"w-44"}),t.jsx(we,{options:I,value:j,onChange:D=>y(D),className:"w-44"}),(i!=="all"||c!=="all"||j!=="all")&&t.jsx("button",{onClick:()=>{o("all"),m("all"),y("all")},className:"text-sm text-blue-600 hover:underline",children:"Clear filters"})]}),t.jsx(T,{className:"p-0 overflow-hidden",children:d.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(le,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"font-medium",children:"No tickets"}),t.jsx("p",{className:"text-sm mt-1",children:i!=="all"?"Try changing your filter":"No tickets to display"})]}):t.jsx("ul",{className:"divide-y divide-gray-200",children:d.map(D=>{const Q=D.projectId?s(D.projectId):null,F=D.customerId?n(D.customerId):Q?n(Q.customerId):null,K=xj(D);return t.jsx("li",{onClick:()=>z(D.id),className:`
                    p-4 cursor-pointer transition-colors
                    ${D.isRead?"hover:bg-gray-50":"bg-blue-50/50 hover:bg-blue-50"}
                  `,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`
                      p-2 rounded-lg flex-shrink-0
                      ${D.type==="email"?"bg-blue-100 text-blue-600":D.type==="phone"?"bg-green-100 text-green-600":D.type==="internal"?"bg-purple-100 text-purple-600":"bg-orange-100 text-orange-600"}
                    `,children:dj[D.type]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!D.isRead&&t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0"}),t.jsx("span",{className:`font-medium truncate ${D.isRead?"text-gray-700":"text-gray-900"}`,children:D.subject})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${K.color}`,children:K.text}),t.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full ${uj[D.status]}`,children:[pj[D.status],D.status]}),D.priority!=="normal"&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${mj[D.priority]}`,children:D.priority})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[F&&t.jsx("span",{className:"truncate",children:F.companyName}),D.from&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{className:"truncate",children:D.from})]}),t.jsx("span",{children:""}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Rc,{className:"w-3 h-3"}),fa[D.category]]})]}),t.jsxs("p",{className:"mt-1 text-sm text-gray-500 line-clamp-1",children:[D.description.slice(0,120),"..."]}),t.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[t.jsxs("span",{className:"text-gray-400 inline-flex items-center gap-1",children:[t.jsx(se,{className:"w-3 h-3"}),hj(D.updatedAt)]}),D.assignee&&t.jsxs("span",{className:"text-gray-400 inline-flex items-center gap-1",children:[t.jsx(Le,{className:"w-3 h-3"}),D.assignee]}),D.requiresResponse&&D.status==="open"&&t.jsx("span",{className:"text-red-600 font-medium",children:"Response needed"}),D.replies&&D.replies.length>0&&t.jsxs("span",{className:"text-gray-400",children:[D.replies.length," repl",D.replies.length!==1?"ies":"y"]}),D.notes&&D.notes.length>0&&t.jsxs("span",{className:"text-gray-400",children:[D.notes.length," note",D.notes.length!==1?"s":""]})]})]})]})},D.id)})})}),t.jsx(cj,{isOpen:h,onClose:()=>v(!1),onTicketCreated:D=>{a(D)}})]})}const Eu=6,ko={"early-7":"7 AM","morning-9":"9 AM","morning-11":"11 AM","all-day":"All Day","after-hours":"6 PM"},Ru={"early-7":"bg-purple-100 border-purple-300 text-purple-800","morning-9":"bg-blue-100 border-blue-300 text-blue-800","morning-11":"bg-green-100 border-green-300 text-green-800","all-day":"bg-orange-100 border-orange-300 text-orange-800","after-hours":"bg-gray-100 border-gray-300 text-gray-800"};function fj({project:e,onClose:s,onSave:n}){const{getCustomer:r,getBuilding:a}=Se(),[l,i]=b.useState((e==null?void 0:e.scheduledDate)||new Date().toISOString().split("T")[0]),[o,c]=b.useState((e==null?void 0:e.scheduledSlot)||"morning-9");if(!e)return null;const m=r(e.customerId),j=a(e.buildingId),y=()=>{n(e.id,l,o),s()};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Schedule Installation"}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:t.jsx(mt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"font-medium text-gray-900",children:m==null?void 0:m.companyName}),t.jsx("p",{className:"text-sm text-gray-500",children:j==null?void 0:j.address}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[e.product," - ",e.serviceBandwidth]})]}),j&&j.installNotes.length>0&&t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(vt,{className:"w-4 h-4 text-amber-600 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Building Notes"}),t.jsx("ul",{className:"text-xs text-amber-700 mt-1 space-y-1",children:j.installNotes.map((h,v)=>t.jsx("li",{children:h},v))})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:l,onChange:h=>i(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Slot"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(ko).map(([h,v])=>t.jsx("button",{onClick:()=>c(h),className:`
                    px-3 py-2 rounded-lg border text-sm font-medium transition-colors
                    ${o===h?"border-pilot-secondary bg-pilot-secondary text-white":"border-gray-200 hover:border-gray-300"}
                  `,children:v},h))})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-gray-200",children:[t.jsx(U,{variant:"secondary",onClick:s,children:"Cancel"}),t.jsxs(U,{onClick:y,children:[t.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Save Schedule"]})]})]})})}function Mu({content:e,children:s}){const[n,r]=b.useState(!1),a=b.useRef(),l=()=>{a.current=window.setTimeout(()=>r(!0),300)},i=()=>{a.current&&clearTimeout(a.current),r(!1)};return t.jsxs("div",{className:"relative inline-block",onMouseEnter:l,onMouseLeave:i,children:[s,n&&t.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 z-50",children:[t.jsx("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 max-w-xs whitespace-normal shadow-lg",children:e}),t.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})}function yj(){const e=Ve(),{state:s,getCustomer:n,getBuilding:r,dispatch:a}=Se(),[l,i]=b.useState(new Date),[o,c]=b.useState("week"),[m,j]=b.useState("all"),[y,h]=b.useState(""),[v,g]=b.useState(!0),[p,f]=b.useState(null),[d,x]=b.useState(null),[u,w]=b.useState(null),N=re.filter(M=>M.role==="cxa"||M.role==="senior_cxa"),C=M=>{const H=new Date(M),Y=H.getDay();return H.setDate(H.getDate()-Y),H.setHours(0,0,0,0),H},k=M=>{const H=M.getFullYear(),Y=M.getMonth(),oe=new Date(H,Y,1),Ne=new Date(H,Y+1,0).getDate(),rt=oe.getDay(),Yt=[];for(let At=0;At<rt;At++)Yt.push(null);for(let At=1;At<=Ne;At++)Yt.push(new Date(H,Y,At));return Yt},I=C(l),z=Array.from({length:7},(M,H)=>{const Y=new Date(I);return Y.setDate(Y.getDate()+H),Y}),_=k(l),D=M=>s.projects.filter(H=>{if(!H.scheduledDate||m==="my"&&H.cxAssignee!==G.name||m==="crew"&&y&&H.cxAssignee!==y)return!1;const Y=new Date(H.scheduledDate);return Y.getDate()===M.getDate()&&Y.getMonth()===M.getMonth()&&Y.getFullYear()===M.getFullYear()}),Q=s.projects.filter(M=>!M.scheduledDate&&M.status!=="completed"),F=s.projects.filter(M=>M.scheduledDate&&M.cxAssignee===G.name).length,K=()=>{const M=new Date(l);o==="week"?M.setDate(M.getDate()-7):M.setMonth(M.getMonth()-1),i(M)},pe=()=>{const M=new Date(l);o==="week"?M.setDate(M.getDate()+7):M.setMonth(M.getMonth()+1),i(M)},De=()=>{i(new Date)},J=M=>{const H=new Date;return M.getDate()===H.getDate()&&M.getMonth()===H.getMonth()&&M.getFullYear()===H.getFullYear()},P=()=>{const M=new Date(I);M.setDate(M.getDate()+6);const H=I.toLocaleDateString("en-US",{month:"short"}),Y=M.toLocaleDateString("en-US",{month:"short"}),oe=I.getDate(),xe=M.getDate(),Ne=I.getFullYear();return H===Y?`${H} ${oe} - ${xe}, ${Ne}`:`${H} ${oe} - ${Y} ${xe}, ${Ne}`},B=()=>l.toLocaleDateString("en-US",{month:"long",year:"numeric"}),O=(M,H,Y)=>{const oe=s.projects.find(xe=>xe.id===M);oe&&a({type:"UPDATE_PROJECT",payload:{...oe,scheduledDate:H,scheduledSlot:Y,status:"scheduled",updatedAt:new Date().toISOString()}})},X=(M,H)=>{x(H),M.dataTransfer.effectAllowed="move";const Y=M.currentTarget;M.dataTransfer.setDragImage(Y,10,10)},ne=()=>{x(null),w(null)},tt=(M,H)=>{M.preventDefault(),M.dataTransfer.dropEffect="move",w(H)},st=()=>{w(null)},Kt=(M,H)=>{if(M.preventDefault(),d){const Y=H.toISOString().split("T")[0];f({...d,scheduledDate:Y})}x(null),w(null)},nt=M=>{const H=M/Eu;return H>=1?"text-red-600 bg-red-50":H>=.8?"text-amber-600 bg-amber-50":"text-green-600 bg-green-50"},It=(M,H=!1)=>{const Y=n(M.customerId),oe=r(M.buildingId),xe=oe&&oe.installNotes.length>0,Ne=t.jsxs("div",{onClick:()=>e(`/projects/${M.id}`),className:`
          p-2 rounded border cursor-pointer transition-all hover:shadow-md w-full overflow-hidden
          ${M.scheduledSlot?Ru[M.scheduledSlot]:"bg-gray-50 border-gray-200"}
        `,children:[!H&&t.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium",children:[t.jsx(se,{className:"w-3 h-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:M.scheduledSlot?ko[M.scheduledSlot]:"TBD"})]}),t.jsx("p",{className:`font-semibold truncate ${H?"text-xs":"text-sm mt-1"}`,children:Y==null?void 0:Y.companyName}),!H&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-xs truncate opacity-75",children:oe==null?void 0:oe.address}),M.cxAssignee&&t.jsxs("p",{className:"text-xs mt-1 truncate",children:[t.jsx(Le,{className:"w-3 h-3 inline mr-1 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:M.cxAssignee})]})]}),xe&&t.jsx("div",{className:H?"inline ml-1":"mt-1",children:t.jsx(vt,{className:"w-3 h-3 text-amber-600 inline flex-shrink-0"})})]});return xe?t.jsx(Mu,{content:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium mb-1",children:"Install Notes:"}),t.jsx("ul",{className:"space-y-1",children:oe.installNotes.map((rt,Yt)=>t.jsxs("li",{className:"flex items-start gap-1",children:[t.jsx("span",{children:"-"}),t.jsx("span",{children:rt})]},Yt))})]}),children:Ne},M.id):t.jsx("div",{children:Ne},M.id)};return t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{className:"flex-1 min-w-0 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Installation Calendar"}),t.jsx("p",{className:"text-gray-600",children:o==="week"?P():B()})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center bg-gray-100 p-1 rounded-lg",children:[t.jsxs("button",{onClick:()=>c("week"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium transition-colors ${o==="week"?"bg-white text-gray-900 shadow":"text-gray-600"}`,children:[t.jsx(me,{className:"w-4 h-4"}),"Week"]}),t.jsxs("button",{onClick:()=>c("month"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm font-medium transition-colors ${o==="month"?"bg-white text-gray-900 shadow":"text-gray-600"}`,children:[t.jsx(ny,{className:"w-4 h-4"}),"Month"]})]}),t.jsx("div",{className:"h-6 w-px bg-gray-300"}),t.jsx(U,{variant:"secondary",size:"sm",onClick:K,children:t.jsx(Qf,{className:"w-4 h-4"})}),t.jsx(U,{variant:"secondary",size:"sm",onClick:De,children:"Today"}),t.jsx(U,{variant:"secondary",size:"sm",onClick:pe,children:t.jsx(Lt,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg",children:[t.jsxs("button",{onClick:()=>j("all"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="all"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Je,{className:"w-4 h-4"}),"All"]}),t.jsxs("button",{onClick:()=>j("my"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="my"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Le,{className:"w-4 h-4"}),"My Installs",F>0&&t.jsx("span",{className:"bg-pilot-primary text-pilot-secondary text-xs px-1.5 py-0.5 rounded-full",children:F})]}),t.jsxs("button",{onClick:()=>j("crew"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="crew"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Un,{className:"w-4 h-4"}),"By Crew"]})]}),m==="crew"&&t.jsxs("select",{value:y,onChange:M=>h(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"All Crew"}),N.map(M=>t.jsx("option",{value:M.name,children:M.name},M.id))]}),t.jsxs("button",{onClick:()=>g(!v),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${v?"bg-pilot-primary text-pilot-secondary":"bg-gray-100 text-gray-600"}`,children:[t.jsx(Ih,{className:"w-4 h-4"}),"Unscheduled (",Q.length,")"]})]}),o==="week"&&t.jsx("div",{className:"grid grid-cols-7 gap-2",children:z.map(M=>{const H=D(M),Y=J(M),oe=nt(H.length),xe=M.toISOString().split("T")[0],Ne=u===xe;return t.jsxs("div",{className:"min-h-[250px] min-w-0 overflow-hidden",onDragOver:rt=>tt(rt,xe),onDragLeave:st,onDrop:rt=>Kt(rt,M),children:[t.jsxs("div",{className:`
                    text-center p-2 rounded-t-lg
                    ${Y?"bg-pilot-primary":"bg-gray-100"}
                  `,children:[t.jsx("p",{className:`text-xs uppercase tracking-wide ${Y?"text-pilot-secondary":"text-gray-500"}`,children:M.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("p",{className:`text-xl font-bold ${Y?"text-pilot-secondary":"text-gray-900"}`,children:M.getDate()}),t.jsxs("div",{className:`text-xs px-2 py-0.5 rounded mt-1 ${oe}`,children:[H.length,"/",Eu]})]}),t.jsx(T,{className:`rounded-t-none p-2 min-h-[200px] overflow-hidden transition-colors ${Ne?"bg-pilot-primary/10 border-pilot-primary ring-2 ring-pilot-primary":""}`,children:H.length===0?t.jsx("div",{className:`text-center py-4 text-sm ${Ne?"text-pilot-secondary":"text-gray-400"}`,children:Ne?"Drop to schedule":"No installs"}):t.jsxs("ul",{className:"space-y-2 overflow-hidden",children:[H.map(rt=>t.jsx("li",{className:"min-w-0",children:It(rt)},rt.id)),Ne&&t.jsx("li",{className:"p-2 border-2 border-dashed border-pilot-primary rounded text-center text-sm text-pilot-secondary",children:"Drop to schedule"})]})})]},M.toISOString())})}),o==="month"&&t.jsxs("div",{children:[t.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(M=>t.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:M},M))}),t.jsx("div",{className:"grid grid-cols-7 gap-1",children:_.map((M,H)=>{if(!M)return t.jsx("div",{className:"min-h-[100px] bg-gray-50 rounded"},`empty-${H}`);const Y=D(M),oe=J(M),xe=nt(Y.length);return t.jsxs("div",{className:`
                      min-h-[100px] p-1 border rounded
                      ${oe?"border-pilot-primary bg-pilot-primary/5":"border-gray-200"}
                    `,children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:`text-sm font-medium ${oe?"text-pilot-secondary":"text-gray-700"}`,children:M.getDate()}),Y.length>0&&t.jsx("span",{className:`text-xs px-1.5 rounded ${xe}`,children:Y.length})]}),t.jsxs("div",{className:"space-y-1",children:[Y.slice(0,3).map(Ne=>It(Ne,!0)),Y.length>3&&t.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",Y.length-3," more"]})]})]},M.toISOString())})})]}),t.jsxs(T,{children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Time Slots"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:Object.entries(ko).map(([M,H])=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-4 h-4 rounded border ${Ru[M]}`}),t.jsx("span",{className:"text-sm text-gray-600",children:H})]},M))})]})]}),v&&t.jsx("div",{className:"w-80 flex-shrink-0",children:t.jsxs(T,{className:"sticky top-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Unscheduled"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Drag to calendar to schedule"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:Q.length})]}),Q.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(me,{className:"w-8 h-8 mx-auto mb-2"}),t.jsx("p",{className:"text-sm",children:"All projects are scheduled"})]}):t.jsx("ul",{className:"space-y-2 max-h-[calc(100vh-200px)] overflow-y-auto",children:Q.map(M=>{const H=n(M.customerId),Y=r(M.buildingId),oe=(d==null?void 0:d.id)===M.id;return t.jsx("li",{draggable:!0,onDragStart:xe=>X(xe,M),onDragEnd:ne,className:`p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-gray-300 transition-all cursor-grab active:cursor-grabbing ${oe?"opacity-50 ring-2 ring-pilot-primary":""}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:H==null?void 0:H.companyName}),t.jsxs("p",{className:"text-xs text-gray-500 truncate flex items-center gap-1",children:[t.jsx(Pc,{className:"w-3 h-3"}),Y==null?void 0:Y.address]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["FOC: ",new Date(M.focDate).toLocaleDateString()]}),Y&&Y.installNotes.length>0&&t.jsx(Mu,{content:t.jsx("ul",{className:"space-y-1",children:Y.installNotes.map((xe,Ne)=>t.jsxs("li",{children:["- ",xe]},Ne))}),children:t.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 mt-1",children:[t.jsx(Nh,{className:"w-3 h-3"}),Y.installNotes.length," note",Y.installNotes.length>1?"s":""]})})]}),t.jsx("button",{onClick:xe=>{xe.stopPropagation(),f(M)},className:"px-2 py-1 bg-pilot-secondary text-white text-xs rounded hover:bg-pilot-secondary/90 transition-colors",children:"Schedule"})]})},M.id)})})]})}),p&&t.jsx(fj,{project:p,onClose:()=>f(null),onSave:O})]})}const qh={"follow-up":Ec,deadline:se,"check-in":Sh,escalation:te,custom:Ke},vj={urgent:{text:"text-red-700",bg:"bg-red-50",border:"border-red-200"},high:{text:"text-orange-700",bg:"bg-orange-50",border:"border-orange-200"},normal:{text:"text-blue-700",bg:"bg-blue-50",border:"border-blue-200"},low:{text:"text-gray-600",bg:"bg-gray-50",border:"border-gray-200"}};function jj({reminders:e,customers:s,projects:n,compact:r=!1,title:a="Smart Reminders",onComplete:l,onDismiss:i,onSnooze:o,onCreate:c}){const[m,j]=b.useState(null),[y,h]=b.useState("all"),[v,g]=b.useState("all"),p=new Map(s.map(k=>[k.id,k])),f=new Map(n.map(k=>[k.id,k])),d=new Date,x=e.filter(k=>k.status==="pending").filter(k=>y==="all"||k.priority===y).filter(k=>v==="all"||k.type===v).sort((k,I)=>{const z={urgent:0,high:1,normal:2,low:3};return z[k.priority]!==z[I.priority]?z[k.priority]-z[I.priority]:new Date(k.dueAt).getTime()-new Date(I.dueAt).getTime()}),u=x.filter(k=>new Date(k.dueAt)<d),w=x.filter(k=>{const I=new Date(k.dueAt);return I>=d&&I.toDateString()===d.toDateString()}),N=x.filter(k=>{const I=new Date(k.dueAt);return I>d&&I.toDateString()!==d.toDateString()}),C=k=>{j(I=>I===k?null:k)};return r?t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ke,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:a}),u.length>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:[u.length," overdue"]})]}),c&&t.jsx(U,{size:"sm",variant:"secondary",onClick:c,children:t.jsx(Qe,{className:"w-4 h-4"})})]}),x.length===0?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(Ke,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"No reminders"})]}):t.jsxs("div",{className:"space-y-2",children:[x.slice(0,5).map(k=>t.jsx(Nj,{reminder:k,customer:k.customerId?p.get(k.customerId):void 0,project:k.projectId?f.get(k.projectId):void 0,onComplete:l,onDismiss:i},k.id)),x.length>5&&t.jsxs("p",{className:"text-sm text-blue-600 text-center pt-2",children:["+",x.length-5," more reminders"]})]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ke,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:a}),t.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-sm font-medium rounded-full",children:x.length}),u.length>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:[u.length," overdue"]})]}),t.jsx("div",{className:"flex items-center gap-2",children:c&&t.jsxs(U,{onClick:c,children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"New Reminder"]})})]}),t.jsx(T,{children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Un,{className:"w-4 h-4 text-gray-400"}),t.jsxs("select",{value:y,onChange:k=>h(k.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"all",children:"All Priorities"}),t.jsx("option",{value:"urgent",children:"Urgent"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"normal",children:"Normal"}),t.jsx("option",{value:"low",children:"Low"})]}),t.jsxs("select",{value:v,onChange:k=>g(k.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"follow-up",children:"Follow-up"}),t.jsx("option",{value:"deadline",children:"Deadline"}),t.jsx("option",{value:"check-in",children:"Check-in"}),t.jsx("option",{value:"escalation",children:"Escalation"}),t.jsx("option",{value:"custom",children:"Custom"})]})]})}),u.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),t.jsx("h4",{className:"font-medium text-red-700",children:"Overdue"}),t.jsxs("span",{className:"text-sm text-red-600",children:["(",u.length,")"]})]}),t.jsx("div",{className:"space-y-2",children:u.map(k=>t.jsx(hi,{reminder:k,customer:k.customerId?p.get(k.customerId):void 0,project:k.projectId?f.get(k.projectId):void 0,isExpanded:m===k.id,onToggle:()=>C(k.id),onComplete:l,onDismiss:i,onSnooze:o,isOverdue:!0},k.id))})]}),w.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(me,{className:"w-5 h-5 text-blue-500"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Today"}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",w.length,")"]})]}),t.jsx("div",{className:"space-y-2",children:w.map(k=>t.jsx(hi,{reminder:k,customer:k.customerId?p.get(k.customerId):void 0,project:k.projectId?f.get(k.projectId):void 0,isExpanded:m===k.id,onToggle:()=>C(k.id),onComplete:l,onDismiss:i,onSnooze:o},k.id))})]}),N.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(se,{className:"w-5 h-5 text-gray-500"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Upcoming"}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",N.length,")"]})]}),t.jsx("div",{className:"space-y-2",children:N.map(k=>t.jsx(hi,{reminder:k,customer:k.customerId?p.get(k.customerId):void 0,project:k.projectId?f.get(k.projectId):void 0,isExpanded:m===k.id,onToggle:()=>C(k.id),onComplete:l,onDismiss:i,onSnooze:o},k.id))})]}),x.length===0&&t.jsxs(T,{className:"text-center py-12",children:[t.jsx(Ke,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No reminders to show"}),c&&t.jsx(U,{variant:"link",onClick:c,className:"mt-2",children:"Create your first reminder"})]})]})}function hi({reminder:e,customer:s,project:n,isExpanded:r,onToggle:a,onComplete:l,onDismiss:i,onSnooze:o,isOverdue:c}){const m=mh[e.type],j=vj[e.priority],y=qh[e.type],h=new Date(e.dueAt),v=new Date,g=Math.floor((h.getTime()-v.getTime())/(1e3*60*60)),p=()=>{if(c){const f=Math.abs(g);return f<24?`${f}h overdue`:`${Math.floor(f/24)}d overdue`}return g<1?"Due now":g<24?`Due in ${g}h`:h.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return t.jsxs("div",{className:`border rounded-lg overflow-hidden ${j.border} ${c?"bg-red-50":""}`,children:[t.jsxs("button",{onClick:a,className:`w-full flex items-center justify-between p-3 hover:bg-opacity-50 transition-colors ${j.bg}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${m.bgColor}`,children:t.jsx(y,{className:`w-4 h-4 ${m.color}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium text-gray-900",children:e.title}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s&&t.jsx("span",{children:s.companyName}),s&&n&&t.jsx("span",{children:""}),n&&t.jsx("span",{children:n.product}),e.isAutoGenerated&&t.jsxs("span",{className:"flex items-center gap-0.5 text-purple-600",children:[t.jsx(As,{className:"w-3 h-3"}),"Auto"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:`text-sm font-medium ${c?"text-red-600":"text-gray-600"}`,children:p()}),t.jsx("div",{className:"flex items-center gap-1 justify-end",children:e.channels.map(f=>{const d=f==="email"?le:f==="sms"?vy:f==="slack"?Xe:Ke;return t.jsx(d,{className:"w-3 h-3 text-gray-400"},f)})})]}),r?t.jsx(ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(ke,{className:"w-4 h-4 text-gray-400"})]})]}),r&&t.jsxs("div",{className:"border-t border-gray-200 p-3 bg-white",children:[e.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),e.triggerCondition&&t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-purple-600 bg-purple-50 px-2 py-1 rounded",children:[t.jsx(As,{className:"w-3 h-3"}),t.jsxs("span",{children:["Triggered: ",e.triggerCondition]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-2",children:o&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("button",{onClick:()=>o(e.id,1),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:[t.jsx(Mc,{className:"w-3 h-3 inline mr-1"}),"1h"]}),t.jsx("button",{onClick:()=>o(e.id,4),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"4h"}),t.jsx("button",{onClick:()=>o(e.id,24),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"1d"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[i&&t.jsxs("button",{onClick:()=>i(e.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:[t.jsx(mt,{className:"w-4 h-4"}),"Dismiss"]}),l&&t.jsxs("button",{onClick:()=>l(e.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm text-white bg-green-600 hover:bg-green-700 rounded-lg",children:[t.jsx(Ct,{className:"w-4 h-4"}),"Complete"]})]})]})]})]})}function Nj({reminder:e,customer:s,onComplete:n,onDismiss:r}){const a=mh[e.type],l=qh[e.type],i=new Date,o=new Date(e.dueAt),c=o<i;return t.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${c?"bg-red-50":"bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{className:`w-4 h-4 ${a.color}`}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate max-w-[200px]",children:e.title}),s&&t.jsx("p",{className:"text-xs text-gray-500",children:s.companyName})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-xs ${c?"text-red-600":"text-gray-500"}`,children:o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),n&&t.jsx("button",{onClick:()=>n(e.id),className:"p-1 text-green-600 hover:bg-green-100 rounded",children:t.jsx(Ct,{className:"w-4 h-4"})}),r&&t.jsx("button",{onClick:()=>r(e.id),className:"p-1 text-gray-400 hover:bg-gray-200 rounded",children:t.jsx(mt,{className:"w-4 h-4"})})]})]})}function wj(){const e=[],s=new Date;return[{type:"follow-up",title:"Follow up with Acme Corp on scheduling",description:"Customer requested callback about install date options",hoursFromNow:2,priority:"high",channels:["email","in-app"],projectId:"p1",customerId:"c1",assigneeId:re[0].id,isAutoGenerated:!1},{type:"deadline",title:"FOC deadline approaching - TechStartup",description:"Project is 3 days from FOC date",hoursFromNow:4,priority:"urgent",channels:["email","sms","in-app"],projectId:"p2",customerId:"c2",assigneeId:re[1].id,isAutoGenerated:!0,triggerCondition:"FOC date within 3 days"},{type:"check-in",title:"Weekly check-in - Global Retail",description:"VIP customer weekly status call",hoursFromNow:6,priority:"normal",channels:["in-app"],customerId:"c3",assigneeId:re[0].id,isAutoGenerated:!1},{type:"follow-up",title:"Send install confirmation email",description:"Confirm install details for scheduled date",hoursFromNow:24,priority:"normal",channels:["email"],projectId:"p3",customerId:"c3",assigneeId:re[2].id,isAutoGenerated:!0,triggerCondition:"Install scheduled for T+2 days"},{type:"escalation",title:"Escalated project needs resolution",description:"Project has been escalated for 5+ days",hoursFromNow:28,priority:"high",channels:["email","slack","in-app"],projectId:"p4",customerId:"c4",assigneeId:re[0].id,isAutoGenerated:!0,triggerCondition:"Escalated project > 5 days"},{type:"check-in",title:"Post-install satisfaction call",description:"Call customer 7 days after install to check satisfaction",hoursFromNow:72,priority:"normal",channels:["in-app"],projectId:"p5",customerId:"c5",assigneeId:re[1].id,isAutoGenerated:!0,triggerCondition:"Install completed T+7 days"},{type:"custom",title:"Submit permit application",description:"NYC DOB permit required before install",hoursFromNow:96,priority:"high",channels:["email","in-app"],projectId:"p6",assigneeId:re[2].id,isAutoGenerated:!1},{type:"follow-up",title:"Contact customer about blocker resolution",description:"Waiting on customer equipment for 10 days",hoursFromNow:-24,priority:"urgent",channels:["email","sms","in-app"],projectId:"p7",customerId:"c7",assigneeId:re[0].id,isAutoGenerated:!0,triggerCondition:"Blocker unresolved > 7 days"},{type:"deadline",title:"SOW approval needed",description:"SOW sent 14 days ago, awaiting approval",hoursFromNow:-48,priority:"high",channels:["email","in-app"],projectId:"p8",customerId:"c8",assigneeId:re[1].id,isAutoGenerated:!0,triggerCondition:"SOW pending > 14 days"}].forEach((r,a)=>{const l=new Date(s);l.setHours(l.getHours()+r.hoursFromNow);const i=new Date(s);i.setDate(i.getDate()-2),e.push({id:`reminder-${a+1}`,type:r.type,title:r.title,description:r.description,dueAt:l.toISOString(),status:(r.hoursFromNow<0,"pending"),priority:r.priority,channels:r.channels,projectId:r.projectId,customerId:r.customerId,assigneeId:r.assigneeId,isAutoGenerated:r.isAutoGenerated,triggerCondition:r.triggerCondition,createdAt:i.toISOString(),createdBy:r.isAutoGenerated?"system":re[0].id,isRecurring:!1})}),e}const bj=wj();function kj(e){const s=[],n=new Date;return e.forEach(r=>{if(r.status==="completed")return;const a=new Date(r.focDate),l=Math.floor((a.getTime()-n.getTime())/(1e3*60*60*24));if(l<=3&&l>0&&s.push({id:`auto-foc-${r.id}`,type:"deadline",title:`FOC in ${l} day${l!==1?"s":""}`,description:`Project FOC date is ${a.toLocaleDateString()}`,dueAt:n.toISOString(),status:"pending",priority:"urgent",channels:["email","in-app"],projectId:r.id,customerId:r.customerId,assigneeId:r.cxAssignee||re[0].id,isAutoGenerated:!0,triggerCondition:`FOC date within ${l} days`,createdAt:n.toISOString(),createdBy:"system",isRecurring:!1}),l<0&&s.push({id:`auto-overdue-${r.id}`,type:"escalation",title:`Project ${Math.abs(l)} days past FOC`,description:`FOC was ${a.toLocaleDateString()} - needs attention`,dueAt:n.toISOString(),status:"pending",priority:"urgent",channels:["email","sms","in-app"],projectId:r.id,customerId:r.customerId,assigneeId:r.cxAssignee||re[0].id,isAutoGenerated:!0,triggerCondition:"FOC date passed",createdAt:n.toISOString(),createdBy:"system",isRecurring:!1}),r.isEscalated&&r.escalatedAt){const c=Math.floor((n.getTime()-new Date(r.escalatedAt).getTime())/864e5);c>=3&&s.push({id:`auto-escalation-${r.id}`,type:"escalation",title:`Escalation unresolved for ${c} days`,description:r.escalationReason||"Escalated project needs attention",dueAt:n.toISOString(),status:"pending",priority:"high",channels:["email","in-app"],projectId:r.id,customerId:r.customerId,assigneeId:r.cxAssignee||re[0].id,isAutoGenerated:!0,triggerCondition:"Escalated > 3 days",createdAt:n.toISOString(),createdBy:"system",isRecurring:!1})}const i=new Date(r.lastCustomerContact),o=Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24));o>=7&&s.push({id:`auto-contact-${r.id}`,type:"check-in",title:`No contact in ${o} days`,description:"Customer may need a check-in call",dueAt:n.toISOString(),status:"pending",priority:o>=14?"high":"normal",channels:["in-app"],projectId:r.id,customerId:r.customerId,assigneeId:r.cxAssignee||re[0].id,isAutoGenerated:!0,triggerCondition:`No contact > ${o} days`,createdAt:n.toISOString(),createdBy:"system",isRecurring:!1})}),s}function Cj(){const e=Ve(),{state:s,getCustomer:n,getBuilding:r}=Se(),a=new Date;a.setHours(0,0,0,0);const l=b.useMemo(()=>s.projects.filter(g=>g.cxAssignee===G.name&&g.status!=="completed"),[s.projects]),i=b.useMemo(()=>{const g=[];return l.forEach(p=>{const f=n(p.customerId);p.tasks.forEach(d=>{if(d.completed||!d.dueDate)return;const x=new Date(d.dueDate);x.setHours(0,0,0,0),x.getTime()===a.getTime()&&g.push({projectId:p.id,projectName:(f==null?void 0:f.companyName)||"Unknown",task:d})})}),g},[l,n]),o=b.useMemo(()=>{const g=[];return l.forEach(p=>{const f=n(p.customerId);p.tasks.forEach(d=>{if(d.completed||!d.dueDate)return;const x=new Date(d.dueDate);if(x.setHours(0,0,0,0),x<a){const u=Math.floor((a.getTime()-x.getTime())/864e5);g.push({projectId:p.id,projectName:(f==null?void 0:f.companyName)||"Unknown",task:d,daysOverdue:u})}})}),g.sort((p,f)=>f.daysOverdue-p.daysOverdue)},[l,n]),c=b.useMemo(()=>l.filter(g=>{if(!g.scheduledDate)return!1;const p=new Date(g.scheduledDate);return p.setHours(0,0,0,0),p.getTime()===a.getTime()}),[l]),m=b.useMemo(()=>s.tickets.filter(g=>{const p=s.projects.find(f=>f.id===g.projectId);return(p==null?void 0:p.cxAssignee)===G.name&&g.requiresResponse&&g.status!=="resolved"&&g.status!=="closed"}).map(g=>{const p=s.projects.find(d=>d.id===g.projectId),f=n(p.customerId);return{ticket:g,project:p,customerName:(f==null?void 0:f.companyName)||"Unknown"}}),[s.tickets,s.projects,n]),j=b.useMemo(()=>l.filter(g=>g.blockers.some(p=>!p.resolvedAt)),[l]),y=b.useMemo(()=>l.filter(g=>{const p=new Date(g.focDate);p.setHours(0,0,0,0);const f=Math.ceil((p.getTime()-a.getTime())/(1e3*60*60*24));return f>=0&&f<=3}).map(g=>{const p=new Date(g.focDate),f=Math.ceil((p.getTime()-a.getTime())/(1e3*60*60*24));return{project:g,daysUntil:f}}),[l]),h={"early-7":"7:00 AM","morning-9":"9:00 AM","morning-11":"11:00 AM","all-day":"9 AM - 5 PM","after-hours":"6:00 PM"},v=()=>{const g=new Date().getHours();return g<12?"Good morning":g<17?"Good afternoon":"Good evening"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(kh,{className:"w-8 h-8 text-yellow-500"}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[v(),", ",G.name.split(" ")[0]]}),t.jsx("p",{className:"text-gray-600",children:a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]})]}),t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsxs(T,{className:"p-4 text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.length}),t.jsx("p",{className:"text-sm text-gray-500",children:"Active Projects"})]}),t.jsxs(T,{className:"p-4 text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i.length}),t.jsx("p",{className:"text-sm text-gray-500",children:"Tasks Due Today"})]}),t.jsxs(T,{className:"p-4 text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-red-600",children:o.length}),t.jsx("p",{className:"text-sm text-gray-500",children:"Overdue Tasks"})]}),t.jsxs(T,{className:"p-4 text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-green-600",children:c.length}),t.jsx("p",{className:"text-sm text-gray-500",children:"Installs Today"})]}),t.jsxs(T,{className:"p-4 text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:m.length}),t.jsx("p",{className:"text-sm text-gray-500",children:"Need Response"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[o.length>0&&t.jsxs(T,{className:"border-l-4 border-red-500",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Overdue Tasks"})]}),t.jsx("ul",{className:"space-y-2",children:o.slice(0,5).map(({projectId:g,projectName:p,task:f,daysOverdue:d})=>t.jsxs("li",{onClick:()=>e(`/projects/${g}?tab=tasks`),className:"p-3 bg-red-50 rounded-lg cursor-pointer hover:bg-red-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-gray-900",children:f.title}),t.jsxs("span",{className:"text-xs text-red-600 font-medium",children:[d,"d overdue"]})]}),t.jsx("p",{className:"text-sm text-gray-500",children:p})]},f.id))})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Mn,{className:"w-5 h-5 text-blue-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tasks Due Today"})]}),t.jsxs(U,{variant:"link",size:"sm",onClick:()=>e("/tasks"),children:["View all ",t.jsx(ll,{className:"w-4 h-4 ml-1"})]})]}),i.length===0?t.jsx("p",{className:"text-gray-500 text-center py-6",children:"No tasks due today"}):t.jsx("ul",{className:"space-y-2",children:i.map(({projectId:g,projectName:p,task:f})=>t.jsxs("li",{onClick:()=>e(`/projects/${g}?tab=tasks`),className:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[t.jsx("span",{className:"font-medium text-gray-900",children:f.title}),t.jsx("p",{className:"text-sm text-gray-500",children:p})]},f.id))})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(le,{className:"w-5 h-5 text-yellow-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Needs Response"})]}),m.length===0?t.jsx("p",{className:"text-gray-500 text-center py-6",children:"All caught up!"}):t.jsx("ul",{className:"space-y-2",children:m.slice(0,5).map(({ticket:g,project:p,customerName:f})=>t.jsxs("li",{onClick:()=>e(`/projects/${p.id}?tab=tickets`),className:"p-3 bg-yellow-50 rounded-lg cursor-pointer hover:bg-yellow-100 transition-colors",children:[t.jsx("span",{className:"font-medium text-gray-900",children:g.subject}),t.jsx("p",{className:"text-sm text-gray-500",children:f})]},g.id))})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(T,{className:"border-l-4 border-green-500",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(me,{className:"w-5 h-5 text-green-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Installs Today"})]}),c.length===0?t.jsx("p",{className:"text-gray-500 text-center py-6",children:"No installs scheduled today"}):t.jsx("ul",{className:"space-y-3",children:c.map(g=>{const p=n(g.customerId),f=r(g.buildingId);return t.jsxs("li",{onClick:()=>e(`/projects/${g.id}`),className:"p-3 bg-green-50 rounded-lg cursor-pointer hover:bg-green-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-gray-900",children:p==null?void 0:p.companyName}),t.jsx(bt,{status:g.status,size:"sm"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f==null?void 0:f.address}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm",children:[t.jsx(se,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:g.scheduledSlot?h[g.scheduledSlot]:"TBD"}),g.assignedCrew&&t.jsxs("span",{className:"text-gray-400",children:[" ",g.assignedCrew]})]})]},g.id)})})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(se,{className:"w-5 h-5 text-orange-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"FOC Approaching"})]}),y.length===0?t.jsx("p",{className:"text-gray-500 text-center py-6",children:"No urgent FOC dates"}):t.jsx("ul",{className:"space-y-2",children:y.map(({project:g,daysUntil:p})=>{const f=n(g.customerId);return t.jsxs("li",{onClick:()=>e(`/projects/${g.id}`),className:`p-3 rounded-lg cursor-pointer transition-colors ${p===0?"bg-red-50 hover:bg-red-100":"bg-orange-50 hover:bg-orange-100"}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-gray-900",children:f==null?void 0:f.companyName}),t.jsx("span",{className:`text-sm font-medium ${p===0?"text-red-600":"text-orange-600"}`,children:p===0?"TODAY":`${p}d`})]}),t.jsx(bt,{status:g.status,size:"sm"})]},g.id)})})]}),j.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(vt,{className:"w-5 h-5 text-red-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Active Blockers"})]}),t.jsx("ul",{className:"space-y-2",children:j.slice(0,5).map(g=>{const p=n(g.customerId),f=g.blockers.find(d=>!d.resolvedAt);return t.jsxs("li",{onClick:()=>e(`/projects/${g.id}`),className:"p-3 bg-red-50 rounded-lg cursor-pointer hover:bg-red-100 transition-colors",children:[t.jsx("span",{className:"font-medium text-gray-900",children:p==null?void 0:p.companyName}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f==null?void 0:f.description})]},g.id)})})]})]})]}),t.jsx(jj,{reminders:[...bj,...kj(s.projects)].filter(g=>g.assigneeId===G.id),customers:s.customers,projects:s.projects,currentUserId:G.id,title:"My Reminders",onComplete:g=>console.log("Complete reminder:",g),onDismiss:g=>console.log("Dismiss reminder:",g),onSnooze:(g,p)=>console.log("Snooze reminder:",g,"for",p,"hours"),onCreate:()=>console.log("Create new reminder")})]})}function Sj(){const e=Ve(),{state:s,getCustomer:n}=Se(),r=b.useMemo(()=>{const c=new Date,m=new Date(c.getFullYear(),c.getMonth(),1);return re.map(j=>{const y=s.projects.filter(u=>u.cxAssignee===j.name),h=y.filter(u=>u.status!=="completed"),v=y.filter(u=>u.status!=="completed"?!1:new Date(u.updatedAt)>=m),g=h.filter(u=>new Date(u.focDate)<c),p=h.filter(u=>{if(u.status==="scheduled"||u.status==="confirmed"||u.status==="installing")return!1;const N=(new Date(u.focDate).getTime()-c.getTime())/(1e3*60*60*24);return N<=2&&N>0}),f=h.filter(u=>u.scheduledDate?new Date(u.scheduledDate).toDateString()===c.toDateString():!1),d=y.filter(u=>u.status==="completed"&&u.handoffDate);let x=null;if(d.length>0){const u=d.reduce((w,N)=>{const C=new Date(N.handoffDate),k=new Date(N.updatedAt);return w+(k.getTime()-C.getTime())/864e5},0);x=Math.round(u/d.length)}return{id:j.id,name:j.name,activeProjects:h.length,completedThisMonth:v.length,pastFoc:g.length,atRisk:p.length,installingToday:f.length,avgDaysToComplete:x}})},[s.projects]),a=b.useMemo(()=>({totalActive:r.reduce((c,m)=>c+m.activeProjects,0),totalCompleted:r.reduce((c,m)=>c+m.completedThisMonth,0),totalPastFoc:r.reduce((c,m)=>c+m.pastFoc,0),totalAtRisk:r.reduce((c,m)=>c+m.atRisk,0)}),[r]),l=s.projects.filter(c=>c.isEscalated&&c.status!=="completed"),i=b.useMemo(()=>{const c=new Date;return s.projects.filter(m=>{if(m.status==="completed"||m.status==="scheduled"||m.status==="confirmed"||m.status==="installing")return!1;const y=(new Date(m.focDate).getTime()-c.getTime())/(1e3*60*60*24);return y<=3&&y>0})},[s.projects]),o=[{key:"name",label:"Team Member",width:"2fr",render:c=>t.jsx("span",{className:"font-medium text-gray-900",children:c.name})},{key:"active",label:"Active",width:"1fr",render:c=>t.jsx("span",{className:"text-gray-700",children:c.activeProjects})},{key:"completed",label:"Completed (MTD)",width:"1fr",render:c=>t.jsx("span",{className:"text-green-600 font-medium",children:c.completedThisMonth})},{key:"pastFoc",label:"Past FOC",width:"1fr",render:c=>c.pastFoc>0?t.jsx("span",{className:"text-red-600 font-medium",children:c.pastFoc}):t.jsx("span",{className:"text-gray-400",children:"0"})},{key:"atRisk",label:"At Risk",width:"1fr",render:c=>c.atRisk>0?t.jsx("span",{className:"text-yellow-600 font-medium",children:c.atRisk}):t.jsx("span",{className:"text-gray-400",children:"0"})},{key:"today",label:"Installing Today",width:"1fr",render:c=>c.installingToday>0?t.jsx("span",{className:"text-blue-600 font-medium",children:c.installingToday}):t.jsx("span",{className:"text-gray-400",children:"0"})},{key:"avgDays",label:"Avg Days",width:"1fr",render:c=>c.avgDaysToComplete!==null?t.jsxs("span",{className:"text-gray-700",children:[c.avgDaysToComplete,"d"]}):t.jsx("span",{className:"text-gray-400",children:"-"})}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Team Workload"}),t.jsx("p",{className:"text-gray-600",children:"Monitor team capacity and project distribution"})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(Je,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Active Projects"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalActive})]})]})}),t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(Pe,{className:"w-5 h-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Completed (MTD)"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalCompleted})]})]})}),t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(te,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Past FOC"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.totalPastFoc})]})]})}),t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:t.jsx(se,{className:"w-5 h-5 text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"At Risk"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.totalAtRisk})]})]})})]}),t.jsxs(T,{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Team Overview"}),t.jsx($c,{columns:o,data:r,emptyMessage:"No team members found"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),"Escalated Projects"]}),l.length>0&&t.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:l.length})]}),l.length===0?t.jsx("p",{className:"text-gray-500 text-center py-6",children:"No escalated projects"}):t.jsx("ul",{className:"space-y-3",children:l.slice(0,5).map(c=>{const m=n(c.customerId);return t.jsxs("li",{onClick:()=>e(`/projects/${c.id}`),className:"p-3 bg-red-50 rounded-lg cursor-pointer hover:bg-red-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"font-medium text-gray-900",children:m==null?void 0:m.companyName}),t.jsx(bt,{status:c.status,size:"sm"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.escalationReason}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned: ",c.cxAssignee||"Unassigned"]})]},c.id)})})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(se,{className:"w-5 h-5 text-yellow-500"}),"At Risk (FOC within 3 days)"]}),i.length>0&&t.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full",children:i.length})]}),i.length===0?t.jsx("p",{className:"text-gray-500 text-center py-6",children:"No at-risk projects"}):t.jsx("ul",{className:"space-y-3",children:i.slice(0,5).map(c=>{const m=n(c.customerId),j=Math.ceil((new Date(c.focDate).getTime()-new Date().getTime())/(1e3*60*60*24));return t.jsxs("li",{onClick:()=>e(`/projects/${c.id}`),className:"p-3 bg-yellow-50 rounded-lg cursor-pointer hover:bg-yellow-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"font-medium text-gray-900",children:m==null?void 0:m.companyName}),t.jsxs("span",{className:"text-sm text-yellow-700 font-medium",children:[j,"d to FOC"]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-1",children:[t.jsx(bt,{status:c.status,size:"sm"}),t.jsx("p",{className:"text-xs text-gray-500",children:c.cxAssignee||"Unassigned"})]})]},c.id)})})]})]})]})}function Dj(e,s){const n=new Date,r=new Map(s.map(p=>[p.id,p])),a=e.reduce((p,f)=>p+f.mrc,0),l=e.filter(p=>p.status==="completed"),i=l.reduce((p,f)=>p+f.mrc,0),o=e.filter(p=>p.status!=="completed"),c=o.reduce((p,f)=>p+f.mrc,0),j=e.filter(p=>{if(p.status==="completed")return!1;const f=new Date(p.focDate);return p.isEscalated||f<n}).reduce((p,f)=>p+f.mrc,0),y=a>0?Math.round(i/a*100):0,h=l.filter(p=>p.createdAt&&p.scheduledDate);let v=0;if(h.length>0){const p=h.reduce((f,d)=>{const x=new Date(d.createdAt),u=new Date(d.scheduledDate);return f+Math.floor((u.getTime()-x.getTime())/864e5)},0);v=Math.round(p/h.length)}const g=Tj(o,r,i);return{totalSoldMRC:a,activatedMRC:i,pendingActivationMRC:c,forecast:g,activationRate:y,avgDaysToActivate:v,atRiskMRC:j}}function Tj(e,s,n){const r=new Date,a=[];for(let l=0;l<6;l++){const i=new Date(r.getFullYear(),r.getMonth()+l,1),o=new Date(r.getFullYear(),r.getMonth()+l+1,0),c=i.toLocaleDateString("en-US",{month:"short",year:"numeric"}),m=e.filter(h=>{const v=Ou(h);return v>=i&&v<=o}).map(h=>{const v=s.get(h.customerId);return{projectId:h.id,customerName:(v==null?void 0:v.companyName)||"Unknown",mrc:h.mrc,expectedActivationDate:Ou(h),confidence:Ij(h),status:h.status}}),j=m.reduce((h,v)=>h+v.mrc,0),y=a.length>0?a[a.length-1].cumulativeActivatedMRC:n;a.push({month:c,date:i,projectedActivationMRC:j,cumulativeActivatedMRC:y+j,projects:m})}return a}function Ou(e){if(e.scheduledDate)return new Date(e.scheduledDate);const s=new Date(e.focDate),n=new Date,a={new:14,reviewing:10,scheduled:0,confirmed:0,installing:2,completed:0}[e.status]||7,l=new Date(s);return l.setDate(l.getDate()+a),l<n&&l.setDate(n.getDate()+7),l}function Ij(e){return e.isEscalated||e.blockers.filter(r=>!r.resolvedAt).length>0||new Date(e.focDate)<new Date?"low":e.status==="confirmed"||e.status==="installing"?"high":(e.status==="scheduled","medium")}function Aj(e){switch(e){case"high":return"text-green-600";case"medium":return"text-yellow-600";case"low":return"text-red-600"}}function Pj(e){switch(e){case"high":return"bg-green-100";case"medium":return"bg-yellow-100";case"low":return"bg-red-100"}}function Ej({projects:e,customers:s,showDetails:n=!0}){const[r,a]=b.useState(new Set),l=Dj(e,s),i=c=>{const m=new Set(r);m.has(c)?m.delete(c):m.add(c),a(m)},o=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(Al,{className:"w-5 h-5 text-gray-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Sold"})]}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o(l.totalSoldMRC),t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/mo"})]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(Pe,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Activated"})]}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[o(l.activatedMRC),t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/mo"})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.activationRate,"% activation rate"]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(se,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Pending"})]}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[o(l.pendingActivationMRC),t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/mo"})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg ",l.avgDaysToActivate," days to activate"]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"At Risk"})]}),t.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[o(l.atRiskMRC),t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/mo"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Escalated or delayed"})]})]}),n&&t.jsxs(t.Fragment,{children:[t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:"Activation Progress"}),t.jsxs("span",{className:"text-sm text-gray-500",children:[o(l.activatedMRC)," of ",o(l.totalSoldMRC)]})]}),t.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:t.jsxs("div",{className:"h-full flex",children:[t.jsx("div",{className:"bg-green-500 transition-all duration-500",style:{width:`${l.activationRate}%`},title:`Activated: ${o(l.activatedMRC)}`}),l.atRiskMRC>0&&t.jsx("div",{className:"bg-red-400 transition-all duration-500",style:{width:`${l.atRiskMRC/l.totalSoldMRC*100}%`},title:`At Risk: ${o(l.atRiskMRC)}`})]})}),t.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),"Activated"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-400 rounded"}),"At Risk"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded"}),"Pending"]})]})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Is,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"6-Month Activation Forecast"})]}),t.jsx("div",{className:"space-y-2",children:l.forecast.map(c=>t.jsx(Rj,{month:c,isExpanded:r.has(c.month),onToggle:()=>i(c.month),formatCurrency:o},c.month))}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Cumulative Activated MRC"}),t.jsx("div",{className:"flex items-end gap-2 h-24",children:l.forecast.map(c=>{const m=Math.max(...l.forecast.map(y=>y.cumulativeActivatedMRC)),j=m>0?c.cumulativeActivatedMRC/m*100:0;return t.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[t.jsx("div",{className:"w-full bg-green-500 rounded-t transition-all duration-500",style:{height:`${j}%`},title:`${c.month}: ${o(c.cumulativeActivatedMRC)}`}),t.jsx("span",{className:"text-xs text-gray-500 mt-1",children:c.month.split(" ")[0]})]},c.month)})})]})]})]})]})}function Rj({month:e,isExpanded:s,onToggle:n,formatCurrency:r}){return e.projects.length===0?t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-600",children:e.month}),t.jsx("span",{className:"text-sm text-gray-400",children:"No activations forecasted"})]}):t.jsxs("div",{className:"border border-gray-200 rounded overflow-hidden",children:[t.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(me,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-900",children:e.month}),t.jsxs("span",{className:"text-sm text-gray-500",children:[e.projects.length," project",e.projects.length!==1?"s":""]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"font-medium text-green-600",children:["+",r(e.projectedActivationMRC),"/mo"]}),s?t.jsx(ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(ke,{className:"w-4 h-4 text-gray-400"})]})]}),s&&t.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-xs text-gray-500 uppercase",children:[t.jsx("th",{className:"text-left pb-2",children:"Customer"}),t.jsx("th",{className:"text-left pb-2",children:"Status"}),t.jsx("th",{className:"text-left pb-2",children:"Expected"}),t.jsx("th",{className:"text-left pb-2",children:"Confidence"}),t.jsx("th",{className:"text-right pb-2",children:"MRC"})]})}),t.jsx("tbody",{children:e.projects.map(a=>t.jsxs("tr",{className:"border-t border-gray-200",children:[t.jsx("td",{className:"py-2 text-gray-900",children:a.customerName}),t.jsx("td",{className:"py-2 text-gray-600 capitalize",children:a.status}),t.jsx("td",{className:"py-2 text-gray-600",children:a.expectedActivationDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),t.jsx("td",{className:"py-2",children:t.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-medium rounded ${Pj(a.confidence)} ${Aj(a.confidence)}`,children:a.confidence})}),t.jsx("td",{className:"py-2 text-right font-medium text-gray-900",children:r(a.mrc)})]},a.projectId))})]})})]})}const xi=8,$u=2,ya=6;function Mj(e,s){const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=re.map(d=>{const u=e.filter(K=>K.cxAssignee===d.name).filter(K=>K.status!=="completed"),w=u.filter(K=>!K.scheduledDate).length,N=u.filter(K=>K.scheduledDate),C=new Date(r);C.setDate(r.getDate()+(7-r.getDay()));const k=new Date(C);k.setDate(C.getDate()+7);const I=N.filter(K=>{const pe=new Date(K.scheduledDate);return pe>=r&&pe<=C}).length,z=N.filter(K=>{const pe=new Date(K.scheduledDate);return pe>C&&pe<=k}).length,_=N.filter(K=>new Date(K.scheduledDate)>=r).length,D=Math.round(u.length/xi*100);let Q;u.length>=xi?Q="overloaded":u.length>=xi*.7?Q="busy":Q="available";const F=N.filter(K=>new Date(K.scheduledDate)>=r).map(K=>({projectId:K.id,customerName:s(K.customerId),date:new Date(K.scheduledDate),product:K.product,bandwidth:K.serviceBandwidth})).sort((K,pe)=>K.date.getTime()-pe.date.getTime()).slice(0,5);return{member:d,activeProjects:u.length,pendingScheduling:w,scheduledThisWeek:I,scheduledNextWeek:z,scheduledTotal:_,utilizationPercent:D,status:Q,upcomingInstalls:F}}),l=[],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let d=0;d<14;d++){const x=new Date(r);x.setDate(r.getDate()+d);const u=x.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w=i[x.getDay()],C=e.filter(k=>!k.scheduledDate||k.status==="completed"?!1:new Date(k.scheduledDate).toDateString()===x.toDateString()).map(k=>({projectId:k.id,customerName:s(k.customerId),cxAssignee:k.cxAssignee||"Unassigned",product:k.product}));l.push({date:x,dateString:u,dayOfWeek:w,installs:C,totalInstalls:C.length,isOverCapacity:C.length>ya})}const o=[];l.forEach(d=>{d.totalInstalls>ya&&o.push({date:d.date,dateString:d.dateString,assignees:[...new Set(d.installs.map(u=>u.cxAssignee))],count:d.totalInstalls,message:`${d.totalInstalls} installs scheduled - exceeds team capacity of ${ya}`});const x=new Map;d.installs.forEach(u=>{x.set(u.cxAssignee,(x.get(u.cxAssignee)||0)+1)}),x.forEach((u,w)=>{u>$u&&(o.find(C=>C.dateString===d.dateString)||o.push({date:d.date,dateString:d.dateString,assignees:[w],count:u,message:`${w} has ${u} installs - exceeds individual capacity of ${$u}`}))})});const c=a.reduce((d,x)=>d+x.activeProjects,0),m=l.reduce((d,x)=>d+x.totalInstalls,0),j=a.filter(d=>d.status==="overloaded").length,y=ya*14,h=Math.max(0,y-m),v=l.reduce((d,x)=>x.totalInstalls>d.totalInstalls?x:d,l[0]),g=[];if(j>0){const d=a.filter(x=>x.status==="overloaded").map(x=>x.member.name).join(", ");g.push(`Consider redistributing projects from overloaded team members: ${d}`)}o.length>0&&g.push(`Review scheduling conflicts - ${o.length} days have capacity issues`);const p=a.filter(d=>d.utilizationPercent<50);p.length>0&&j>0&&g.push(`${p.map(d=>d.member.name).join(", ")} have capacity for additional projects`);const f=l.filter(d=>d.dayOfWeek==="Sat"||d.dayOfWeek==="Sun").filter(d=>d.totalInstalls>0);return f.length>0&&g.push(`${f.length} weekend days have scheduled installs - verify these are intended`),g.length===0&&g.push("Team capacity is well-balanced. No immediate actions needed."),{teamCapacity:a.sort((d,x)=>x.activeProjects-d.activeProjects),dailySchedule:l,summary:{totalActiveProjects:c,totalScheduledInstalls:m,overloadedMembers:j,availableSlots:h,busiestDay:v.dateString,busiestDayCount:v.totalInstalls},conflicts:o,recommendations:g}}function Lu(e){switch(e){case"available":return"text-green-600";case"busy":return"text-yellow-600";case"overloaded":return"text-red-600"}}function Oj(e){switch(e){case"available":return"bg-green-100";case"busy":return"bg-yellow-100";case"overloaded":return"bg-red-100"}}function $j(e){return e>=100?"bg-red-500":e>=80?"bg-orange-500":e>=60?"bg-yellow-500":"bg-green-500"}function Lj({projects:e,customers:s}){const[n,r]=b.useState(null),[a,l]=b.useState(!1),i=new Map(s.map(y=>[y.id,y.companyName])),c=Mj(e,y=>i.get(y)||"Unknown"),m=y=>{r(h=>h===y?null:y)},j=a?c.dailySchedule:c.dailySchedule.slice(0,7);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(Je,{className:"w-5 h-5 text-gray-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Active Projects"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.summary.totalActiveProjects})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(me,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Scheduled (14d)"})]}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.summary.totalScheduledInstalls})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(Pe,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Available Slots"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.summary.availableSlots})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Overloaded"})]}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.summary.overloadedMembers}),t.jsx("p",{className:"text-xs text-gray-500",children:"team members"})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(me,{className:"w-5 h-5 text-orange-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Busiest Day"})]}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:c.summary.busiestDay}),t.jsxs("p",{className:"text-xs text-gray-500",children:[c.summary.busiestDayCount," installs"]})]})]}),c.recommendations.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Kr,{className:"w-5 h-5 text-yellow-500"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Recommendations"})]}),t.jsx("div",{className:"space-y-2",children:c.recommendations.map((y,h)=>t.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-600",children:[t.jsx("span",{className:"text-yellow-500",children:""}),t.jsx("span",{children:y})]},h))})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Je,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Team Capacity"})]}),t.jsx("div",{className:"space-y-3",children:c.teamCapacity.map(y=>t.jsx(_j,{capacity:y,isExpanded:n===y.member.id,onToggle:()=>m(y.member.id)},y.member.id))})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(me,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Installation Schedule"})]}),t.jsx("button",{onClick:()=>l(!a),className:"text-sm text-blue-600 hover:underline",children:a?"Show 7 days":"Show 14 days"})]}),t.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map(y=>t.jsx(Fj,{day:y},y.dateString))}),t.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),"Available"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded"}),"Busy"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-100 rounded"}),"Over Capacity"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),"Weekend"]})]})]}),c.conflicts.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Scheduling Conflicts"}),t.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:c.conflicts.length})]}),t.jsx("div",{className:"space-y-2",children:c.conflicts.map((y,h)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.dateString}),t.jsx("div",{className:"text-sm text-red-600",children:y.message})]}),t.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded",children:[y.count," installs"]})]},h))})]})]})}function _j({capacity:e,isExpanded:s,onToggle:n}){const{member:r,activeProjects:a,utilizationPercent:l,status:i,upcomingInstalls:o}=e;return t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:t.jsx(Le,{className:"w-4 h-4 text-gray-500"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium text-gray-900",children:r.name}),t.jsx("p",{className:"text-xs text-gray-500",children:r.role})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"font-medium text-gray-900",children:a}),t.jsx("p",{className:"text-xs text-gray-500",children:"Active"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"font-medium text-gray-900",children:e.scheduledThisWeek}),t.jsx("p",{className:"text-xs text-gray-500",children:"This Week"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"font-medium text-gray-900",children:e.scheduledNextWeek}),t.jsx("p",{className:"text-xs text-gray-500",children:"Next Week"})]})]}),t.jsxs("div",{className:"w-24",children:[t.jsx("div",{className:"flex justify-between text-xs mb-1",children:t.jsxs("span",{className:Lu(i),children:[l,"%"]})}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all ${$j(l)}`,style:{width:`${Math.min(l,100)}%`}})})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded capitalize ${Oj(i)} ${Lu(i)}`,children:i}),s?t.jsx(ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(ke,{className:"w-4 h-4 text-gray-400"})]})]}),s&&o.length>0&&t.jsxs("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Upcoming Installs"}),t.jsx("div",{className:"space-y-2",children:o.map(c=>t.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-white rounded border border-gray-200",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:c.customerName}),t.jsxs("p",{className:"text-xs text-gray-500",children:[c.product," - ",c.bandwidth]})]}),t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-sm text-gray-600",children:c.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})})]},c.projectId))})]}),s&&o.length===0&&t.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:t.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No upcoming installs scheduled"})})]})}function Fj({day:e}){const s=e.dayOfWeek==="Sat"||e.dayOfWeek==="Sun";let n="bg-green-50";return s&&e.totalInstalls===0?n="bg-gray-50":e.isOverCapacity?n="bg-red-100":e.totalInstalls>=4?n="bg-yellow-100":e.totalInstalls>0&&(n="bg-blue-50"),t.jsxs("div",{className:`p-2 rounded-lg border ${e.isOverCapacity?"border-red-300":"border-gray-200"} ${n}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:e.dayOfWeek}),t.jsx("span",{className:"text-xs text-gray-600",children:e.dateString})]}),e.totalInstalls>0?t.jsxs("div",{children:[t.jsx("p",{className:`text-lg font-bold ${e.isOverCapacity?"text-red-600":"text-gray-900"}`,children:e.totalInstalls}),t.jsxs("p",{className:"text-xs text-gray-500",children:["install",e.totalInstalls!==1?"s":""]}),t.jsxs("div",{className:"mt-1 space-y-0.5",children:[e.installs.slice(0,3).map((r,a)=>t.jsx("p",{className:"text-xs text-gray-600 truncate",title:r.customerName,children:r.cxAssignee.split(" ")[0]},a)),e.installs.length>3&&t.jsxs("p",{className:"text-xs text-gray-400",children:["+",e.installs.length-3," more"]})]})]}):t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-gray-300",children:"-"}),t.jsx("p",{className:"text-xs text-gray-400",children:s?"weekend":"available"})]})]})}function Hh(e){if(e.length===0)return{score:0,totalResponses:0,promoters:0,passives:0,detractors:0,promoterPercentage:0,passivePercentage:0,detractorPercentage:0,responseRate:0,averageScore:0,trend:"stable"};const s=e.filter(h=>h.category==="promoter").length,n=e.filter(h=>h.category==="passive").length,r=e.filter(h=>h.category==="detractor").length,a=e.length,l=s/a*100,i=n/a*100,o=r/a*100,c=Math.round(l-o),m=e.reduce((h,v)=>h+v.score,0)/a,j=[...e].sort((h,v)=>new Date(v.respondedAt).getTime()-new Date(h.respondedAt).getTime());let y="stable";if(j.length>=4){const h=j.slice(0,Math.floor(j.length/2)),v=j.slice(Math.floor(j.length/2)),g=h.reduce((f,d)=>f+d.score,0)/h.length,p=v.reduce((f,d)=>f+d.score,0)/v.length;g-p>.5?y="improving":p-g>.5&&(y="declining")}return{score:c,totalResponses:a,promoters:s,passives:n,detractors:r,promoterPercentage:Math.round(l),passivePercentage:Math.round(i),detractorPercentage:Math.round(o),responseRate:85,averageScore:Math.round(m*10)/10,trend:y}}function Uj(e){const s=new Map;return e.forEach(r=>{const l=new Date(r.respondedAt).toLocaleDateString("en-US",{month:"short",year:"numeric"});s.has(l)||s.set(l,[]),s.get(l).push(r)}),Array.from(s.entries()).sort((r,a)=>{const l=new Date(r[1][0].respondedAt),i=new Date(a[1][0].respondedAt);return l.getTime()-i.getTime()}).slice(-6).map(([r,a])=>({period:r,metrics:Hh(a)}))}function Bj(e,s,n){const r=[];e.score>=50?r.push({type:"positive",title:"Excellent NPS Score",description:`Your NPS of ${e.score} is considered excellent. Most customers are highly satisfied.`,actionable:!0,suggestedAction:"Consider asking promoters for testimonials or referrals."}):e.score>=0?r.push({type:"neutral",title:"Good NPS Score",description:`Your NPS of ${e.score} is positive but has room for improvement.`,actionable:!0,suggestedAction:"Focus on converting passives to promoters through proactive outreach."}):r.push({type:"negative",title:"NPS Needs Attention",description:`Your NPS of ${e.score} indicates more detractors than promoters.`,actionable:!0,suggestedAction:"Prioritize following up with detractors to understand and address their concerns."}),e.trend==="improving"?r.push({type:"positive",title:"Improving Trend",description:"Customer satisfaction is trending upward based on recent responses.",actionable:!1}):e.trend==="declining"&&r.push({type:"negative",title:"Declining Trend",description:"Recent responses show lower scores than older ones.",actionable:!0,suggestedAction:"Review recent changes in process or service that may have impacted customer experience."});const a=s.filter(l=>l.category==="detractor").filter(l=>(Date.now()-new Date(l.respondedAt).getTime())/864e5<=30);if(a.length>0){const l=a.filter(i=>i.followUpRequired&&!i.followUpCompletedAt);l.length>0&&r.push({type:"negative",title:"Pending Detractor Follow-ups",description:`${l.length} detractor(s) require follow-up within the last 30 days.`,actionable:!0,suggestedAction:"Reach out to these customers to address their concerns."})}return e.responseRate<50&&r.push({type:"neutral",title:"Low Response Rate",description:`Only ${e.responseRate}% of surveys are being completed.`,actionable:!0,suggestedAction:"Consider shorter surveys or better timing for survey delivery."}),e.passivePercentage>30&&r.push({type:"neutral",title:"Passive Conversion Opportunity",description:`${e.passivePercentage}% of responses are passive (7-8). These customers could become promoters.`,actionable:!0,suggestedAction:"Proactively engage passive customers to understand what would make them promoters."}),r}function _u(e){return e>=50?"text-green-600":e>=0?"text-yellow-600":"text-red-600"}function zj(e){return e>=50?"bg-green-100":e>=0?"bg-yellow-100":"bg-red-100"}function qj(e){return e>=70?"World Class":e>=50?"Excellent":e>=30?"Good":e>=0?"Okay":e>=-30?"Needs Work":"Critical"}function Hj(e){switch(e){case"promoter":return"text-green-600";case"passive":return"text-yellow-600";case"detractor":return"text-red-600"}}function Wj(e){switch(e){case"promoter":return"bg-green-100";case"passive":return"bg-yellow-100";case"detractor":return"bg-red-100"}}function Vj({responses:e,customers:s,showDetails:n=!0}){const[r,a]=b.useState(!1),[l,i]=b.useState(null),o=Hh(e),c=Uj(e),m=Bj(o,e),j=new Map(s.map(p=>[p.id,p])),y=[...e].sort((p,f)=>new Date(f.respondedAt).getTime()-new Date(p.respondedAt).getTime()).slice(0,r?20:5),h=e.filter(p=>p.followUpRequired&&!p.followUpCompletedAt),v=o.trend==="improving"?Is:o.trend==="declining"?Fr:Lr,g=o.trend==="improving"?"text-green-600":o.trend==="declining"?"text-red-600":"text-gray-500";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsxs(T,{className:"text-center col-span-1",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx($r,{className:"w-5 h-5 text-gray-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"NPS Score"})]}),t.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full ${zj(o.score)} mb-2`,children:t.jsxs("span",{className:`text-3xl font-bold ${_u(o.score)}`,children:[o.score>0?"+":"",o.score]})}),t.jsx("p",{className:`text-sm font-medium ${_u(o.score)}`,children:qj(o.score)}),t.jsxs("div",{className:`flex items-center justify-center gap-1 mt-1 ${g}`,children:[t.jsx(v,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs capitalize",children:o.trend})]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(by,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Promoters"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.promoters}),t.jsxs("p",{className:"text-xs text-gray-500",children:[o.promoterPercentage,"%"]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(Lr,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Passives"})]}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:o.passives}),t.jsxs("p",{className:"text-xs text-gray-500",children:[o.passivePercentage,"%"]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(wy,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Detractors"})]}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.detractors}),t.jsxs("p",{className:"text-xs text-gray-500",children:[o.detractorPercentage,"%"]})]}),t.jsxs(T,{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.jsx(Xe,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Responses"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalResponses}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",o.averageScore,"/10"]})]})]}),n&&t.jsxs(t.Fragment,{children:[t.jsxs(T,{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Response Distribution"}),t.jsxs("div",{className:"h-8 flex rounded-lg overflow-hidden",children:[o.promoterPercentage>0&&t.jsx("div",{className:"bg-green-500 flex items-center justify-center transition-all",style:{width:`${o.promoterPercentage}%`},title:`Promoters: ${o.promoterPercentage}%`,children:o.promoterPercentage>=10&&t.jsxs("span",{className:"text-white text-xs font-medium",children:[o.promoterPercentage,"%"]})}),o.passivePercentage>0&&t.jsx("div",{className:"bg-yellow-400 flex items-center justify-center transition-all",style:{width:`${o.passivePercentage}%`},title:`Passives: ${o.passivePercentage}%`,children:o.passivePercentage>=10&&t.jsxs("span",{className:"text-gray-800 text-xs font-medium",children:[o.passivePercentage,"%"]})}),o.detractorPercentage>0&&t.jsx("div",{className:"bg-red-500 flex items-center justify-center transition-all",style:{width:`${o.detractorPercentage}%`},title:`Detractors: ${o.detractorPercentage}%`,children:o.detractorPercentage>=10&&t.jsxs("span",{className:"text-white text-xs font-medium",children:[o.detractorPercentage,"%"]})})]}),t.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),"Promoters (9-10)"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded"}),"Passives (7-8)"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),"Detractors (0-6)"]})]})]}),c.length>1&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Is,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"NPS Trend"})]}),t.jsx("div",{className:"flex items-end gap-4 h-32",children:c.map(p=>{const f=Math.max(...c.map(u=>Math.abs(u.metrics.score)),50),d=Math.abs(p.metrics.score)/f*100,x=p.metrics.score>=0;return t.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[t.jsxs("span",{className:"text-xs text-gray-600 mb-1",children:[p.metrics.score>0?"+":"",p.metrics.score]}),t.jsx("div",{className:"w-full h-20 flex items-end justify-center bg-gray-50 rounded",children:t.jsx("div",{className:`w-full rounded-t transition-all ${x?"bg-green-500":"bg-red-500"}`,style:{height:`${d}%`}})}),t.jsx("span",{className:"text-xs text-gray-500 mt-1",children:p.period.split(" ")[0]})]},p.period)})})]}),m.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Kr,{className:"w-5 h-5 text-yellow-500"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Insights & Recommendations"})]}),t.jsx("div",{className:"space-y-2",children:m.map((p,f)=>t.jsx(Gj,{insight:p,isExpanded:l===f,onToggle:()=>i(l===f?null:f)},f))})]}),h.length>0&&t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(te,{className:"w-5 h-5 text-red-500"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Pending Follow-ups"}),t.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:h.length})]}),t.jsx("div",{className:"space-y-2",children:h.map(p=>{const f=j.get(p.customerId),d=Math.floor((Date.now()-new Date(p.respondedAt).getTime())/(1e3*60*60*24));return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${Wj(p.category)}`,children:t.jsx("span",{className:`text-lg font-bold ${Hj(p.category)}`,children:p.score})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:(f==null?void 0:f.companyName)||"Unknown"}),t.jsx("p",{className:"text-sm text-gray-600",children:p.contactName})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm text-red-600 font-medium",children:[d," days ago"]}),t.jsx("p",{className:"text-xs text-gray-500",children:p.surveyType})]})]},p.id)})})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xe,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"font-medium text-gray-900",children:"Recent Responses"})]}),t.jsx("button",{onClick:()=>a(!r),className:"text-sm text-blue-600 hover:underline",children:r?"Show less":"Show more"})]}),t.jsx("div",{className:"space-y-3",children:y.map(p=>{const f=j.get(p.customerId),d=If[p.category];return t.jsxs("div",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${d.bgColor} flex-shrink-0`,children:t.jsx("span",{className:`text-lg font-bold ${d.color}`,children:p.score})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-medium text-gray-900",children:(f==null?void 0:f.companyName)||"Unknown"}),t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${d.bgColor} ${d.color}`,children:d.label}),p.followUpRequired&&!p.followUpCompletedAt&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-red-100 text-red-700",children:"Follow-up needed"}),p.followUpCompletedAt&&t.jsx(Pe,{className:"w-4 h-4 text-green-500"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mt-0.5",children:[t.jsx(Le,{className:"w-3 h-3"}),t.jsx("span",{children:p.contactName}),t.jsx("span",{children:""}),t.jsx("span",{children:new Date(p.respondedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),t.jsx("span",{children:""}),t.jsx("span",{className:"capitalize",children:p.surveyType.replace("-"," ")})]}),p.feedback&&t.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:['"',p.feedback,'"']})]})]},p.id)})})]})]})]})}function Gj({insight:e,isExpanded:s,onToggle:n}){const r=e.type==="positive"?"bg-green-50 border-green-200":e.type==="negative"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200",a=e.type==="positive"?"text-green-600":e.type==="negative"?"text-red-600":"text-yellow-600",l=e.type==="positive"?Pe:e.type==="negative"?te:Kr;return t.jsxs("div",{className:`border rounded-lg overflow-hidden ${r}`,children:[t.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-3 hover:bg-opacity-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(l,{className:`w-5 h-5 ${a}`}),t.jsx("span",{className:"font-medium text-gray-900",children:e.title})]}),s?t.jsx(ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(ke,{className:"w-4 h-4 text-gray-400"})]}),s&&t.jsxs("div",{className:"border-t border-gray-200 p-3 bg-white",children:[t.jsx("p",{className:"text-sm text-gray-600",children:e.description}),e.suggestedAction&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded border border-blue-200",children:[t.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Suggested Action"}),t.jsx("p",{className:"text-sm text-blue-800",children:e.suggestedAction})]})]})]})}function Kj(){const e=[],s=[{customerId:"c1",projectId:"p1",score:10,feedback:"Excellent service! The installation team was professional and efficient. Would highly recommend Pilot Fiber.",contactName:"John Smith",contactEmail:"jsmith@acmecorp.com",surveyType:"post-install",daysAgo:5,followUpRequired:!1},{customerId:"c2",projectId:"p2",score:9,feedback:"Great experience overall. Very happy with the speed and reliability.",contactName:"Sarah Johnson",contactEmail:"sarah@techstartup.io",surveyType:"post-install",daysAgo:12,followUpRequired:!1},{customerId:"c3",score:10,feedback:"Best ISP we have ever worked with. The support team is amazing!",contactName:"Mike Chen",contactEmail:"mchen@globalretail.com",surveyType:"quarterly",daysAgo:30,followUpRequired:!1},{customerId:"c4",projectId:"p4",score:9,feedback:"Smooth installation process. Very pleased with the service quality.",contactName:"Emily Davis",contactEmail:"emily@creativestudio.com",surveyType:"post-install",daysAgo:18,followUpRequired:!1},{customerId:"c5",projectId:"p5",score:8,feedback:"Good service, but the scheduling process could be improved.",contactName:"Robert Wilson",contactEmail:"rwilson@lawfirm.com",surveyType:"post-install",daysAgo:8,followUpRequired:!0},{customerId:"c6",score:7,feedback:"Service is reliable but pricing could be more competitive.",contactName:"Lisa Anderson",contactEmail:"landerson@healthcare.org",surveyType:"quarterly",daysAgo:45,followUpRequired:!0},{customerId:"c7",projectId:"p7",score:8,contactName:"David Martinez",contactEmail:"david@restaurant.com",surveyType:"post-install",daysAgo:22,followUpRequired:!1},{customerId:"c8",projectId:"p8",score:5,feedback:"Installation was delayed multiple times. Very frustrating experience.",contactName:"Jennifer Brown",contactEmail:"jbrown@consulting.com",surveyType:"post-install",daysAgo:3,followUpRequired:!0},{customerId:"c9",score:4,feedback:"Communication needs improvement. Had to chase for updates constantly.",contactName:"Chris Taylor",contactEmail:"ctaylor@mediacompany.com",surveyType:"quarterly",daysAgo:60,followUpRequired:!0},{customerId:"c10",projectId:"p10",score:6,feedback:"The service itself is good, but the onboarding experience was poor.",contactName:"Amanda White",contactEmail:"awhite@finance.com",surveyType:"post-install",daysAgo:15,followUpRequired:!0},{customerId:"c1",score:9,contactName:"John Smith",contactEmail:"jsmith@acmecorp.com",surveyType:"quarterly",daysAgo:90,followUpRequired:!1},{customerId:"c2",score:10,feedback:"Still very happy with the service after several months!",contactName:"Sarah Johnson",contactEmail:"sarah@techstartup.io",surveyType:"quarterly",daysAgo:85,followUpRequired:!1},{customerId:"c3",score:10,contactName:"Mike Chen",contactEmail:"mchen@globalretail.com",surveyType:"annual",daysAgo:365,followUpRequired:!1}],n=new Date;return s.forEach((r,a)=>{const l=new Date(n);l.setDate(l.getDate()-r.daysAgo);const i=new Date(l);i.setDate(i.getDate()-2),e.push({id:`nps-${a+1}`,customerId:r.customerId,projectId:r.projectId,score:r.score,category:Tf(r.score),feedback:r.feedback,contactName:r.contactName,contactEmail:r.contactEmail,surveyType:r.surveyType,sentAt:i.toISOString(),respondedAt:l.toISOString(),followUpRequired:r.followUpRequired,followUpCompletedAt:r.followUpRequired&&r.daysAgo>30?new Date(l.getTime()+3*24*60*60*1e3).toISOString():void 0})}),e}const Yj=Kj();function Qj(){const{state:e}=Se(),s=b.useMemo(()=>{const a=new Date,l=a.getMonth(),i=a.getFullYear(),o=e.projects.filter(N=>{if(N.status!=="completed")return!1;const C=new Date(N.updatedAt);return C.getMonth()===l&&C.getFullYear()===i}),c=e.projects.filter(N=>N.status!=="completed"),m=c.filter(N=>new Date(N.focDate)<a),j=c.filter(N=>N.isEscalated),y=e.projects.filter(N=>N.status==="completed"),h=y.length>0?y.reduce((N,C)=>{const k=new Date(C.handoffDate),I=new Date(C.updatedAt);return N+Math.ceil((I.getTime()-k.getTime())/(1e3*60*60*24))},0)/y.length:0,v=y.filter(N=>{const C=new Date(N.focDate);return new Date(N.updatedAt)<=C}),g=y.length>0?v.length/y.length*100:0,p={new:e.projects.filter(N=>N.status==="new").length,reviewing:e.projects.filter(N=>N.status==="reviewing").length,scheduled:e.projects.filter(N=>N.status==="scheduled").length,confirmed:e.projects.filter(N=>N.status==="confirmed").length,installing:e.projects.filter(N=>N.status==="installing").length,completed:e.projects.filter(N=>N.status==="completed").length},f={};e.projects.forEach(N=>{f[N.projectType]=(f[N.projectType]||0)+1});const d=re.map(N=>{const C=e.projects.filter(_=>_.cxAssignee===N.name),k=C.filter(_=>_.status!=="completed").length,I=C.filter(_=>_.status==="completed").length,z=C.filter(_=>_.isEscalated&&_.status!=="completed").length;return{name:N.name,active:k,completed:I,escalated:z,total:C.length}}).sort((N,C)=>C.active-N.active),x=new Date;x.setDate(x.getDate()-7);const u=e.projects.filter(N=>N.status!=="completed"?!1:new Date(N.updatedAt)>=x),w=o.reduce((N,C)=>N+(C.mrc||0),0);return{completedThisMonth:o.length,activeProjects:c.length,pastFoc:m.length,escalated:j.length,avgDaysToComplete:Math.round(h),onTimeRate:Math.round(g),byStatus:p,byType:f,teamStats:d,recentCompletions:u.length,totalProjects:e.projects.length,installedMrrThisMonth:w}},[e.projects]),n={new:"bg-blue-500",reviewing:"bg-yellow-500",scheduled:"bg-cyan-500",confirmed:"bg-green-500",installing:"bg-orange-500",completed:"bg-gray-400"},r={"standard-on-net":"Standard On-Net","new-build":"New Build","contract-labor":"Contract Labor",montgomery:"Montgomery",coex:"Co-Ex","after-hours":"After Hours","dark-fiber":"Dark Fiber",wavelength:"Wavelength","ethernet-transport":"Ethernet Transport","ip-transit":"IP Transit"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),t.jsx("p",{className:"text-gray-600",children:"Performance metrics and insights"})]}),t.jsxs("div",{className:"grid grid-cols-5 gap-6",children:[t.jsx(Ht,{title:"Completed This Month",value:s.completedThisMonth,icon:t.jsx(Pe,{className:"w-6 h-6"}),color:"green"}),t.jsx(Ht,{title:"Installed MRR (This Month)",value:`$${s.installedMrrThisMonth.toLocaleString()}`,icon:t.jsx(Al,{className:"w-6 h-6"}),color:"green"}),t.jsx(Ht,{title:"Active Projects",value:s.activeProjects,icon:t.jsx($r,{className:"w-6 h-6"}),color:"blue"}),t.jsx(Ht,{title:"Avg Days to Install",value:s.avgDaysToComplete,icon:t.jsx(se,{className:"w-6 h-6"}),color:"yellow"}),t.jsx(Ht,{title:"On-Time Rate",value:`${s.onTimeRate}%`,icon:t.jsx(Ny,{className:"w-6 h-6"}),color:s.onTimeRate>=80?"green":s.onTimeRate>=60?"yellow":"red"})]}),t.jsx(Ej,{projects:e.projects,customers:e.customers}),t.jsx(Lj,{projects:e.projects,customers:e.customers}),t.jsx(Vj,{responses:Yj,customers:e.customers}),t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx($r,{className:"w-5 h-5"}),"Projects by Status"]}),t.jsx("div",{className:"space-y-3",children:Object.entries(s.byStatus).map(([a,l])=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${n[a]}`}),t.jsx("span",{className:"flex-1 capitalize text-gray-700",children:a}),t.jsx("span",{className:"font-medium text-gray-900",children:l}),t.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${n[a]}`,style:{width:`${l/s.totalProjects*100}%`}})})]},a))})]}),t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Is,{className:"w-5 h-5"}),"Projects by Type"]}),t.jsx("div",{className:"space-y-3",children:Object.entries(s.byType).sort((a,l)=>l[1]-a[1]).slice(0,6).map(([a,l])=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"flex-1 text-gray-700 text-sm",children:r[a]||a}),t.jsx("span",{className:"font-medium text-gray-900",children:l}),t.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-pilot-primary",style:{width:`${l/s.totalProjects*100}%`}})})]},a))})]}),t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(te,{className:"w-5 h-5"}),"Attention Required"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(te,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"text-gray-700",children:"Escalated"})]}),t.jsx("span",{className:"text-xl font-bold text-red-600",children:s.escalated})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(se,{className:"w-4 h-4 text-orange-500"}),t.jsx("span",{className:"text-gray-700",children:"Past FOC"})]}),t.jsx("span",{className:"text-xl font-bold text-orange-600",children:s.pastFoc})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pe,{className:"w-4 h-4 text-green-500"}),t.jsx("span",{className:"text-gray-700",children:"Completed (7 days)"})]}),t.jsx("span",{className:"text-xl font-bold text-green-600",children:s.recentCompletions})]})]})]})]}),t.jsxs(T,{children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Je,{className:"w-5 h-5"}),"Team Performance"]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-pilot-primary text-pilot-secondary text-sm",children:[t.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Team Member"}),t.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Active"}),t.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Completed"}),t.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Escalated"}),t.jsx("th",{className:"text-center px-4 py-3 font-semibold",children:"Total"}),t.jsx("th",{className:"px-4 py-3 font-semibold",children:"Workload"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:s.teamStats.map(a=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:a.name}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-full font-medium",children:a.active})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 text-green-700 rounded-full font-medium",children:a.completed})}),t.jsx("td",{className:"px-4 py-3 text-center",children:a.escalated>0?t.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-red-100 text-red-700 rounded-full font-medium",children:a.escalated}):t.jsx("span",{className:"text-gray-400",children:"-"})}),t.jsx("td",{className:"px-4 py-3 text-center text-gray-600",children:a.total}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"w-32 h-2 bg-gray-100 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${a.active>8?"bg-red-500":a.active>5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(a.active/10*100,100)}%`}})})})]},a.name))})]})})]})]})}const Co={onboarding:Ur,escalation:te,delay:se,vip:Cc,"post-install":Pe,"at-risk":Yr,custom:Th},Xj={task:Pe,email:le,call:Ec,wait:Mc,decision:Ic,automation:As},Jj={task:"Task",email:"Send Email",call:"Phone Call",wait:"Wait Period",decision:"Decision Point",automation:"Automation"};function Zj(){const[e,s]=b.useState(rr),[n,r]=b.useState(null),[a,l]=b.useState("all"),[i,o]=b.useState(!1),[c,m]=b.useState(null),j=a==="all"?e:e.filter(u=>u.category===a),y=e.length,h=e.filter(u=>u.isActive).length,v=Fh.length,g=e.reduce((u,w)=>u+w.timesUsed,0),p=u=>{r(w=>w===u?null:u)},f=u=>{s(w=>w.map(N=>N.id===u?{...N,isActive:!N.isActive}:N))},d=u=>{const w={...u,id:`playbook-${Date.now()}`,name:`${u.name} (Copy)`,timesUsed:0,avgCompletionDays:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(N=>[...N,w])},x=u=>{confirm("Are you sure you want to delete this playbook?")&&s(w=>w.filter(N=>N.id!==u))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Playbooks"}),t.jsx("p",{className:"text-gray-600",children:"Automated workflows for common CX scenarios"})]}),t.jsxs(U,{onClick:()=>o(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Create Playbook"]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y}),t.jsx("p",{className:"text-sm text-gray-600",children:"Total Playbooks"})]}),t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-green-600",children:h}),t.jsx("p",{className:"text-sm text-gray-600",children:"Active"})]}),t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-blue-600",children:v}),t.jsx("p",{className:"text-sm text-gray-600",children:"Running Now"})]}),t.jsxs(T,{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-purple-600",children:g}),t.jsx("p",{className:"text-sm text-gray-600",children:"Total Executions"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="all"?"bg-pilot-secondary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Categories"}),Object.entries(Ts).map(([u,w])=>{const N=Co[u],C=e.filter(k=>k.category===u).length;return t.jsxs("button",{onClick:()=>l(u),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a===u?`${w.bgColor} ${w.color}`:"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[t.jsx(N,{className:"w-4 h-4"}),w.label,t.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",C,")"]})]},u)})]}),t.jsx("div",{className:"space-y-4",children:j.map(u=>{const w=Ts[u.category],N=Co[u.category],C=n===u.id;return t.jsxs(T,{className:"overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>p(u.id),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-lg ${w.bgColor}`,children:t.jsx(N,{className:`w-6 h-6 ${w.color}`})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:u.name}),!u.isActive&&t.jsx("span",{className:"px-2 py-0.5 bg-gray-200 text-gray-600 text-xs rounded",children:"Inactive"})]}),t.jsx("p",{className:"text-sm text-gray-500",children:u.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[t.jsxs("span",{children:[u.steps.length," steps"]}),t.jsx("span",{children:""}),t.jsx("span",{children:u.estimatedDuration}),t.jsx("span",{children:""}),t.jsxs("span",{children:["Used ",u.timesUsed,"x"]}),u.avgCompletionDays>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Avg ",u.avgCompletionDays," days"]})]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",onClick:k=>k.stopPropagation(),children:[t.jsx("button",{onClick:()=>f(u.id),className:`p-2 rounded-lg transition-colors ${u.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:u.isActive?"Deactivate":"Activate",children:u.isActive?t.jsx(Cy,{className:"w-5 h-5"}):t.jsx(ky,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>m(u),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Edit",children:t.jsx(cy,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>d(u),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Duplicate",children:t.jsx(Cn,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>x(u.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:t.jsx(El,{className:"w-4 h-4"})})]}),C?t.jsx(ut,{className:"w-5 h-5 text-gray-400"}):t.jsx(ke,{className:"w-5 h-5 text-gray-400"})]})]}),C&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trigger Conditions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.triggerConditions.map((k,I)=>t.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:k},I))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Steps:"}),t.jsx("div",{className:"space-y-2",children:u.steps.map((k,I)=>{const z=Xj[k.type];return t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white border border-gray-200 rounded-full text-sm font-medium text-gray-600",children:I+1}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(z,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 text-gray-600 rounded",children:Jj[k.type]}),t.jsx("p",{className:"font-medium text-gray-900",children:k.title}),k.isOptional&&t.jsx("span",{className:"text-xs text-gray-500",children:"(optional)"}),k.requiresApproval&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded",children:"Requires Approval"})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:k.description}),k.assignTo&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Assigned to: ",k.assignTo]}),k.waitHours&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Wait: ",k.waitHours," hours"]}),k.waitDays&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Wait: ",k.waitDays," days"]}),k.decisionOptions&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:k.decisionOptions.map((_,D)=>t.jsx("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-700 rounded",children:_.label},D))})]})]},k.id)})})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-gray-200",children:[t.jsxs(U,{variant:"secondary",size:"sm",onClick:()=>m(u),children:[t.jsx(Pl,{className:"w-4 h-4 mr-1"}),"Configure"]}),t.jsxs(U,{size:"sm",children:[t.jsx(gr,{className:"w-4 h-4 mr-1"}),"Run on Project"]})]})]})]},u.id)})}),j.length===0&&t.jsxs(T,{className:"text-center py-12",children:[t.jsx(xr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No playbooks found"}),t.jsxs(U,{className:"mt-4",onClick:()=>o(!0),children:[t.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Create Your First Playbook"]})]}),(i||c)&&t.jsx(e1,{playbook:c,onClose:()=>{o(!1),m(null)},onSave:u=>{s(c?w=>w.map(N=>N.id===u.id?u:N):w=>[...w,u]),o(!1),m(null)}})]})}function e1({playbook:e,onClose:s,onSave:n}){const r=!!e,[a,l]=b.useState((e==null?void 0:e.name)||""),[i,o]=b.useState((e==null?void 0:e.description)||""),[c,m]=b.useState((e==null?void 0:e.category)||"custom"),[j,y]=b.useState((e==null?void 0:e.triggerConditions)||[]),[h,v]=b.useState((e==null?void 0:e.estimatedDuration)||"1-2 days"),[g,p]=b.useState(""),f=()=>{g.trim()&&(y(N=>[...N,g.trim()]),p(""))},d=N=>{y(C=>C.filter((k,I)=>I!==N))},x=()=>{const N={id:(e==null?void 0:e.id)||`playbook-${Date.now()}`,name:a,description:i,category:c,triggerConditions:j,estimatedDuration:h,isActive:(e==null?void 0:e.isActive)??!0,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.createdBy)||"current-user",timesUsed:(e==null?void 0:e.timesUsed)||0,avgCompletionDays:(e==null?void 0:e.avgCompletionDays)||0,steps:(e==null?void 0:e.steps)||[]};n(N)},u=Ts[c],w=Co[c];return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:`flex items-center justify-between p-4 ${u.bgColor}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-lg",children:t.jsx(w,{className:`w-5 h-5 ${u.color}`})}),t.jsx("h3",{className:"font-semibold text-gray-900",children:r?"Edit Playbook":"Create New Playbook"})]}),t.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-white hover:bg-opacity-50 rounded-lg",children:""})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Playbook Name"}),t.jsx("input",{type:"text",value:a,onChange:N=>l(N.target.value),placeholder:"e.g., New Customer Welcome",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:i,onChange:N=>o(N.target.value),placeholder:"Describe what this playbook does...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsx("select",{value:c,onChange:N=>m(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:Object.entries(Ts).map(([N,C])=>t.jsx("option",{value:N,children:C.label},N))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Duration"}),t.jsx("input",{type:"text",value:h,onChange:N=>v(N.target.value),placeholder:"e.g., 2-3 days",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trigger Conditions"}),t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"text",value:g,onChange:N=>p(N.target.value),placeholder:"e.g., Project escalated",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",onKeyPress:N=>N.key==="Enter"&&f()}),t.jsx(U,{onClick:f,children:"Add"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((N,C)=>t.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:[N,t.jsx("button",{onClick:()=>d(C),className:"text-gray-400 hover:text-red-500",children:""})]},C))})]}),r&&(e==null?void 0:e.steps)&&e.steps.length>0&&t.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["This playbook has ",e.steps.length," steps. Step editing coming soon."]})})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200",children:[t.jsx(U,{variant:"secondary",onClick:s,children:"Cancel"}),t.jsx(U,{onClick:x,disabled:!a.trim(),children:r?"Save Changes":"Create Playbook"})]})]})})}const va=[{id:"ch-1",name:"cx-team",isPrivate:!1,purpose:"CX team discussions"},{id:"ch-2",name:"cx-escalations",isPrivate:!1,purpose:"Escalated project alerts"},{id:"ch-3",name:"vip-alerts",isPrivate:!0,purpose:"VIP customer notifications"},{id:"ch-4",name:"installs",isPrivate:!1,purpose:"Install coordination"},{id:"ch-5",name:"general",isPrivate:!1,purpose:"General discussion"}];function t1({integration:e,onConnect:s,onDisconnect:n,onUpdatePreferences:r,onSetDefaultChannel:a}){const[l,i]=b.useState(null),[o,c]=b.useState(e.notifications.length>0?e.notifications:Object.keys(Bs).map(d=>({type:d,enabled:Bs[d].defaultEnabled,directMessage:!0}))),m=d=>{i(x=>x===d?null:d)},j=d=>{const x=o.map(u=>u.type===d?{...u,enabled:!u.enabled}:u);c(x),r==null||r(x)},y=d=>{const x=o.map(u=>u.type===d?{...u,directMessage:!u.directMessage}:u);c(x),r==null||r(x)},h=(d,x)=>{const u=o.map(w=>w.type===d?{...w,channelId:x}:w);c(u),r==null||r(u)},v=Object.entries(Bs).filter(([d,x])=>x.category==="project"),g=Object.entries(Bs).filter(([d,x])=>x.category==="customer"),p=Object.entries(Bs).filter(([d,x])=>x.category==="team"),f=o.filter(d=>d.enabled).length;return e.isConnected?t.jsxs("div",{className:"space-y-4",children:[t.jsx(T,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-lg",children:t.jsx(Xe,{className:"w-5 h-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.workspaceName}),t.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:[t.jsx(Ct,{className:"w-3 h-3"}),"Connected"]})]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Connected as ",t.jsx("span",{className:"font-medium",children:e.userName})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(U,{variant:"secondary",size:"sm",onClick:n,children:[t.jsx(Ch,{className:"w-4 h-4 mr-1"}),"Disconnect"]}),t.jsx("a",{href:`https://slack.com/app_redirect?channel=${e.defaultChannelId}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:t.jsx(Zs,{className:"w-4 h-4"})})]})]})}),t.jsxs(T,{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(fu,{className:"w-5 h-5 text-gray-600"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Default Channel"})]})}),t.jsxs("select",{value:e.defaultChannelId||"",onChange:d=>a==null?void 0:a(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"Select a default channel..."}),va.map(d=>t.jsxs("option",{value:d.id,children:[d.isPrivate?"":"#"," ",d.name]},d.id))]}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Notifications without a specific channel will be sent here"})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pl,{className:"w-5 h-5 text-gray-600"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Notification Preferences"})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[f," of ",o.length," enabled"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(gi,{title:"Project Notifications",icon:ts,isExpanded:l==="project",onToggle:()=>m("project"),notifications:v,preferences:o,channels:va,onToggleNotification:j,onToggleDirectMessage:y,onSetChannel:h}),t.jsx(gi,{title:"Customer Notifications",icon:Gt,isExpanded:l==="customer",onToggle:()=>m("customer"),notifications:g,preferences:o,channels:va,onToggleNotification:j,onToggleDirectMessage:y,onSetChannel:h}),t.jsx(gi,{title:"Team Notifications",icon:Je,isExpanded:l==="team",onToggle:()=>m("team"),notifications:p,preferences:o,channels:va,onToggleNotification:j,onToggleDirectMessage:y,onSetChannel:h})]})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(As,{className:"w-5 h-5 text-yellow-500"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Slack Tips"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.jsxs("p",{children:[" Use ",t.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"/pilot status [project-id]"})," to check project status"]}),t.jsx("p",{children:" React with  to mark reminders as complete"}),t.jsx("p",{children:" Mentions in the app will notify you in Slack"}),t.jsx("p",{children:" Click notification links to go directly to the project"})]})]})]}):t.jsx(T,{children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mx-auto mb-4",children:t.jsx(Xe,{className:"w-8 h-8 text-purple-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connect to Slack"}),t.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Get real-time notifications for project updates, escalations, and team mentions directly in Slack."}),t.jsxs(U,{onClick:s,children:[t.jsx(Ac,{className:"w-4 h-4 mr-2"}),"Connect Slack Workspace"]}),t.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"What you'll get:"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-left max-w-lg mx-auto",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Ke,{className:"w-4 h-4 text-purple-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Instant Alerts"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Real-time notifications"})]})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(fu,{className:"w-4 h-4 text-purple-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Channel Integration"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Route to channels"})]})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(As,{className:"w-4 h-4 text-purple-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Quick Actions"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Act from Slack"})]})]})]})]})]})})}function gi({title:e,icon:s,isExpanded:n,onToggle:r,notifications:a,preferences:l,channels:i,onToggleNotification:o,onToggleDirectMessage:c,onSetChannel:m}){const j=a.filter(([y])=>{const h=l.find(v=>v.type===y);return h==null?void 0:h.enabled}).length;return t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(s,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"font-medium text-gray-900",children:e}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",j,"/",a.length,")"]})]}),n?t.jsx(ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(ke,{className:"w-4 h-4 text-gray-400"})]}),n&&t.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50 space-y-3",children:a.map(([y,h])=>{const v=l.find(g=>g.type===y);return t.jsxs("div",{className:"flex items-start justify-between p-3 bg-white rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("button",{onClick:()=>o(y),className:`p-1.5 rounded-lg transition-colors ${v.enabled?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-400"}`,children:v.enabled?t.jsx(Ke,{className:"w-4 h-4"}):t.jsx(Gf,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("p",{className:`font-medium ${v.enabled?"text-gray-900":"text-gray-500"}`,children:h.label}),t.jsx("p",{className:"text-sm text-gray-500",children:h.description})]})]}),v.enabled&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>c(y),className:`flex items-center gap-1 px-2 py-1 rounded text-xs ${v.directMessage?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,title:"Direct message",children:"DM"}),t.jsxs("select",{value:v.channelId||"",onChange:g=>m(y,g.target.value||void 0),className:"text-xs px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-pilot-primary",children:[t.jsx("option",{value:"",children:"No channel"}),i.map(g=>t.jsxs("option",{value:g.id,children:[g.isPrivate?"":"#"," ",g.name]},g.id))]})]})]},y)})})]})}const s1={isConnected:!0,workspaceName:"Pilot Fiber",userId:"U123456",userName:G.name,defaultChannelId:"ch-1",notifications:Object.keys(Bs).map(e=>({type:e,enabled:Bs[e].defaultEnabled,directMessage:!0}))};function n1(){const[e,s]=b.useState(G.notificationPreferences),[n,r]=b.useState(!1),[a,l]=b.useState(!1),[i,o]=b.useState(s1),c=$y(G),m=()=>{o({...i,isConnected:!0,workspaceName:"Pilot Fiber",userId:"U123456",userName:G.name})},j=()=>{o({...i,isConnected:!1,workspaceName:void 0,userId:void 0,userName:void 0,defaultChannelId:void 0})},y=d=>{o({...i,notifications:d})},h=d=>{o({...i,defaultChannelId:d})},v=(d,x)=>{s(u=>({...u,[d]:x}))},g=()=>{r(!0),setTimeout(()=>{r(!1),l(!0),setTimeout(()=>l(!1),2e3)},500)},p=()=>{s(Us)},f=d=>d?new Date(d).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A";return t.jsxs("div",{className:"space-y-6 max-w-4xl",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Profile"}),t.jsx("p",{className:"text-gray-600",children:"Manage your account settings and notification preferences"})]}),t.jsx(T,{children:t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"w-24 h-24 bg-pilot-primary rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-3xl font-bold text-pilot-secondary",children:G.name.split(" ").map(d=>d[0]).join("")})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:G.name}),t.jsx("p",{className:"text-gray-600",children:G.title}),t.jsx("span",{className:`inline-block mt-2 px-3 py-1 rounded-full text-sm font-medium ${G.role==="admin"?"bg-purple-100 text-purple-700":G.role==="manager"?"bg-blue-100 text-blue-700":G.role==="senior_cxa"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:yo[G.role]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(le,{className:"w-4 h-4"}),t.jsx("span",{children:G.email})]}),G.phone&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Oe,{className:"w-4 h-4"}),t.jsx("span",{children:G.phone})]}),G.department&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Gt,{className:"w-4 h-4"}),t.jsx("span",{children:G.department})]}),G.startDate&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(me,{className:"w-4 h-4"}),t.jsxs("span",{children:["Joined ",f(G.startDate)]})]})]})]})]})}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Yr,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permissions"})]}),t.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Your permissions are determined by your role (",yo[G.role],")"]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(c).map(([d,x])=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${x?"bg-green-100":"bg-gray-100"}`,children:x?t.jsx(Ct,{className:"w-3 h-3 text-green-600"}):t.jsx("span",{className:"w-2 h-2 bg-gray-300 rounded-full"})}),t.jsx("span",{className:`text-sm ${x?"text-gray-700":"text-gray-400"}`,children:r1(d)})]},d))})]}),t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ke,{className:"w-5 h-5 text-gray-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Preferences"})]}),t.jsx("button",{onClick:p,className:"text-sm text-blue-600 hover:underline",children:"Reset to defaults"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Email Notifications"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{label:"New project assignments",description:"Get notified when you're assigned to a new project",checked:e.emailNewAssignment,onChange:d=>v("emailNewAssignment",d)}),t.jsx(Re,{label:"Ticket responses",description:"Get notified when a customer responds to a ticket",checked:e.emailTicketResponse,onChange:d=>v("emailTicketResponse",d)}),t.jsx(Re,{label:"Escalations",description:"Get notified when a project is escalated",checked:e.emailEscalation,onChange:d=>v("emailEscalation",d)}),t.jsx(Re,{label:"FOC date reminders",description:"Get reminders when FOC dates are approaching",checked:e.emailFocReminder,onChange:d=>v("emailFocReminder",d)}),t.jsx(Re,{label:"Daily digest",description:"Receive a daily summary of activity",checked:e.emailDailyDigest,onChange:d=>v("emailDailyDigest",d)})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Slack Notifications"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{label:"Enable Slack notifications",description:"Send notifications to your Slack DMs",checked:e.slackEnabled,onChange:d=>v("slackEnabled",d)}),e.slackEnabled&&t.jsxs(t.Fragment,{children:[t.jsx(Re,{label:"New project assignments",description:"Get Slack message when assigned to a project",checked:e.slackNewAssignment,onChange:d=>v("slackNewAssignment",d)}),t.jsx(Re,{label:"Ticket responses",description:"Get Slack message when tickets receive responses",checked:e.slackTicketResponse,onChange:d=>v("slackTicketResponse",d)}),t.jsx(Re,{label:"Escalations",description:"Get Slack message for escalated projects",checked:e.slackEscalation,onChange:d=>v("slackEscalation",d)}),t.jsx(Re,{label:"FOC date reminders",description:"Get Slack reminder for approaching FOC dates",checked:e.slackFocReminder,onChange:d=>v("slackFocReminder",d)}),t.jsx(Re,{label:"Mentions",description:"Get Slack message when mentioned in notes",checked:e.slackMentions,onChange:d=>v("slackMentions",d)})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"In-App Notifications"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{label:"New project assignments",description:"Show notification when assigned to a project",checked:e.inAppNewAssignment,onChange:d=>v("inAppNewAssignment",d)}),t.jsx(Re,{label:"Ticket responses",description:"Show notification when tickets receive responses",checked:e.inAppTicketResponse,onChange:d=>v("inAppTicketResponse",d)}),t.jsx(Re,{label:"Escalations",description:"Show notification for escalated projects",checked:e.inAppEscalation,onChange:d=>v("inAppEscalation",d)}),t.jsx(Re,{label:"FOC date reminders",description:"Show alerts for approaching FOC dates",checked:e.inAppFocReminder,onChange:d=>v("inAppFocReminder",d)}),t.jsx(Re,{label:"Status changes",description:"Show notifications when project status changes",checked:e.inAppStatusChange,onChange:d=>v("inAppStatusChange",d)}),t.jsx(Re,{label:"Mentions",description:"Show notifications when you're mentioned in notes",checked:e.inAppMentions,onChange:d=>v("inAppMentions",d)})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Quiet Hours"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{label:"Enable quiet hours",description:"Pause non-urgent notifications during specific hours",checked:e.quietHoursEnabled,onChange:d=>v("quietHoursEnabled",d)}),e.quietHoursEnabled&&t.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(se,{className:"w-4 h-4 text-gray-400"}),t.jsx("label",{className:"text-sm text-gray-600",children:"From"}),t.jsx("input",{type:"time",value:e.quietHoursStart,onChange:d=>v("quietHoursStart",d.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"To"}),t.jsx("input",{type:"time",value:e.quietHoursEnd,onChange:d=>v("quietHoursEnd",d.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"})]})]})]})]}),e.emailDailyDigest&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Daily Digest Time"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(se,{className:"w-4 h-4 text-gray-400"}),t.jsx("label",{className:"text-sm text-gray-600",children:"Send digest at"}),t.jsx("input",{type:"time",value:e.digestTime,onChange:d=>v("digestTime",d.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),t.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-200",children:[t.jsx(U,{onClick:g,disabled:n,children:n?t.jsx(t.Fragment,{children:"Saving..."}):a?t.jsxs(t.Fragment,{children:[t.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Saved!"]}):t.jsxs(t.Fragment,{children:[t.jsx(gy,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})}),a&&t.jsx("span",{className:"text-sm text-green-600",children:"Your preferences have been saved."})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Xe,{className:"w-5 h-5 text-purple-600"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Slack Workspace Integration"})]}),t.jsx(t1,{integration:i,onConnect:m,onDisconnect:j,onUpdatePreferences:y,onSetDefaultChannel:h})]})]})}function Re({label:e,description:s,checked:n,onChange:r}){return t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"mt-1",children:[t.jsx("input",{type:"checkbox",checked:n,onChange:a=>r(a.target.checked),className:"sr-only peer"}),t.jsx("div",{className:`
          w-10 h-6 rounded-full transition-colors relative
          ${n?"bg-pilot-secondary":"bg-gray-300"}
        `,children:t.jsx("div",{className:`
            absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform
            ${n?"left-5":"left-1"}
          `})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:e}),t.jsx("p",{className:"text-xs text-gray-500",children:s})]})]})}function r1(e){return e.replace(/^can/,"").replace(/([A-Z])/g," $1").trim()}function a1({isOpen:e,onClose:s}){const n=Ve(),{state:r,getCustomer:a,getBuilding:l}=Se(),[i,o]=b.useState(""),[c,m]=b.useState(0),j=b.useRef(null),y=b.useRef(null),h=b.useMemo(()=>{const f=[];return f.push({id:"nav-dashboard",type:"navigation",title:"Dashboard",subtitle:"Go to dashboard",icon:t.jsx(wh,{className:"w-4 h-4"}),action:()=>{n("/"),s()},keywords:["home","overview","stats"]},{id:"nav-projects",type:"navigation",title:"Projects",subtitle:"View all projects",icon:t.jsx(Tc,{className:"w-4 h-4"}),action:()=>{n("/projects"),s()},keywords:["onboarding","list","all"]},{id:"nav-calendar",type:"navigation",title:"Calendar",subtitle:"View install schedule",icon:t.jsx(me,{className:"w-4 h-4"}),action:()=>{n("/calendar"),s()},keywords:["schedule","installs","dates"]},{id:"nav-team",type:"navigation",title:"Team Workload",subtitle:"View team assignments",icon:t.jsx(Je,{className:"w-4 h-4"}),action:()=>{n("/team"),s()},keywords:["workload","assignments","cxa"]},{id:"nav-tickets",type:"navigation",title:"Tickets",subtitle:"View all tickets",icon:t.jsx(cl,{className:"w-4 h-4"}),action:()=>{n("/tickets"),s()},keywords:["inbox","emails","communications"]},{id:"nav-reports",type:"navigation",title:"Reports",subtitle:"View analytics and reports",icon:t.jsx($r,{className:"w-4 h-4"}),action:()=>{n("/reports"),s()},keywords:["analytics","metrics","performance"]}),f.push({id:"action-new-project",type:"action",title:"New Project",subtitle:"Create a new onboarding project",icon:t.jsx(Qe,{className:"w-4 h-4"}),action:()=>{n("/projects?new=true"),s()},keywords:["create","add","onboarding"]},{id:"action-escalated",type:"action",title:"View Escalated Projects",subtitle:"Show all escalated projects",icon:t.jsx(te,{className:"w-4 h-4"}),action:()=>{n("/projects?filter=escalated"),s()},keywords:["urgent","priority","issues"]}),r.projects.forEach(d=>{var w;const x=a(d.customerId),u=l(d.buildingId);x&&f.push({id:`project-${d.id}`,type:"project",title:x.companyName,subtitle:`${d.serviceOrderId}  ${(u==null?void 0:u.address)||""}`,icon:t.jsx(Tt,{className:"w-4 h-4"}),action:()=>{n(`/projects/${d.id}`),s()},keywords:[d.serviceOrderId.toLowerCase(),d.product.toLowerCase(),((w=d.cxAssignee)==null?void 0:w.toLowerCase())||"",(u==null?void 0:u.address.toLowerCase())||""]})}),r.customers.forEach(d=>{const x=r.projects.filter(u=>u.customerId===d.id);x.length>0&&f.push({id:`customer-${d.id}`,type:"customer",title:d.companyName,subtitle:`${x.length} project${x.length>1?"s":""}`,icon:t.jsx(Le,{className:"w-4 h-4"}),action:()=>{n(`/projects/${x[0].id}`),s()},keywords:d.contacts.map(u=>u.email.toLowerCase())})}),f},[r.projects,r.customers,a,l,n,s]),v=b.useMemo(()=>{if(!i.trim())return h.filter(d=>d.type==="navigation"||d.type==="action");const f=i.toLowerCase();return h.filter(d=>{var x,u;return!!(d.title.toLowerCase().includes(f)||(x=d.subtitle)!=null&&x.toLowerCase().includes(f)||(u=d.keywords)!=null&&u.some(w=>w.includes(f)))}).slice(0,10)},[h,i]);if(b.useEffect(()=>{m(0)},[v]),b.useEffect(()=>{e&&(o(""),m(0),setTimeout(()=>{var f;return(f=j.current)==null?void 0:f.focus()},0))},[e]),b.useEffect(()=>{if(y.current){const f=y.current.children[c];f&&f.scrollIntoView({block:"nearest"})}},[c]),b.useEffect(()=>{const f=d=>{if(e)switch(d.key){case"ArrowDown":d.preventDefault(),m(x=>Math.min(x+1,v.length-1));break;case"ArrowUp":d.preventDefault(),m(x=>Math.max(x-1,0));break;case"Enter":d.preventDefault(),v[c]&&v[c].action();break;case"Escape":d.preventDefault(),s();break}};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,v,c,s]),!e)return null;const g=f=>{switch(f){case"navigation":return"Go to";case"project":return"Project";case"customer":return"Customer";case"action":return"Action"}},p=f=>{switch(f){case"navigation":return"bg-blue-100 text-blue-700";case"project":return"bg-green-100 text-green-700";case"customer":return"bg-purple-100 text-purple-700";case"action":return"bg-yellow-100 text-yellow-800"}};return t.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:s}),t.jsx("div",{className:"fixed left-1/2 top-[20%] -translate-x-1/2 w-full max-w-xl",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200",children:[t.jsx(_r,{className:"w-5 h-5 text-gray-400"}),t.jsx("input",{ref:j,type:"text",value:i,onChange:f=>o(f.target.value),placeholder:"Search projects, customers, or type a command...",className:"flex-1 text-base outline-none placeholder-gray-400"}),t.jsx("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs text-gray-500 bg-gray-100 rounded",children:"esc"})]}),t.jsx("div",{ref:y,className:"max-h-80 overflow-y-auto",children:v.length===0?t.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[t.jsx(_r,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsxs("p",{children:['No results found for "',i,'"']})]}):v.map((f,d)=>t.jsxs("button",{onClick:f.action,className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${d===c?"bg-pilot-primary/20":"hover:bg-gray-50"}`,children:[t.jsx("div",{className:`p-2 rounded-lg ${d===c?"bg-pilot-primary text-pilot-secondary":"bg-gray-100 text-gray-600"}`,children:f.icon}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:f.title}),t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${p(f.type)}`,children:g(f.type)})]}),f.subtitle&&t.jsx("p",{className:"text-sm text-gray-500 truncate",children:f.subtitle})]}),t.jsx(ll,{className:`w-4 h-4 ${d===c?"text-gray-600":"text-gray-300"}`})]},f.id))}),t.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-300 rounded text-[10px]",children:""}),t.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-300 rounded text-[10px]",children:""}),"to navigate"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-300 rounded text-[10px]",children:""}),"to select"]})]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(yh,{className:"w-3 h-3"}),"K to open"]})]})]})})]})}const l1=[{title:"Global",shortcuts:[{keys:["","K"],description:"Open command palette"},{keys:["","N"],description:"Create new project"},{keys:["?"],description:"Show keyboard shortcuts"},{keys:["Esc"],description:"Close modal / Cancel"}]},{title:"Navigation",shortcuts:[{keys:["G","D"],description:"Go to Dashboard"},{keys:["G","P"],description:"Go to Projects"},{keys:["G","C"],description:"Go to Calendar"},{keys:["G","R"],description:"Go to Reports"},{keys:["G","T"],description:"Go to Tickets"}]},{title:"Project View",shortcuts:[{keys:["1"],description:"Overview tab"},{keys:["2"],description:"Tickets tab"},{keys:["3"],description:"Tasks tab"},{keys:["4"],description:"Activity tab"},{keys:["5"],description:"Install Report tab"},{keys:["E"],description:"Open email templates"}]},{title:"Lists",shortcuts:[{keys:["J"],description:"Next item"},{keys:["K"],description:"Previous item"},{keys:["Enter"],description:"Open selected item"},{keys:["","A"],description:"Select all"}]}];function i1({isOpen:e,onClose:s}){return b.useEffect(()=>{const n=r=>{r.key==="Escape"&&e&&s()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,s]),e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:s}),t.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(yh,{className:"w-5 h-5 text-gray-500"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Keyboard Shortcuts"})]}),t.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:t.jsx(mt,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:[t.jsx("div",{className:"grid grid-cols-2 gap-8",children:l1.map(n=>t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:n.title}),t.jsx("div",{className:"space-y-2",children:n.shortcuts.map((r,a)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.description}),t.jsx("div",{className:"flex items-center gap-1",children:r.keys.map((l,i)=>t.jsxs("span",{children:[t.jsx("kbd",{className:"px-2 py-1 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded shadow-sm",children:l}),i<r.keys.length-1&&t.jsx("span",{className:"mx-0.5 text-gray-400",children:"+"})]},i))})]},a))})]},n.title))}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Press ",t.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded",children:"?"})," anytime to show this help"]})})]})]})]}):null}const o1={"on-net":"On-Net",anchor:"Anchor","near-net":"Near-Net","off-net":"Off-Net","in-construction":"In Construction"},c1={"on-net":"bg-green-100 text-green-800",anchor:"bg-blue-100 text-blue-800","near-net":"bg-yellow-100 text-yellow-800","off-net":"bg-gray-100 text-gray-800","in-construction":"bg-orange-100 text-orange-800"},d1={gpon:"GPON",xgs:"XGS-PON","gpon-xgs":"GPON + XGS","fixed-wireless":"Fixed Wireless"},u1={commercial:"Commercial",residential:"Residential",mdu:"MDU","data-center":"Data Center"};function fi({outage:e}){const s=e.status==="active",n=e.status==="scheduled",r=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return t.jsx("div",{className:`p-3 rounded-lg border ${s?"bg-red-50 border-red-200":n?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:t.jsxs("div",{className:"flex items-start gap-2",children:[s?t.jsx(vt,{className:"w-4 h-4 text-red-500 mt-0.5"}):n?t.jsx(me,{className:"w-4 h-4 text-yellow-600 mt-0.5"}):t.jsx(Pe,{className:"w-4 h-4 text-gray-400 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-sm font-medium ${s?"text-red-800":n?"text-yellow-800":"text-gray-600"}`,children:e.title}),t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${e.type==="outage"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:e.type==="outage"?"Outage":"Maintenance"})]}),e.description&&t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[t.jsx("span",{children:r(e.startTime)}),e.endTime&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{children:r(e.endTime)})]})]}),e.affectedServices&&e.affectedServices.length>0&&t.jsx("div",{className:"flex gap-1 mt-2",children:e.affectedServices.map(a=>t.jsx("span",{className:"text-xs bg-gray-200 text-gray-700 px-1.5 py-0.5 rounded",children:a},a))})]})]})})}function m1(){var i,o,c;const{isOpen:e,building:s,closeDrawer:n}=xh();if(!s)return null;const r=((i=s.outages)==null?void 0:i.filter(m=>m.status==="active"))||[],a=((o=s.outages)==null?void 0:o.filter(m=>m.status==="scheduled"))||[],l=((c=s.outages)==null?void 0:c.filter(m=>m.status==="resolved").slice(0,3))||[];return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:n}),t.jsxs("div",{className:`fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-out ${e?"translate-x-0":"translate-x-full"}`,children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-pilot-primary rounded-lg",children:t.jsx(Gt,{className:"w-5 h-5 text-pilot-secondary"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"font-semibold text-gray-900",children:"Building Details"}),t.jsx("p",{className:"text-xs text-gray-500",children:"From Flight Deck"})]})]}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:t.jsx(mt,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("div",{className:"overflow-y-auto h-[calc(100%-80px)] p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[t.jsx(Pc,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:s.address}),t.jsxs("p",{className:"text-sm text-gray-500",children:[s.city,", ",s.state," ",s.zip]})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Building Status"}),t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-sm font-medium ${c1[s.buildingStatus]}`,children:o1[s.buildingStatus]})})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Building Type"}),t.jsx("p",{className:"mt-1 font-medium text-gray-900",children:u1[s.buildingType]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Deployment Type"}),t.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[t.jsx(Dh,{className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"font-medium text-gray-900",children:d1[s.deploymentType]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.requiresAfterHours&&t.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-purple-100 text-purple-800 rounded-lg text-sm",children:[t.jsx(se,{className:"w-4 h-4"}),"After Hours Required"]}),s.requiresContractWork&&t.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-100 text-orange-800 rounded-lg text-sm",children:[t.jsx(Ih,{className:"w-4 h-4"}),"Contract Work Required"]}),s.requiresSurvey&&t.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-cyan-100 text-cyan-800 rounded-lg text-sm",children:[t.jsx(Tt,{className:"w-4 h-4"}),"Survey Required"]})]}),r.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(te,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"text-sm font-semibold text-red-700",children:"Active Issues"})]}),t.jsx("div",{className:"space-y-2",children:r.map(m=>t.jsx(fi,{outage:m},m.id))})]}),a.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(me,{className:"w-4 h-4 text-yellow-600"}),t.jsx("span",{className:"text-sm font-semibold text-yellow-700",children:"Scheduled Maintenance"})]}),t.jsx("div",{className:"space-y-2",children:a.map(m=>t.jsx(fi,{outage:m},m.id))})]}),l.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Pe,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Recent History"})]}),t.jsx("div",{className:"space-y-2",children:l.map(m=>t.jsx(fi,{outage:m},m.id))})]}),s.accessInstructions&&t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Access Instructions"}),t.jsx("p",{className:"mt-1 text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.accessInstructions})]}),s.installNotes&&s.installNotes.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Install Notes"}),t.jsx("ul",{className:"mt-2 space-y-1",children:s.installNotes.map((m,j)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[t.jsx("span",{className:"text-gray-400 mt-1",children:""}),m]},j))})]}),s.ispNotes&&t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"ISP Notes"}),t.jsx("p",{className:"mt-1 text-sm text-gray-700 bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:s.ispNotes})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Recommended Device"}),t.jsx("p",{className:"mt-1 font-medium text-gray-900",children:s.recommendedDevice})]}),s.flightDeckId&&t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("a",{href:`https://flightdeck.pilot.com/buildings/${s.flightDeckId}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-2.5 px-4 bg-pilot-secondary text-white rounded-lg hover:bg-pilot-secondary/90 transition-colors text-sm font-medium",children:[t.jsx(Zs,{className:"w-4 h-4"}),"Open in Flight Deck"]})})]})]})]})}const p1={email:t.jsx(le,{className:"w-4 h-4"}),phone:t.jsx(Oe,{className:"w-4 h-4"}),internal:t.jsx(Xe,{className:"w-4 h-4"}),"customer-request":t.jsx(Dc,{className:"w-4 h-4"})},h1={email:"bg-blue-100 text-blue-600",phone:"bg-green-100 text-green-600",internal:"bg-purple-100 text-purple-600","customer-request":"bg-orange-100 text-orange-600"},x1={billing:"Billing",technical:"Technical",scheduling:"Scheduling",general:"General",complaint:"Complaint","change-request":"Change Request"},g1=[{value:"open",label:"Open"},{value:"pending",label:"Pending"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}],f1=[{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];function y1(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}function v1(e){const s=new Date(e),r=new Date().getTime()-s.getTime(),a=Math.floor(r/(1e3*60)),l=Math.floor(r/(1e3*60*60)),i=Math.floor(r/(1e3*60*60*24));return a<1?"Just now":a<60?`${a}m ago`:l<24?`${l}h ago`:i<7?`${i}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Fu({label:e,deadline:s,respondedAt:n}){const r=new Date,a=new Date(s),l=n?new Date(n)>a:r>a,i=n&&new Date(n)<=a,o=a.getTime()-r.getTime(),c=Math.floor(o/(1e3*60*60)),m=Math.floor(o%(1e3*60*60)/(1e3*60));let j="text-green-600 bg-green-50",y="";return i?(j="text-green-600 bg-green-50",y="Met"):l?(j="text-red-600 bg-red-50",y="Breached"):c<1?(j="text-red-600 bg-red-50",y=`${m}m left`):c<4?(j="text-yellow-600 bg-yellow-50",y=`${c}h ${m}m left`):(j="text-green-600 bg-green-50",y=`${c}h left`),t.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${j}`,children:[t.jsxs("span",{className:"text-gray-500 mr-1",children:[e,":"]}),y]})}function j1(){const{isOpen:e,ticketId:s,closeDrawer:n}=fh(),{getTicket:r,getProject:a,getCustomer:l,dispatch:i}=Se(),[o,c]=b.useState(""),[m,j]=b.useState(!1),[y,h]=b.useState(!0),[v,g]=b.useState(!1),[p,f]=b.useState(""),[d,x]=b.useState("Follow-Up"),u=s?r(s):null;if(!u)return null;const w=u.projectId?a(u.projectId):null,N=u.customerId?l(u.customerId):w?l(w.customerId):null,C=F=>{i({type:"UPDATE_TICKET_STATUS",payload:{ticketId:u.id,status:F}})},k=F=>{i({type:"UPDATE_TICKET_PRIORITY",payload:{ticketId:u.id,priority:F}})},I=F=>{i({type:"UPDATE_TICKET_ASSIGNEE",payload:{ticketId:u.id,assignee:F}})},z=()=>{if(!o.trim())return;const F={id:`reply-${Date.now()}`,author:G.name,authorType:"agent",content:o.trim(),createdAt:new Date().toISOString(),isInternal:m};i({type:"ADD_TICKET_REPLY",payload:{ticketId:u.id,reply:F}}),c(""),j(!1)},_=()=>{if(!p.trim()||!w)return;const F={id:`task-${Date.now()}`,title:p.trim(),section:d,completed:!1,assignee:u.assignee||G.name},K={...w,tasks:[...w.tasks,F],updatedAt:new Date().toISOString()};i({type:"UPDATE_PROJECT",payload:K});const pe={id:`reply-${Date.now()}`,author:G.name,authorType:"agent",content:`Created task: "${p.trim()}" in section "${d}"`,createdAt:new Date().toISOString(),isInternal:!0};i({type:"ADD_TICKET_REPLY",payload:{ticketId:u.id,reply:pe}}),f(""),x("Follow-Up"),g(!1)},D=[{value:"",label:"Unassigned"},...re.map(F=>({value:F.name,label:F.name}))],Q=[{id:"original",author:u.from||"Unknown",authorType:"customer",content:u.description,createdAt:u.createdAt,isInternal:!1},...u.replies||[],...(u.notes||[]).map(F=>({id:F.id,author:F.author,authorType:"agent",content:F.content,createdAt:F.createdAt,isInternal:!0}))].sort((F,K)=>new Date(F.createdAt).getTime()-new Date(K.createdAt).getTime());return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:n}),t.jsxs("div",{className:`fixed right-0 top-0 h-full w-full max-w-2xl bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-out flex flex-col ${e?"translate-x-0":"translate-x-full"}`,children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${h1[u.type]}`,children:p1[u.type]}),t.jsxs("div",{children:[t.jsxs("h2",{className:"font-semibold text-gray-900",children:["Ticket #",u.id.split("-")[1]]}),t.jsx("p",{className:"text-xs text-gray-500",children:y1(u.createdAt)})]})]}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:t.jsx(mt,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:u.subject}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Fu,{label:"First Response",deadline:u.firstResponseDue,respondedAt:u.firstRespondedAt}),t.jsx(Fu,{label:"Resolution",deadline:u.resolutionDue,respondedAt:u.resolvedAt})]})]}),t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide block mb-1",children:"Status"}),t.jsx(we,{options:g1,value:u.status,onChange:F=>C(F)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide block mb-1",children:"Priority"}),t.jsx(we,{options:f1,value:u.priority,onChange:F=>k(F)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide block mb-1",children:"Assignee"}),t.jsx(we,{options:D,value:u.assignee||"",onChange:F=>I(F)})]})]})}),t.jsxs("div",{className:"border-b border-gray-200",children:[t.jsxs("button",{onClick:()=>h(!y),className:"w-full px-6 py-3 flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-50",children:[t.jsx("span",{children:"Details"}),y?t.jsx(ut,{className:"w-4 h-4"}):t.jsx(ke,{className:"w-4 h-4"})]}),y&&t.jsxs("div",{className:"px-6 pb-4 grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Category:"}),t.jsx("span",{className:"ml-2 font-medium",children:x1[u.category]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Type:"}),t.jsx("span",{className:"ml-2 font-medium capitalize",children:u.type.replace("-"," ")})]}),N&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-gray-500",children:"Customer:"}),t.jsx("span",{className:"ml-2 font-medium",children:N.companyName})]}),u.from&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-gray-500",children:"From:"}),t.jsx("span",{className:"ml-2 font-medium",children:u.from})]}),w&&t.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[t.jsx(Ac,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-gray-500",children:"Linked Project:"}),t.jsx("a",{href:`/projects/${w.id}`,className:"text-blue-600 hover:underline font-medium",onClick:F=>{F.preventDefault(),n(),window.location.href=`/projects/${w.id}`},children:w.serviceOrderId})]})]})]}),t.jsxs("div",{className:"px-6 py-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Conversation"}),t.jsx("div",{className:"space-y-4",children:Q.map((F,K)=>t.jsxs("div",{className:`${F.isInternal?"bg-yellow-50 border border-yellow-200":F.authorType==="customer"?"bg-gray-50 border border-gray-200":F.authorType==="system"?"bg-blue-50 border border-blue-200":"bg-green-50 border border-green-200"} rounded-lg p-4`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-900",children:F.author}),F.isInternal&&t.jsx("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1.5 py-0.5 rounded",children:"Internal Note"}),F.authorType==="customer"&&K===0&&t.jsx("span",{className:"text-xs bg-gray-200 text-gray-700 px-1.5 py-0.5 rounded",children:"Original"})]}),t.jsx("span",{className:"text-xs text-gray-500",children:v1(F.createdAt)})]}),t.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:F.content})]},F.id))})]})]}),t.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white flex-shrink-0",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{j(!1),g(!1)},className:`text-sm px-3 py-1 rounded-full transition-colors ${!m&&!v?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Reply"}),t.jsxs("button",{onClick:()=>{j(!0),g(!1)},className:`text-sm px-3 py-1 rounded-full transition-colors flex items-center gap-1 ${m&&!v?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(ol,{className:"w-3 h-3"}),"Internal Note"]}),w&&t.jsxs("button",{onClick:()=>{g(!0),f(u.subject)},className:`text-sm px-3 py-1 rounded-full transition-colors flex items-center gap-1 ${v?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(yu,{className:"w-3 h-3"}),"Create Task"]})]}),v?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Task Title"}),t.jsx("input",{type:"text",value:p,onChange:F=>f(F.target.value),placeholder:"Enter task title...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Section"}),t.jsxs("select",{value:d,onChange:F=>x(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary",children:[t.jsx("option",{value:"Follow-Up",children:"Follow-Up"}),t.jsx("option",{value:"Customer Communication",children:"Customer Communication"}),t.jsx("option",{value:"Technical",children:"Technical"}),t.jsx("option",{value:"Scheduling",children:"Scheduling"}),t.jsx("option",{value:"Documentation",children:"Documentation"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(U,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),t.jsxs(U,{onClick:_,disabled:!p.trim(),children:[t.jsx(yu,{className:"w-4 h-4 mr-1"}),"Create Task"]})]})]}):t.jsxs("div",{className:"flex gap-2",children:[t.jsx("textarea",{value:o,onChange:F=>c(F.target.value),placeholder:m?"Add an internal note...":"Type your reply...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pilot-primary resize-none",rows:3}),t.jsx(U,{onClick:z,disabled:!o.trim(),className:"self-end",children:t.jsx(fy,{className:"w-4 h-4"})})]})]})]})]})}function N1(){const e=Ve(),[s,n]=b.useState(!1),[r,a]=b.useState(!1),[l,i]=b.useState(!1);return Lf({onOpenCommandPalette:()=>n(o=>!o),onOpenNewProject:()=>i(!0),onOpenShortcutsHelp:()=>a(!0)}),t.jsxs(t.Fragment,{children:[t.jsx(qy,{children:t.jsxs(uf,{children:[t.jsx(at,{path:"/",element:t.jsx(Wy,{})}),t.jsx(at,{path:"/my-day",element:t.jsx(Cj,{})}),t.jsx(at,{path:"/projects",element:t.jsx(Zy,{})}),t.jsx(at,{path:"/projects/:id",element:t.jsx(Hv,{})}),t.jsx(at,{path:"/groups/:id",element:t.jsx(Wv,{})}),t.jsx(at,{path:"/customers/:id",element:t.jsx(rj,{})}),t.jsx(at,{path:"/tasks",element:t.jsx(aj,{})}),t.jsx(at,{path:"/tickets",element:t.jsx(gj,{})}),t.jsx(at,{path:"/calendar",element:t.jsx(yj,{})}),t.jsx(at,{path:"/team",element:t.jsx(Sj,{})}),t.jsx(at,{path:"/reports",element:t.jsx(Qj,{})}),t.jsx(at,{path:"/playbooks",element:t.jsx(Zj,{})}),t.jsx(at,{path:"/profile",element:t.jsx(n1,{})})]})}),t.jsx(a1,{isOpen:s,onClose:()=>n(!1)}),t.jsx(i1,{isOpen:r,onClose:()=>a(!1)}),t.jsx(Eh,{isOpen:l,onClose:()=>i(!1),onProjectCreated:o=>e(`/projects/${o}`)}),t.jsx(m1,{}),t.jsx(j1,{})]})}function w1(){return t.jsx(Mf,{children:t.jsx(Of,{children:t.jsx($f,{children:t.jsx(N1,{})})})})}yi.createRoot(document.getElementById("root")).render(t.jsx(Qu.StrictMode,{children:t.jsx(jf,{children:t.jsx(w1,{})})}));
